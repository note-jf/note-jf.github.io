import{_ as l}from"./plugin-vue_export-helper.21dcd24c.js";import{o as i,c as o,b as n,e,a as t,d as s,r as p}from"./app.c37b87a5.js";var c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAh4AAAA6CAIAAABwA8cUAAANnklEQVR4Xu1drXojuRI1XJhXGBgYahiYRwhtGDgw1NCwX2GhoeFC04GGfoWBF+a2/kr1J7stOUlbqfPVNyuVSmpJk5zjkjzbqw+DwfCD8ff478ffXZfW+dL+d1iyrfgPmsFg+EnonH+Fsw8zaTEYDItG5/wrnH2YSYvBYFg0Oudf4ezDTFoMBsOi0Tn/CmcfZtJiMBgWjc75Vzj7MJMWg8GwaHTOv8LZh5m0GAyGRaNz/hXOPqxPadluNu+/f8+0KZj3/0E4jevVsOfeJrgh1+OJuw2GOnTOv8LZh/UpLVI/mB0OB/hzMt7/42M/rBjjJsJ0/10p1Ol6KO5PAJsbY/IriX2J0tK0+a6IA3zTjVdo+FJ8H/++ux8eh1/bP7I1Bqw3I3j2ryJ+97x6ej3yjtGaljaNTKd33PxKnohhd6bX856POW6fVtpi/T6kVaQ1epxfmmDz2bZNO/84HmXrbnTzlE2+19PbyVf9bz7MMzqzHd8qpYW7ytCDOb0BBXuWm0DpLXCeQnqfgWlu+UGcbUnjZcyUlothFwOuQdvmY3FpljnD96OJf+vN8WyUDUfHjIgDCz8Pr0haprDXd1f487qOnDuRsmTwbA1Lex+A1pXp+TlI51mdi0t++oXF8gMUC0kLBDiZCUsW1iAtTjnW250r715Wq5e9GvD0GGOSnbaPWEUcE6YAzyhbHsx/0GYgqMXoMRUextPDFtsRt+rSwugtM6cvjYxIJ+d6HK8j9XoQvpzmOQwDzMbP5IpJzJSEi2EXA65C4+an7iYsXaCBfxuMULPjXCUDoDw7UXCKibw/taq9wG60tEnAeKqhPXpaBQ8TAathwzTJ99pkTWJLvr20HN/WWU6cigw7FuOdWxwWnI/j9kWVFickRFqm/KZBWgCgKA8bZ/9snLQACtJC6A0RZyyS5CBUkgs1oTHAGz9jO9DhXXDq6cseGjWi6Thl2TPuTbSbB0FEzZ7FVhYD6RzROPoSaMDlOfi9GGOLtsD6zc9Ol97ogxvuCzfi3ysNUhBvmE+xET90CQU6gmq3WZrMWtTsxOdS23ScpS0nKihf1DQUGhC1FhX3o0VapkwFyYD7zabZCegNadp5UQl/8o5Cn3xYvbTkrMXLSbT3P5Ph1pK0IErDZJnKmfyQxzNZjt4PcHqTG4fEdnQEzrwxiPA0ALz7kK+cUq4S66FE+Vd/Fl5OCleeSXegsIQYgNevz8GVUD+N/2s3H0Cfbbhj3IZ/rzT2eXyWtOR7iInow1FYuq2RRO/tBktz2RXj9wLj+1uW6He9ZAaTOmatQp6vumthGYb7zS5ICzouQ54Zdy2OJne11/i4CooChluL0gK0RagWKokUgdSgkOlu7T5OO+cJn1O59gjJnpF4MRSGjOPBsLGQCZZTLZl2flaoDihHcAgzwP1Zr7NLgGJxDriB7AxCCiZPJqvQNz/AVYdBVy3DneEG/FthFVkL9YeP/4HKteMpZ41L87cgQiHUW5a/PJXRZg6alO6ZoIuetWgJU7JqaZmfteRbGVAUPWuhdzbpwK1eWiAvyaLy+xBMBqsITEZpFdU8neVD/sxugS6RqOyRBABn55HoEzgjq9jHg7AUqdQ5recZMGkpHB35puhHvS4uAYrFOcyRljgMnS6qFTcfVVy4PrjhjtDIv5VGiLiQB+gEDbI09Uq0u3tWwtqkxWUP2oGbPqW/+MsFpTC0TL/8LcSUpEW75gnWJC05yRBnWczpgx0PwLW/Ki3+ciV8owyyonppAYCiOHs7rN7+w61npCVwE/1GEua6vf90j2op0PHlOsaFsmRAT9GCl2NQru4H1ILgtGTw4lWsK2QrnpWqaDZTeYwBEMw5/dwScrE0h1nSUrv5eCVhDH14w72ghX8bjPOsI1ZxjqQRNHwrLI9w+6yllJpIrs9zTrkIcWLDChqO8rI06tLyGVmLUA7+vWGiN+FryikjKUmLPDprkZactSRFAZPBBXieItxEqJlUGGEipkb05hs8/IGN4GUeRf0YnlpRK68n8mXDsGfpZJ17Yo5eha1Ql4AC+KYASjtV4v6azRe7gP8mDHeJev5tNH+N4ZHYUzCykBaa38AIWnrx0SIt/uIEA12iUK4nc4Z/qaNKHZk8uW0q3bUUdOWjSVrCmVWA/ObxgaUy5G6mdNeCT8NSQL20zMRVwQaD4YtRz7+Lt86XxiXh+w2nMjXSYv+jF4OhG3TOv8LZhy1SWvKNy0edtBgMhm7QOf8KZx+2SGkhZtJiMPxodM6/wtmHmbQYDIZFo3P+Fc4+zKTFYDAsGp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx9m0mIwGBaNzvlXOPswkxaDwbBodM6/wtmHmbQYDIZFo3P+Fc4+zKTFYDAsGp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx/Wp7TYq8BmQ7w7uR3khc0GQys651/h7MP6lBapH8wOhwP8+a69wNi9V5kybiLM8A54SZ3+TczS/Qlgc2NMfiWxL1FamjbfFXGAb7rxCg1fiu/jX3iTPLxbPpp7bzxFeKV8em88ikdvlZfWtLRp5Ij8ODIxeLM92J/X9M55viJv4/ZJbfL7kFaR1uhxfmmCzWfbNu18fikkst3o5imbfK+nt5Ov+t98mGd0Zju+VUoLd5WhB3N6Awr2LDeB0lvgPIX0PgPu/c7wIM62pPEyZkrLxbCLAdegbfOxuDTLnOH70cS/9eZ4dr0ZXdmR+POeByRzfO1bp7DA5pMncu5EyuWOTdLyPgCto+lNvB/nrJhTiCCBBcHzS376xUaIcoWkBQKczEgB89YgLU454hvsdy+r1cteDXh6hLfcBzttH7GKOCZMAZ5RtjyY/6DNQFCL0WMqPIynhy22I27VpYXRW2ZOXxoZkU7O9TheR+r1IHw5zXMYBpiNn8kVk5gpCRfDLgZchcbNT91NWLpAA/82GAiGM8e5kZSFTfQamiYKTjGR96GpZDda2qQZMdU490QiJ9OKZHbil7nBC0+Rm9wXS4tTnZtLy/FtneXEqciwYzHeucVhwfk4bl9UaXFCQqRlym8apAUAivKwcfbPxkkLoCAthN4QccYiSQ5CJblQExoDvPEztgMd3gWnnr7soVEjmo5Tlj3j3kS7eRBE1OxZbGUxkM4RjaMvgQZcnoPfizG2aAus3/zsdOmNPrjhvnAj/r3SIAXxVswGMF9Dl1CgI6h2m6XlrCWcaAWIbIlLixSh6CSLDb1QX9SqDhKtXlqmTAXJgPvNptkJ6A1p2nlRCX/yjkKffFi9tOSsxctJtPc/k+HWkrQgSsNkmcqZ/JDHM1mO3g9wepMbh8R2dATOvDGI8DQAvPuQr5xSrhLroUT5V38WXk4KV55Jd6CwhBiA16/PwZVQP43/azcfQJ9tuGPchn+vNPZ5vCAtnFvTPcRE6+EoLN3WKKdPzm6wNH99IvndzZ89FEf6exrRKy2HalX0fNVdC8sw3G92QVrQcRnyzLhrcTS5q73Gx1VQFDDcWpQWoC1CtVBJpAikBoVMd2v3cdo5T/icyrVHSPaMxIuhMGQcD4aNhUywnGrJtPOzQnVAOYJDmAHuz3qdXQIUi3PADWRnEFIweTJZhb75Aa46DLpqGe4MN+DfCpuTtZBDM2LhYAqOp0rnVI1L87cg8lwrWD4ly+YVxeHpdfsqWrNSpnsmUBQ9ayHXPMyqpWV+1pJvZUBR9KyF3tmkA7d6aYG8JIvK70MwGawiMBmlVVTzdJYP+TO7BbpEorJHEgCcnUeiT+CMrGIfD8JSpFLntJ5nwKSlcHTkm6If9bq4BCgW5zBHWuIwdLqoVtx8VHHh+uCGO0Ij/1ba5eOjgt6Evk6Wpl6JdnfPamTL0lz2cO7ATZMW0iolAS3TL38LCyxJS/kpTdKSkwxxlsWcPtjxAFz7q9LiL1fCN8ogK6qXFgAoirO3w+rtP9x6RloCN9FvJGGu2/tP96iWAh1frmNcKEsG9BQteDkG5ep+QC0ITksGL17FukK24lmpimYzlccYAMGc088tIRdLc5glLbWbj1cSxtCHN9wLWvi3wTjPOmJ1aQowaYlVgbXzCLfPWvSEaTym+TjhUeacWzWpwwoajvKyNOrS8hlZi1AO/r1hojfha8opIylJizw6a5GWnLUkRQGTwQV4niLcRKiZVBhhIqZG9OYbPPyBjeBlHkX9GJ5aUSuvJ/Jlw7Bn6WSde2KOXoWtUJeAAvimAEo7VeL+ms0Xu4D/Jgx3iXr+bbT8r0ASe2KaLpA7yW9ghEJ6Ub80ONpKgIOsCEi58pxzq6YrMQAmT26bSnctyg5Ea5CWcGYVIL95fGCpDLmbKd214NOwFFAvLTNxVbDBYPhi1PPv4q3zpXFJ+H7DqUyNtNj/6MVg6Aad869w9mGLlJZ84/JRJy0Gg6EbdM6/wtmHLVJaiJm0GAw/Gp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx9m0mIwGBaNzvlXOPswkxaDwbBodM6/wtmHmbQYDIZFY/kkVW0mLd9oJi0Gw4/G8kmq2kxavtH+D3kj7soe3Zz0AAAAAElFTkSuQmCC";const r={},u=t(`<h2 id="\u4E00\u3001\u5B89\u88C5-centos7-9-\u6A21\u677F" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u5B89\u88C5-centos7-9-\u6A21\u677F" aria-hidden="true">#</a> \u4E00\u3001\u5B89\u88C5 centos7.9 \u6A21\u677F</h2><p><em>\u5B89\u88C5\uFF1A\u7565\u7565\u7565\u7565</em></p><h2 id="\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4" aria-hidden="true">#</a> \u6B65\u9AA4\uFF1A</h2><ol><li>\u67E5\u770B\u5F53\u524D\u7CFB\u7EDF\u7248\u672C</li><li>\u8BBE\u7F6Esudo\u6743\u9650</li><li>\u56FD\u5185yum\u6E90</li><li>\u5347\u7EA7\u5185\u6838</li><li>\u5173\u95ED\u9632\u706B\u5899firewalld\u3001\u5173\u95EDselinux</li><li>\u914D\u7F6E\u7F51\u5361</li><li>\u7981\u7528\u8BE5\u53EF\u9884\u6D4B\u547D\u540D\u89C4\u5219</li><li>\u91CD\u65B0\u751F\u6210GRUB\u914D\u7F6E\u5E76\u66F4\u65B0\u5185\u6838\u53C2\u6570</li></ol><h2 id="_1\u3001\u67E5\u770B\u5F53\u524D\u7CFB\u7EDF\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u67E5\u770B\u5F53\u524D\u7CFB\u7EDF\u7248\u672C" aria-hidden="true">#</a> 1\u3001\u67E5\u770B\u5F53\u524D\u7CFB\u7EDF\u7248\u672C</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># cat /etc/redhat-release</span>
CentOS Linux release <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2\u3001\u8BBE\u7F6Esudo\u6743\u9650" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u8BBE\u7F6Esudo\u6743\u9650" aria-hidden="true">#</a> 2\u3001\u8BBE\u7F6Esudo\u6743\u9650</h2><p>1\u3001su root</p><p>2\u3001chmod u+w /etc/sudoers</p><p>3\u3001vim /etc/sudoers</p><blockquote><p>root ALL=(ALL) ALL</p><p>a ALL=(ALL) ALL</p></blockquote><p>4\u3001\u64A4\u9500sudoers\u6587\u4EF6\u5199\u6743\u9650\uFF0C\u547D\u4EE4\uFF1A</p><p>chmod u-w /etc/sudoers</p><p>5\u3001\u5207\u6362\u7528\u6237 su a</p><h2 id="_3\u3001\u56FD\u5185yum\u6E90-\u4F7F\u7528\u534E\u4E3A" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u56FD\u5185yum\u6E90-\u4F7F\u7528\u534E\u4E3A" aria-hidden="true">#</a> 3\u3001\u56FD\u5185yum\u6E90\uFF08\u4F7F\u7528\u534E\u4E3A\uFF09</h2>`,15),d={href:"https://developer.aliyun.com/mirror/?spm=a2c6h.13651102.0.0.44e61b11ewNwcu&serviceType=mirror&tag=%E7%B3%BB%E7%BB%9F",target:"_blank",rel:"noopener noreferrer"},v=s("\u963F\u91CC\u955C\u50CF\u7AD9"),k={href:"https://mirrors.huaweicloud.com/home",target:"_blank",rel:"noopener noreferrer"},m=s("\u534E\u4E3A\u955C\u50CF\u7AD9"),b=t(`<h3 id="centos-base-repo" tabindex="-1"><a class="header-anchor" href="#centos-base-repo" aria-hidden="true">#</a> CentOS-Base.repo</h3><h4 id="centos7" tabindex="-1"><a class="header-anchor" href="#centos7" aria-hidden="true">#</a> centos7</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u914D\u7F6E\u4E0B\u8F7D</span>
<span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo
yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum -y update <span class="token operator">&amp;&amp;</span> yum repolist all
-----------------------------------CentOS-Base.repo--------------------------------------
<span class="token punctuation">[</span>base<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Base - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#\u53D1\u5E03\u66F4\u65B0</span>
<span class="token punctuation">[</span>updates<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Updates - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/updates/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#\u53EF\u80FD\u6709\u7528\u7684\u9644\u52A0\u8F6F\u4EF6\u5305</span>
<span class="token punctuation">[</span>extras<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Extras - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/extras/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#\u6269\u5C55\u73B0\u6709\u8F6F\u4EF6\u5305\u529F\u80FD\u7684\u9644\u52A0\u8F6F\u4EF6\u5305</span>
<span class="token punctuation">[</span>centosplus<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Plus - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/centosplus/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<span class="token comment"># \u963F\u91CC</span>
<span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">curl</span> -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">wget</span> http://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">sed</span> -i -e <span class="token string">&#39;/mirrors.cloud.aliyuncs.com/d&#39;</span> -e <span class="token string">&#39;/mirrors.aliyuncs.com/d&#39;</span> /etc/yum.repos.d/CentOS-Base.repo

yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum -y update <span class="token operator">&amp;&amp;</span> yum repolist all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu" aria-hidden="true">#</a> ubuntu</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u534E\u4E3A\uFF1A
<span class="token function">cp</span> -a /etc/apt/sources.list /etc/apt/sources.list.bak

\u5C06http://archive.ubuntu.com\u548Chttp://security.ubuntu.com\u66FF\u6362\u6210http://repo.huaweicloud.com\uFF0C\u53EF\u4EE5\u53C2\u8003\u5982\u4E0B\u547D\u4EE4\uFF1A
<span class="token function">sed</span> -i <span class="token string">&quot;s@http://.*archive.ubuntu.com@http://repo.huaweicloud.com@g&quot;</span> /etc/apt/sources.list
<span class="token function">sed</span> -i <span class="token string">&quot;s@http://.*security.ubuntu.com@http://repo.huaweicloud.com@g&quot;</span> /etc/apt/sources.list

\u6267\u884C yum update \u66F4\u65B0\u7D22\u5F15
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
\u963F\u91CC\uFF1A
\u66FF\u6362\u9ED8\u8BA4\u7684http://archive.ubuntu.com/\u4E3Amirrors.aliyun.com

deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse

<span class="token comment"># deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span>
<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span>

deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse

\u6267\u884C yum update \u66F4\u65B0\u7D22\u5F15
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="elrepo-repo" tabindex="-1"><a class="header-anchor" href="#elrepo-repo" aria-hidden="true">#</a> elrepo.repo</h3><h4 id="\u534E\u4E3A" tabindex="-1"><a class="header-anchor" href="#\u534E\u4E3A" aria-hidden="true">#</a> \u534E\u4E3A</h4><p>https://mirrors.huaweicloud.com/home \u641C\u7D22 epel</p><p>1 \u67E5\u770B\uFF1Ayum list | grep epel-release === epel-release.noarch 7-11 extras 2 \u5B89\u88C5\uFF1Ayum install -y epel-release yum remove -y epel-release</p><p>3 \u66FF\u6362\uFF1A</p><p>rm -rf /etc/yum.repos.d/epel-testing.repo\uFF08\u4E0D\u9700\u8981\uFF01\uFF09</p><blockquote><p>sed -i &quot;s/#baseurl/baseurl/g&quot; /etc/yum.repos.d/epel.repo sed -i &quot;s/metalink/#metalink/g&quot; /etc/yum.repos.d/epel.repo sed -i &quot;s@https?\u{1F615}/download.fedoraproject.org/pub@https://repo.huaweicloud.com@g&quot; /etc/yum.repos.d/epel.repo</p></blockquote><p>4 \u6267\u884C yum -y clean all &amp;&amp; yum -y makecache &amp;&amp; yum -y update &amp;&amp; yum -y repolist all</p><h5 id="epel-repo" tabindex="-1"><a class="header-anchor" href="#epel-repo" aria-hidden="true">#</a> epel.repo</h5><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>epel<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span>
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/<span class="token variable">$basearch</span>
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7

<span class="token punctuation">[</span>epel-debuginfo<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span> - Debug
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/<span class="token variable">$basearch</span>/debug
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-debug-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token punctuation">[</span>epel-source<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span> - Source
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/SRPMS
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-source-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="epel-repo-rpmnew-\u81EA\u52A8\u751F\u6210" tabindex="-1"><a class="header-anchor" href="#epel-repo-rpmnew-\u81EA\u52A8\u751F\u6210" aria-hidden="true">#</a> epel.repo.rpmnew \u81EA\u52A8\u751F\u6210</h5><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>epel<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span>
<span class="token comment"># \u4F7F\u7528metalink\u66F4\u5B89\u5168\uFF0C\u4F46\u5982\u679C\u4F60\u60F3\u4F7F\u7528\u672C\u5730\u955C\u50CF</span>
<span class="token comment"># \u628A\u5B83\u7684\u5730\u5740\u653E\u5728\u8FD9\u91CC\u3002</span>
<span class="token comment">#baseurl=http://download.example/pub/epel/7/$basearch</span>
<span class="token assign-left variable">metalink</span><span class="token operator">=</span>https://mirrors.fedoraproject.org/metalink?repo<span class="token operator">=</span>epel-7<span class="token operator">&amp;</span><span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token variable">$basearch</span><span class="token operator">&amp;</span><span class="token assign-left variable">infra</span><span class="token operator">=</span><span class="token variable">$infra</span><span class="token operator">&amp;</span><span class="token assign-left variable">content</span><span class="token operator">=</span><span class="token variable">$contentdir</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u963F\u91CC" tabindex="-1"><a class="header-anchor" href="#\u963F\u91CC" aria-hidden="true">#</a> \u963F\u91CC</h4><p>https://developer.aliyun.com/mirror/epel</p><p>1 \u67E5\u770B\uFF1Ayum list | grep epel-release === epel-release.noarch 7-11 extras 2 \u5B89\u88C5\uFF1Ayum install -y epel-release</p><blockquote><p>mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backup mv /etc/yum.repos.d/epel-testing.repo /etc/yum.repos.d/epel-testing.repo.backup</p></blockquote><p>3 wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</p><h2 id="_4\u3001\u5347\u7EA7\u5185\u6838\u3001\u5E76\u5220\u9664\u5F53\u524D\u65E0\u7528\u7684\u7CFB\u7EDF\u5185\u6838\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u5347\u7EA7\u5185\u6838\u3001\u5E76\u5220\u9664\u5F53\u524D\u65E0\u7528\u7684\u7CFB\u7EDF\u5185\u6838\u7248\u672C" aria-hidden="true">#</a> 4\u3001\u5347\u7EA7\u5185\u6838\u3001\u5E76\u5220\u9664\u5F53\u524D\u65E0\u7528\u7684\u7CFB\u7EDF\u5185\u6838\u7248\u672C</h2><p>https://kernel.org/</p>`,24),g=n("th",null,"mainline:",-1),h=n("th",null,[n("strong",null,"5.18-rc6")],-1),_=n("th",null,"2022-05-08",-1),f=s("["),q={href:"https://git.kernel.org/torvalds/t/linux-5.18-rc6.tar.gz",target:"_blank",rel:"noopener noreferrer"},w=s("tarball"),x=s("]"),y=n("th",null,null,-1),$=s("["),E={href:"https://git.kernel.org/torvalds/p/v5.18-rc6/v5.17",target:"_blank",rel:"noopener noreferrer"},M=s("patch"),S=s("]"),N=s("["),A={href:"https://git.kernel.org/torvalds/p/v5.18-rc6/v5.18-rc5",target:"_blank",rel:"noopener noreferrer"},T=s("inc. patch"),V=s("]"),O=s("["),D={href:"https://git.kernel.org/torvalds/ds/v5.18-rc6/v5.18-rc5",target:"_blank",rel:"noopener noreferrer"},C=s("view diff"),P=s("]"),R=s("["),L={href:"https://git.kernel.org/torvalds/h/v5.18-rc6",target:"_blank",rel:"noopener noreferrer"},G=s("browse"),U=s("]"),I=n("th",null,null,-1),F=n("td",null,"stable:",-1),B=n("td",null,[n("strong",null,"5.17.6")],-1),z=n("td",null,"2022-05-09",-1),H=s("["),K={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.17.6.tar.xz",target:"_blank",rel:"noopener noreferrer"},W=s("tarball"),X=s("]"),j=s("["),Y={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.17.6.tar.sign",target:"_blank",rel:"noopener noreferrer"},Z=s("pgp"),J=s("]"),Q=s("["),ss={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.17.6.xz",target:"_blank",rel:"noopener noreferrer"},ns=s("patch"),as=s("]"),es=s("["),ts={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.17.5-6.xz",target:"_blank",rel:"noopener noreferrer"},ls=s("inc. patch"),is=s("]"),os=s("["),ps={href:"https://git.kernel.org/stable/ds/v5.17.6/v5.17.5",target:"_blank",rel:"noopener noreferrer"},cs=s("view diff"),rs=s("]"),us=s("["),ds={href:"https://git.kernel.org/stable/h/v5.17.6",target:"_blank",rel:"noopener noreferrer"},vs=s("browse"),ks=s("]"),ms=s("["),bs={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.17.6",target:"_blank",rel:"noopener noreferrer"},gs=s("changelog"),hs=s("]"),_s=n("td",null,"stable:",-1),fs=n("td",null,[n("strong",null,"5.16.20 [EOL]")],-1),qs=n("td",null,"2022-04-13",-1),ws=s("["),xs={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.20.tar.xz",target:"_blank",rel:"noopener noreferrer"},ys=s("tarball"),$s=s("]"),Es=s("["),Ms={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.20.tar.sign",target:"_blank",rel:"noopener noreferrer"},Ss=s("pgp"),Ns=s("]"),As=s("["),Ts={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.16.20.xz",target:"_blank",rel:"noopener noreferrer"},Vs=s("patch"),Os=s("]"),Ds=s("["),Cs={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.16.19-20.xz",target:"_blank",rel:"noopener noreferrer"},Ps=s("inc. patch"),Rs=s("]"),Ls=s("["),Gs={href:"https://git.kernel.org/stable/ds/v5.16.20/v5.16.19",target:"_blank",rel:"noopener noreferrer"},Us=s("view diff"),Is=s("]"),Fs=s("["),Bs={href:"https://git.kernel.org/stable/h/v5.16.20",target:"_blank",rel:"noopener noreferrer"},zs=s("browse"),Hs=s("]"),Ks=s("["),Ws={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.16.20",target:"_blank",rel:"noopener noreferrer"},Xs=s("changelog"),js=s("]"),Ys=n("td",null,"longterm:",-1),Zs=n("td",null,[n("strong",null,"5.15.38")],-1),Js=n("td",null,"2022-05-09",-1),Qs=s("["),sn={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.38.tar.xz",target:"_blank",rel:"noopener noreferrer"},nn=s("tarball"),an=s("]"),en=s("["),tn={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.38.tar.sign",target:"_blank",rel:"noopener noreferrer"},ln=s("pgp"),on=s("]"),pn=s("["),cn={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.15.38.xz",target:"_blank",rel:"noopener noreferrer"},rn=s("patch"),un=s("]"),dn=s("["),vn={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.15.37-38.xz",target:"_blank",rel:"noopener noreferrer"},kn=s("inc. patch"),mn=s("]"),bn=s("["),gn={href:"https://git.kernel.org/stable/ds/v5.15.38/v5.15.37",target:"_blank",rel:"noopener noreferrer"},hn=s("view diff"),_n=s("]"),fn=s("["),qn={href:"https://git.kernel.org/stable/h/v5.15.38",target:"_blank",rel:"noopener noreferrer"},wn=s("browse"),xn=s("]"),yn=s("["),$n={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.15.38",target:"_blank",rel:"noopener noreferrer"},En=s("changelog"),Mn=s("]"),Sn=n("td",null,"longterm:",-1),Nn=n("td",null,[n("strong",null,"5.10.114")],-1),An=n("td",null,"2022-05-09",-1),Tn=s("["),Vn={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.114.tar.xz",target:"_blank",rel:"noopener noreferrer"},On=s("tarball"),Dn=s("]"),Cn=s("["),Pn={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.114.tar.sign",target:"_blank",rel:"noopener noreferrer"},Rn=s("pgp"),Ln=s("]"),Gn=s("["),Un={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.10.114.xz",target:"_blank",rel:"noopener noreferrer"},In=s("patch"),Fn=s("]"),Bn=s("["),zn={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.10.113-114.xz",target:"_blank",rel:"noopener noreferrer"},Hn=s("inc. patch"),Kn=s("]"),Wn=s("["),Xn={href:"https://git.kernel.org/stable/ds/v5.10.114/v5.10.113",target:"_blank",rel:"noopener noreferrer"},jn=s("view diff"),Yn=s("]"),Zn=s("["),Jn={href:"https://git.kernel.org/stable/h/v5.10.114",target:"_blank",rel:"noopener noreferrer"},Qn=s("browse"),sa=s("]"),na=s("["),aa={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.10.114",target:"_blank",rel:"noopener noreferrer"},ea=s("changelog"),ta=s("]"),la=n("td",null,"longterm:",-1),ia=n("td",null,[n("strong",null,"5.4.192")],-1),oa=n("td",null,"2022-05-09",-1),pa=s("["),ca={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.4.192.tar.xz",target:"_blank",rel:"noopener noreferrer"},ra=s("tarball"),ua=s("]"),da=s("["),va={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.4.192.tar.sign",target:"_blank",rel:"noopener noreferrer"},ka=s("pgp"),ma=s("]"),ba=s("["),ga={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.4.192.xz",target:"_blank",rel:"noopener noreferrer"},ha=s("patch"),_a=s("]"),fa=s("["),qa={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.4.191-192.xz",target:"_blank",rel:"noopener noreferrer"},wa=s("inc. patch"),xa=s("]"),ya=s("["),$a={href:"https://git.kernel.org/stable/ds/v5.4.192/v5.4.191",target:"_blank",rel:"noopener noreferrer"},Ea=s("view diff"),Ma=s("]"),Sa=s("["),Na={href:"https://git.kernel.org/stable/h/v5.4.192",target:"_blank",rel:"noopener noreferrer"},Aa=s("browse"),Ta=s("]"),Va=s("["),Oa={href:"https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.4.192",target:"_blank",rel:"noopener noreferrer"},Da=s("changelog"),Ca=s("]"),Pa=t(`<h3 id="centos-\u5185\u6838\u5347\u7EA7" tabindex="-1"><a class="header-anchor" href="#centos-\u5185\u6838\u5347\u7EA7" aria-hidden="true">#</a> centos \u5185\u6838\u5347\u7EA7</h3><p>http://www.elrepo.org/</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5BFC\u5165\u8BE5\u6E90\u7684\u79D8\u94A5</span>
<span class="token function">rpm</span> --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
<span class="token comment"># \u542F\u7528\u8BE5\u6E90\u4ED3\u5E93</span>
<span class="token function">rpm</span> -Uvh http://www.elrepo.org/elrepo-release-7.0-5.el7.elrepo.noarch.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u53EF\u5347\u7EA7\u7684\u5185\u6838\u7248\u672C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum --disablerepo<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> --enablerepo<span class="token operator">=</span><span class="token string">&quot;elrepo-kernel&quot;</span> list available
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u53EF\u5B89\u88C5\u7684\u8F6F\u4EF6\u5305 kernel-lt.x86_64 5.4.192-1.el7.elrepo elrepo-kernel</p><p>kernel-ml.x86_64 5.17.6-1.el7.elrepo elrepo-kernel</p><p>\u5B89\u88C5\u5185\u6838</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum --enablerepo<span class="token operator">=</span>elrepo-kernel <span class="token function">install</span> -y kernel-lt-5.4.192-1.el7.elrepo kernel-lt-headers-5.4.192-1.el7.elrepo kernel-lt-tools-5.4.192-1.el7.elrepo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u770B\u5F53\u524D\u7CFB\u7EDF\u5185\u53EF\u7528\u5185\u6838</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">awk</span> -F<span class="token punctuation">\\</span>&#39; <span class="token string">&#39;$1==&quot;menuentry &quot; {print i++ &quot; : &quot; $2}&#39;</span> /etc/grub2.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BBE\u7F6E\u5F00\u673A\u4ECE\u65B0\u5185\u6838\u7248\u672C\u542F\u52A8\uFF08\u5176\u4E2D 0 \u662F\u4E0A\u9762\u67E5\u8BE2\u51FA\u6765\u7684\u53EF\u7528\u5185\u6838\u7F16\u53F7\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>grub2-set-default <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u5E76\u5220\u9664\u5F53\u524D\u65E0\u7528\u7684\u7CFB\u7EDF\u5185\u6838\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#\u5E76\u5220\u9664\u5F53\u524D\u65E0\u7528\u7684\u7CFB\u7EDF\u5185\u6838\u7248\u672C" aria-hidden="true">#</a> \u5E76\u5220\u9664\u5F53\u524D\u65E0\u7528\u7684\u7CFB\u7EDF\u5185\u6838\u7248\u672C</h3><p>\u6240\u6709\u5DF2\u5B89\u88C5\u7684\u5185\u6838\u7248\u672C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep kernel</span>

kernel-lt-5.4.192-1.el7.elrepo.x86_64
kernel-3.10.0-1160.el7.x86_64
kernel-3.10.0-1160.62.1.el7.x86_64
kernel-tools-3.10.0-1160.62.1.el7.x86_64
kernel-headers-3.10.0-1160.62.1.el7.x86_64
kernel-devel-3.10.0-1160.el7.x86_64
kernel-tools-libs-3.10.0-1160.62.1.el7.x86_64
kernel-devel-3.10.0-1160.62.1.el7.x86_64
abrt-addon-kerneloops-2.1.11-60.el7.centos.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u524D\u4F7F\u7528\u7684\u5185\u6838\u7248\u672C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">5.4</span>.192-1.el7.elrepo.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5220\u9664</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum remove kernel-3.10.0-1160.el7.x86_64 kernel-3.10.0-1160.62.1.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6216</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum remove <span class="token variable"><span class="token variable">$(</span><span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> kernel <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token punctuation">$(</span>uname -r<span class="token punctuation">)</span><span class="token variable">)</span></span>
yum <span class="token function">install</span> -y gcc <span class="token function">make</span> ncurses-devel openssl-devel flex bison  elfutils-libelf-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5\u3001\u5173\u95ED\u9632\u706B\u5899firewalld\u3001\u5173\u95EDselinux\u3001\u5173\u95EDswap\u3001\u786E\u4FDD\u4E0D\u4F11\u7720" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u5173\u95ED\u9632\u706B\u5899firewalld\u3001\u5173\u95EDselinux\u3001\u5173\u95EDswap\u3001\u786E\u4FDD\u4E0D\u4F11\u7720" aria-hidden="true">#</a> 5\u3001\u5173\u95ED\u9632\u706B\u5899firewalld\u3001\u5173\u95EDselinux\u3001\u5173\u95EDswap\u3001\u786E\u4FDD\u4E0D\u4F11\u7720</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 1\u3001 \u5173\u95ED\u9632\u706B\u5899</span>
<span class="token comment">## centos</span>
systemctl start firewalld		systemctl stop firewalld
systemctl <span class="token builtin class-name">enable</span> firewalld		systemctl disable firewalld
systemctl status firewalld
<span class="token comment">## ubuntu</span>
systemctl disable ufw.service <span class="token operator">&amp;&amp;</span> systemctl stop ufw.service
ufw start		ufw stop 	
ufw <span class="token builtin class-name">enable</span>		ufw disable 	
ufw status

<span class="token comment"># 2\u3001 \u5173\u95EDselinux</span>
setenforce <span class="token number">0</span> <span class="token comment"># \u4E34\u65F6\u5173\u95ED </span>
<span class="token comment"># \u6C38\u4E45\u5173\u95ED/etc/selinux/semanage.conf</span>
<span class="token function">sed</span> -i <span class="token string">&#39;s/enforcing/disabled/&#39;</span> /etc/selinux/config
<span class="token function">sed</span> -i <span class="token string">&#39;s/^SELINUX=enforcing$/SELINUX=permissive/&#39;</span> /etc/selinux/config
<span class="token comment"># \u67E5\u770BSELinux\u7684\u72B6\u6001</span>
getenforce

<span class="token comment"># 3\u3001\u5173\u95ED swap</span>
swapoff -a  <span class="token comment">#\u4E34\u65F6\u5173\u95ED</span>
<span class="token comment">#\u6C38\u4E45\u5173\u95ED</span>
<span class="token function">sed</span> -ri <span class="token string">&#39;s/.*swap.*/#&amp;/&#39;</span> /etc/fstab

<span class="token comment"># 4\u3001\u786E\u4FDD\u4E0D\u4F11\u7720</span>
systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6\u3001\u914D\u7F6E\u7F51\u5361" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u914D\u7F6E\u7F51\u5361" aria-hidden="true">#</a> 6\u3001\u914D\u7F6E\u7F51\u5361</h2><p>vim /etc/sysconfig/network-scripts/ifcfg-ens33</p><p>\u751F\u4EA7 UUID\uFF1A uuidgen ens33 ls -l /dev/disk/by-uuid \u67E5\u770B UUID\uFF1A nmcli con | sed -n &#39;1,2p&#39;</p><p>BOOTPROTO\uFF1A</p><blockquote><p>dhcp\u8868\u793A\u4F7F\u7528\u52A8\u6001IP\uFF0Cdhcp \u52A8\u6001IP\u5730\u5740\u662F\u81EA\u884C\u751F\u6210\u3002</p><p>none \u65E0\uFF08\u4E0D\u6307\u5B9A\uFF09\u901A\u5E38\u662FDHCP</p><p>static\uFF0C\u8981\u81EA\u5DF1\u81EA\u884C\u6307\u5B9AIP\u5730\u5740</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">&quot;Ethernet&quot;</span>
<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span><span class="token string">&quot;none&quot;</span>
<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">&quot;static&quot;</span>
<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_PRIVACY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span><span class="token string">&quot;stable-privacy&quot;</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;ccb173d2-9470-4fc3-b894-cce7029f0455&quot;</span>
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">ETHTOOL_OPTS</span><span class="token operator">=</span><span class="token string">&quot;autoneg off speed 10000 duplex full&quot;</span>
<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.119&quot;</span>
<span class="token comment"># PREFIX=&quot;24&quot;</span>
<span class="token assign-left variable">NETMASK</span><span class="token operator">=</span><span class="token string">&quot;255.255.255.0&quot;</span>
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.1&quot;</span>
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token string">&quot;192.168.1.1&quot;</span>
<span class="token assign-left variable">DNS2</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>/etc/hosts</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> <span class="token function">tee</span> /etc/hosts <span class="token operator">&gt;&gt;</span> ./main.log</span>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.101.120 master-120
192.168.101.121 node-121
192.168.101.122 node-122
192.168.101.123 node-123
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>systemctl start network.service systemctl stop network.service systemctl restart network.service systemctl status network.service netplan apply</p><h2 id="_7\u3001\u7F16\u5199\u540E\u671F\u9700\u8981\u7684\u811A\u672C-vim-root-first-sh" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u7F16\u5199\u540E\u671F\u9700\u8981\u7684\u811A\u672C-vim-root-first-sh" aria-hidden="true">#</a> 7\u3001\u7F16\u5199\u540E\u671F\u9700\u8981\u7684\u811A\u672C\uFF1Avim /root/first.sh<a name="first.sh"></a></h2><p>\u5177\u4F53\u4F7F\u7528\u5730\u5740\uFF1A<a href="#%E4%BD%BF%E7%94%A8first.sh">\u4F7F\u7528first.sh</a></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">hostname</span><span class="token operator">=</span><span class="token variable">$2</span>

<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\\n">\\n</span>----------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token builtin class-name">echo</span> <span class="token string">&quot;\u8BF7\u6C42\u53C2\u6570\uFF1AIP\uFF1A<span class="token variable">\${ip}</span>\uFF0CHostName\uFF1A<span class="token variable">\${hostname}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> -ne <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;sh <span class="token variable">$0</span> ip hostname&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token keyword">fi</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;ccb173d2-9470-4fc3-b894-cce7029f0455&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>uuidgen ens33<span class="token variable">)</span></span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;new UUID=<span class="token entity" title="\\&quot;">\\&quot;</span><span class="token variable">\${UUID}</span><span class="token entity" title="\\&quot;">\\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log


<span class="token keyword">function</span> <span class="token function-name function">set_ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">sed</span> -ri <span class="token string">&quot;/IPADDR/s#(.*.)\\..*#<span class="token entity" title="\\1">\\1</span>.<span class="token variable">\${ip}</span><span class="token entity" title="\\&quot;">\\&quot;</span>#&quot;</span> /etc/sysconfig/network-scripts/ifcfg-ens33
  <span class="token function">sed</span> -ri <span class="token string">&quot;s/UUID=.*/UUID=<span class="token entity" title="\\&quot;">\\&quot;</span><span class="token variable">\${UUID}</span><span class="token entity" title="\\&quot;">\\&quot;</span>/&quot;</span> /etc/sysconfig/network-scripts/ifcfg-ens33
<span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> <span class="token function">tee</span> /etc/hosts <span class="token operator">&gt;&gt;</span> main.log</span>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.101.120 master-120
192.168.101.121 node-121
192.168.101.122 node-122
192.168.101.123 node-123
EOF</span>
<span class="token comment">#  sed -ri &#39;$a&#39;&quot;192.168.101.120 master-120\\n192.168.101.121 node-121\\n192.168.101.122 node-122\\n192.168.101.123 node-123&quot; /etc/hosts</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;cat /etc/hosts<span class="token entity" title="\\n">\\n</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sed</span> -n <span class="token string">&#39;3,100p&#39;</span> /etc/hosts<span class="token variable">)</span></span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;wait for systemctl restart network.service ...&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  systemctl restart network.service
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;new IPADDR is : <span class="token entity" title="\\&quot;">\\&quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span> -I<span class="token variable">)</span></span><span class="token entity" title="\\&quot;">\\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">set_hostname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">sed</span> -i <span class="token string">&quot;s#.*#<span class="token variable">\${hostname}</span>#&quot;</span> /etc/hostname
  hostnamectl set-hostname <span class="token variable">\${hostname}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;new hostname is : <span class="token entity" title="\\&quot;">\\&quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /etc/hostname<span class="token variable">)</span></span><span class="token entity" title="\\&quot;">\\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>

<span class="token function-name function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  set_hostname
  <span class="token function">sleep</span> <span class="token number">3</span>
  set_ip
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; set_ip &amp; set_hostnameok OK!!  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>

main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>chmod +x /root/first.sh</p><h2 id="_8\u3001\u7981\u7528-grub-\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_8\u3001\u7981\u7528-grub-\u89C4\u5219" aria-hidden="true">#</a> 8\u3001\u7981\u7528 grub \u89C4\u5219</h2><p>#\u5728 grub \u6587\u4EF6\u91CC\u9762\u7684 GRUB_CMDLINE_LINUX \u53D8\u91CF\u6DFB\u52A0 net.ifnames=0 biosdevname=0</p><p><strong>\u539F\u6765\u914D\u7F6E\u7684\u7F51\u5361ip\u4F1A\u751F\u6548\uFF1A/etc/sysconfig/network-scripts/ifcfg-ens33</strong>\uFF0C\u6240\u4EE5\u6211\u4E0D\u9700\u8981\u8FD9\u91CC</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/default/grub</span>
<span class="token punctuation">..</span>.
<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">&quot;rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet net.ifnames=0 biosdevname=0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u65B0\u751F\u6210GRUB\u914D\u7F6E\u5E76\u66F4\u65B0\u5185\u6838\u53C2\u6570</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grub2-mkconfig -o /boot/grub2/grub.cfg</span>
Generating grub configuration <span class="token function">file</span> <span class="token punctuation">..</span>.
Found linux image: /boot/vmlinuz-3.10.0-327.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-327.el7.x86_64.img
\u3002\u3002\u3002\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9\u3001\u5B89\u88C5\u5BF9window\u683C\u5F0F\u7684-sh-\u811A\u672C\u8F6C\u7801-dos2unix" tabindex="-1"><a class="header-anchor" href="#_9\u3001\u5B89\u88C5\u5BF9window\u683C\u5F0F\u7684-sh-\u811A\u672C\u8F6C\u7801-dos2unix" aria-hidden="true">#</a> 9\u3001\u5B89\u88C5\u5BF9window\u683C\u5F0F\u7684 sh \u811A\u672C\u8F6C\u7801 dos2unix</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># yum install -y dos2unix</span>
\u5DF2\u52A0\u8F7D\u63D2\u4EF6\uFF1Afastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * elrepo: hkg.mirror.rackspace.com
 
<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
anaconda-ks.cfg  first.sh  get_UUID.sh

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># dos2unix first.sh</span>
dos2unix: converting <span class="token function">file</span> first.sh to Unix <span class="token function">format</span> <span class="token punctuation">..</span>.

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># sh first.sh 120 master-120</span>
new <span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;eddedb45-b871-4eea-8433-4c08103423e1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8C\u3001vagrant" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001vagrant" aria-hidden="true">#</a> \u4E8C\u3001Vagrant</h2><h3 id="_1\u3001centos7-9-\u57FA\u672C\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_1\u3001centos7-9-\u57FA\u672C\u914D\u7F6E" aria-hidden="true">#</a> 1\u3001centos7.9 \u57FA\u672C\u914D\u7F6E</h3><h3 id="_2\u3001vagrantfile-\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2\u3001vagrantfile-\u6587\u4EF6" aria-hidden="true">#</a> 2\u3001Vagrantfile \u6587\u4EF6</h3><h4 id="vagrant-virtualbox" tabindex="-1"><a class="header-anchor" href="#vagrant-virtualbox" aria-hidden="true">#</a> Vagrant + VirtualBox</h4><p>\u5B89\u88C5 VirtualBox \uFF1Ahttps://download.virtualbox.org/virtualbox/6.1.34/VirtualBox-6.1.34-150636-Win.exe</p><p>\u4E0B\u8F7D vagrantfile\uFF1Ahttps://releases.hashicorp.com/vagrant/2.2.19/</p><p>\u67E5\u627E\u4E0B\u8F7Dcentos7\uFF1Ahttps://app.vagrantup.com/boxes/search?utf8=%E2%9C%93&amp;sort=downloads&amp;provider=&amp;q=centos</p><p><strong>Vagrant \u73AF\u5883\u53D8\u91CF\u914D\u7F6E</strong></p><p>\u65B0\u5EFA\u7528\u6237\u53D8\u91CF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>VAGRANT_HOME D:\\rj-win\\Vagrant\\.vagrant.d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>vagrant box add centos7 D:\\iso\\Centos7.box</p><p>centos7 \u662F\u4E3A box \u53D6\u7684\u540D\u5B57\uFF0C\u4F9B\u540E\u7EED\u521B\u5EFA\u865A\u62DF\u673A\u3002</p><p>\u67E5\u770B\u662F\u5426\u6DFB\u52A0\u6210\u529F</p><p>vagrant box list</p><blockquote><p>D:\\iso&gt;vagrant box list centos7 (virtualbox, 0)</p></blockquote></blockquote><p>\u65B0\u5EFA\u76EE\u5F55\uFF1AF:\\vb\\centos7\uFF0C\u7136\u540E\u8FDB\u5165cmd</p><blockquote><p>\u521B\u5EFA\u865A\u62DF\u673A</p><blockquote><p>cd F:\\vm\\masterVagrantfile\u3001cd F:\\vm\\nodeVagrantfile</p><p>vagrant init centos7</p><p>\u4F1A\u5728\u5F53\u524D\u76EE\u5F55 <code>F:\\vb\\xxx</code> \u751F\u6210 Vagrantfile \u6587\u4EF6</p></blockquote></blockquote><h4 id="vagrantfile-\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#vagrantfile-\u811A\u672C" aria-hidden="true">#</a> Vagrantfile \u811A\u672C<a name="Vagrantfile \u811A\u672C"></a></h4><p>https://www.vagrantup.com/docs/disks</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation</span>
<span class="token comment">## vagrant up --provider virtualbox</span>
<span class="token comment">## vagrant up --provider vmware_desktop</span>
<span class="token comment">## vagrant up --provider vmware_workstation</span>
Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;master&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7w&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            master.vm.hostname<span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># \u8BBE\u7F6E\u865A\u62DF\u673A\u7684IP(public_network\uFF1A\u6865\u63A5 private_network\uFF1A\u4EC5\u4E3B\u673A)\u3001bridge \u6865\u63A5\u9002\u914D\u5668</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.120&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation\uFF0Cvmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                <span class="token comment"># \u8BBE\u7F6E\u865A\u62DF\u673A\u7684\u540D\u79F0</span>
                v.gui<span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;master&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;log&quot;</span>, type: <span class="token string">&quot;shell&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>s<span class="token operator">|</span>
                s.inline <span class="token operator">=</span> <span class="token string">&quot;echo =================  #{i} =========================&quot;</span>
            end
            <span class="token comment">#master.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL</span>
            <span class="token comment">#    yum install -y net-tools</span>
            <span class="token comment">#SHELL</span>
        end
    end
end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;node#{i}&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7w&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            master.vm.hostname<span class="token operator">=</span><span class="token string">&quot;node#{i}&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># \u8BBE\u7F6E\u865A\u62DF\u673A\u7684IP(public_network\uFF1A\u6865\u63A5 private_network\uFF1A\u4EC5\u4E3B\u673A)\u3001bridge \u6865\u63A5\u9002\u914D\u5668</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.#{120+i}&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation\uFF0Cvmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                v.gui<span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;node#{i}&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;shell&quot;</span>, inline: <span class="token operator">&lt;&lt;-</span><span class="token environment constant">SHELL</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;=================  #{i} =========================&quot;</span>
            <span class="token environment constant">SHELL</span>
        end
    end
end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B8C\u6210\u914D\u7F6E\u540E\uFF0C\u4E0B\u9762\u5B89\u88C5\u865A\u62DF\u673A</p><blockquote><p>cd F:\\vm\\masterVagrantfile\u3001cd F:\\vm\\nodeVagrantfile</p><blockquote><p>vagrant up</p></blockquote></blockquote><blockquote><p>\u9ED8\u8BA4\u7528\u6237\uFF1Avagrant \u5BC6\u7801\uFF1Avagrant</p><p>root\u7528\u6237\uFF1Aroot\uFF1A\u5BC6\u7801\uFF1Avagrant</p></blockquote><h4 id="vagrant-vmware-desktop" tabindex="-1"><a class="header-anchor" href="#vagrant-vmware-desktop" aria-hidden="true">#</a> Vagrant + VMware-desktop</h4>`,66),Ra=n("strong",null,"1.\u4E0B\u8F7D",-1),La=s(),Ga={href:"https://releases.hashicorp.com/vagrant/2.2.19/vagrant_2.2.19_x86_64.msi",target:"_blank",rel:"noopener noreferrer"},Ua=s("vagrant"),Ia=s("\u3001 "),Fa={href:"https://www.vagrantup.com/vmware/downloads",target:"_blank",rel:"noopener noreferrer"},Ba=s("vmware-utility"),za=t(`<p><strong>2.\u4E0B\u8F7D vmware-desktop\u63D2\u4EF6</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vagrant plugin list
vagrant plugin install vagrant-vmware-desktop
vagrant plugin install vagrant-disksize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),Ha=n("strong",null,"3.\u4E0B\u8F7D",-1),Ka=s(),Wa={href:"https://app.vagrantup.com/centos/boxes/7",target:"_blank",rel:"noopener noreferrer"},Xa=s("centos-box"),ja=t(`<p>vmware_desktop\uFF1A</p><blockquote><p>https://app.vagrantup.com/generic/boxes/centos7 (675 MB)</p><p>https://app.vagrantup.com/dds/boxes/vagrant-base-centos7 (:995MB)</p></blockquote><p>vmware_workstation\uFF1A</p><blockquote><p>https://app.vagrantup.com/dds/boxes/vagrant-base-centos7 (:995MB)</p></blockquote><p><strong>4.\u672C\u5730\u5B89\u88C5box</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vagrant box <span class="token function">add</span> centos70 D:<span class="token punctuation">\\</span>iso<span class="token punctuation">\\</span>centos7.generic.desktop.box
vagrant box <span class="token function">add</span> centos7w D:<span class="token punctuation">\\</span>iso<span class="token punctuation">\\</span>centos7.dds.workstation.box
vagrant box list
vagrant box remove centos7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> %~dp0centos70
COPY /y /v /d D:<span class="token punctuation">\\</span>rj-win<span class="token punctuation">\\</span>Vagrant<span class="token punctuation">\\</span>.vagrant.d<span class="token punctuation">\\</span>boxes<span class="token punctuation">\\</span>centos70<span class="token punctuation">\\</span><span class="token number">0</span><span class="token punctuation">\\</span>vmware_desktop<span class="token punctuation">\\</span> %~dp0centos70
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5.\u751F\u6210Vagrantfile\u6587\u4EF6</strong>\uFF0C[Vagrantfile \u811A\u672C](#Vagrantfile \u811A\u672C)</p><blockquote><p>cd F:\\vm\\k8s</p><p>vagrant init centos7d</p></blockquote><p><strong>6.\u5B89\u88C5</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vagrant up --provider virtualbox
vagrant up --provider vmware_desktop
vagrant up --provider vmware_workstation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>7.\u811A\u672C</strong></p><p><strong>sh\u811A\u672C\u5747\u5DF2 Git Bash \u6267\u884C\uFF0Cbat\u4EE5 cmd \u6267\u884C</strong></p><p>1\u3001clear.sh</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; ------------- \u6E05\u9664\u521B\u5EFA\u8BB0\u5F55 -------------- &quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/nodeVagrantfile&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token variable">\${mf}</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${VagrantD}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/master
  <span class="token function">rm</span> -rf <span class="token variable">\${VagrantD}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------- delete old virtual machines [<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/.vagrant]----------&quot;</span>
<span class="token keyword">else</span>
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/master
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable">\${mf}</span>/.vagrant !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">cd</span> <span class="token variable">\${nf}</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${VagrantD}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/node1
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/node2
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/node3
  <span class="token function">rm</span> -rf <span class="token variable">\${VagrantD}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------- delete old virtual machines [<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/.vagrant]----------&quot;</span>
<span class="token keyword">else</span>
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/node1
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/node2
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/node3
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable">\${nf}</span>/.vagrant !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">types</span><span class="token operator">=</span><span class="token variable">$1</span> <span class="token operator">||</span> -1
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>types <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/centos70
  <span class="token function">rm</span> -rf <span class="token variable">\${k8s}</span>/centos7w
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -rf <span class="token variable">\${k8s}</span>/centos70 !!&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -rf <span class="token variable">\${k8s}</span>/centos7w !!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001init.sh</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box init   ------------------&quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">centos70</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/centos70&quot;</span>
<span class="token assign-left variable">centos7w</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/centos7w&quot;</span>
<span class="token assign-left variable">old_centos70</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/Vagrant/.vagrant.d/boxes/centos70/0/vmware_desktop/&quot;</span>
<span class="token assign-left variable">old_centos7w</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/Vagrant/.vagrant.d/boxes/centos7w/0/vmware_desktop/&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box list   ------------------&quot;</span>
vagrant box list
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box remove centos7[0|w]   ------------------&quot;</span>
vagrant box remove centos70
vagrant box remove centos7w
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box add   ------------------&quot;</span>
vagrant box <span class="token function">add</span> centos70 /d/iso/centos7.generic.desktop.box
vagrant box <span class="token function">add</span> centos7w /d/iso/centos7.dds.workstation.box
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token variable">\${centos70}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;------   vagrant box copy to <span class="token variable">\${centos70}</span>...  -------&quot;</span>
    <span class="token function">cp</span> -r <span class="token variable">\${old_centos70}</span><span class="token builtin class-name">.</span> <span class="token variable">\${centos70}</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token variable">\${centos7w}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;------   vagrant box copy to <span class="token variable">\${centos7w}</span>...  -------&quot;</span>
    <span class="token function">cp</span> -r <span class="token variable">\${old_centos7w}</span><span class="token builtin class-name">.</span> <span class="token variable">\${centos7w}</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E00\u6B21\u5F00\u59CB\u521B\u5EFA\u955C\u50CF\u7684\u76EE\u5F55\u6587\u4EF6\u6709</p><div class="language-ABAP ext-ABAP line-numbers-mode"><pre class="language-ABAP"><code>39\u4E2A
Vagrantfile		disk1.vmdk		metadata.json		
vagrant-base-centos7.vmxf		vagrant-base-centos7.nvram		vagrant-base-centos7.vmsd
vagrant-base-centos7.vmx		disk1-s001.vmdk---&gt;disk1-s032.vmdk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-ABAP ext-ABAP line-numbers-mode"><pre class="language-ABAP"><code>8\u4E2A
generic-centos7-vmware.nvram		generic-centos7-vmware.vmdk\uFF08\u540E\u671F\uFF1Avmware\u3010000001-000004\u3011.vmdk\uFF09
generic-centos7-vmware.vmsd			generic-centos7-vmware.vmx
generic-centos7-vmware.vmxf
info.json		metadata.json		Vagrantfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3\u3001install.sh</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; ------------- \u521B\u5EFA VMware -------------- &quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/nodeVagrantfile&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token variable">\${mf}</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${Vagrantfile}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;==================== <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span> -------------&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">rm</span> -rf <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------------&gt;  rm &quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span><span class="token string">&quot; ok!!&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up master  -----------------------&quot;</span>
            vagrant up --provider vmware_workstation
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up master -----------------------&quot;</span>
        vagrant up --provider vmware_workstation
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;====&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] master install ok!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/Vagrantfile !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token builtin class-name">cd</span> <span class="token variable">\${nf}</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${Vagrantfile}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;==================== <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span> -------------&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">rm</span> -rf <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------------&gt;  rm <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span> ok!!&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up node -----------------------&quot;</span>
            vagrant up --provider vmware_workstation
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up node -----------------------&quot;</span>
        vagrant up --provider vmware_workstation
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;====&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] node install ok!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/Vagrantfile !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B89\u88C5\u5B8C\u6210\u540E\u6267\u884C<code>kill.bat</code>\u7ED3\u675FVMware\u865A\u62DF\u673A\u7684\u3010vmware-vmx.exe\u3011</p><p><img src="`+c+`" alt="image-20220508160013429"></p><p>4\u3001kill.bat</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>@echo off
<span class="token assign-left variable">echo</span><span class="token operator">=</span>
<span class="token keyword">for</span> /f <span class="token string">&quot;tokens=2 delims= &quot;</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">&#39;tasklist  /fi &quot;imagename eq vmware-vmx.exe&quot; /nh&#39;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> taskkill /f /pid %%i
cmd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5\u3001cp.sh \u865A\u62DF\u673A\u5230\u65B0\u76EE\u5F55</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> -r /f/vm/k8s/masterVagrantfile/.vagrant/machines/master/vmware_workstation/. /f/vm/k8s/master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/nodeVagrantfile&quot;</span>
<span class="token assign-left variable">master</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/master&quot;</span>
<span class="token assign-left variable">node1</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/node1&quot;</span>
<span class="token assign-left variable">node2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/node2&quot;</span>
<span class="token assign-left variable">node3</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${k8s}</span>/node3&quot;</span>
<span class="token assign-left variable">old_master</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${mf}</span>/.vagrant/machines/master/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node1</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${nf}</span>/.vagrant/machines/node1/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${nf}</span>/.vagrant/machines/node2/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node3</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${nf}</span>/.vagrant/machines/node3/vmware_workstation/&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">\${mf}</span>&quot;</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${master}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> -rf <span class="token variable">\${master}</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">\${master}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">\${master}</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">\${old_master}</span>. --&gt; <span class="token variable">\${master}</span>]&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${old_master}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">cp</span> -r <span class="token variable">\${old_master}</span><span class="token builtin class-name">.</span> <span class="token variable">\${master}</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">\${nf}</span>&quot;</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">\${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${node1}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> -rf <span class="token variable">\${node1}</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">\${node1}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${node2}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">rm</span> -rf <span class="token variable">\${node2}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">\${node2}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${node3}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">rm</span> -rf <span class="token variable">\${node3}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">\${node3}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">\${node1}</span>&quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">\${node2}</span>&quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">\${node3}</span>&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${old_node1}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> -r <span class="token variable">\${old_node1}</span><span class="token builtin class-name">.</span> <span class="token variable">\${node1}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">\${old_node1}</span>. --&gt; <span class="token variable">\${node1}</span>]&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${old_node2}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> -r <span class="token variable">\${old_node2}</span><span class="token builtin class-name">.</span> <span class="token variable">\${node2}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">\${old_node2}</span>. --&gt; <span class="token variable">\${node2}</span>]&quot;</span>
    <span class="token keyword">fi</span>

  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token variable">\${old_node3}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> -r <span class="token variable">\${old_node3}</span><span class="token builtin class-name">.</span> <span class="token variable">\${node3}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">\${old_node3}</span>. --&gt; <span class="token variable">\${node3}</span>]&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6\u3001\u4FEE\u6539\u865A\u62DF\u673A\u5F15\u7528\u955C\u50CF\u5730\u5740 boxes</p><p>/f/vm/k8s/\u4E0B\u7684\uFF1Amaster\u3001node[1-3]</p><p>\u628A\u3010master\u3001node[1-3]\u3011/c2c6ff32-7b85-4fb9-8cdf-48497b898d32\uFF1A36\u4F4D\u540D\u79F0+4</p><p>\u904D\u5386\u540E\u628A <code>c2c6ff32-7b85-4fb9-8cdf-48497b898d32/. ../master</code></p><p><strong>\u76F4\u63A5\u628AD:\\rj-win\\Vagrant.vagrant.d\\boxes\\centos7w\\0\\vmware_desktop\\\u590D\u5236\u5230F:\\vm\\k8s\\vmware_desktop\u4E0D\u5C31\u884C\u4E86\uFF0C\u7136\u540E\u4FEE\u6539\u6BCF\u4E2A\u8282\u70B9\u7684\uFF08\u4E0B\u9762\u63D0\u5230\u76843\u4E2A\u6587\u4EF6\uFF09\uFF01\uFF01\uFF01\uFF01</strong></p><p>7\u3001\u6B63\u5219\u590D\u5236</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ls /data/dns_data/ | grep .*20180928.* | xargs -i cp -r /data/dns_data/{} ./

/data/dns_data/  --&gt;  \u8868\u793A\u8981cp\u6587\u4EF6\u6240\u5728\u76EE\u5F55
| grep  .*20180928.*  ---&gt;\u8868\u793A\u8981\u8FC7\u6EE4\u7684\u76EE\u5F55
| args -i cp -r /data/dns_data/{}  ---&gt; \u628A\u8981\u62F7\u8D1D\u6587\u4EF6\u4F20\u5165CP\u547D\u4EE4\u5F53\u4E2D
./  ---&gt; \u5F53\u524D\u76EE\u5F55
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>disk1-cl1.vmdk \u78C1\u76D8\u63CF\u8FF0\u7B26\u6587\u4EF6</p><p>\u4FEE\u6539\uFF1A<code>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/disk1-cl1.vmdk</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u7236\u6587\u4EF6\u540D\u63D0\u793A</span>
master:parentFileNameHint<span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\\r">\\r</span>j-win\\Vagrant\\.vagrant.d<span class="token entity" title="\\b">\\b</span>oxes<span class="token entity" title="\\c">\\c</span>entos7w<span class="token entity" title="\\0">\\0</span><span class="token entity" title="\\v">\\v</span>mware_desktop\\disk1.vmdk&quot;</span>
node1: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\\r">\\r</span>j-win\\Vagrant\\.vagrant.d<span class="token entity" title="\\b">\\b</span>oxes<span class="token entity" title="\\c">\\c</span>entos7w<span class="token entity" title="\\0">\\0</span><span class="token entity" title="\\v">\\v</span>mware_desktop\\disk1-000001.vmdk&quot;</span>
node2: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\\r">\\r</span>j-win\\Vagrant\\.vagrant.d<span class="token entity" title="\\b">\\b</span>oxes<span class="token entity" title="\\c">\\c</span>entos7w<span class="token entity" title="\\0">\\0</span><span class="token entity" title="\\v">\\v</span>mware_desktop\\disk1-000002.vmdk&quot;</span>
node3: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\\r">\\r</span>j-win\\Vagrant\\.vagrant.d<span class="token entity" title="\\b">\\b</span>oxes<span class="token entity" title="\\c">\\c</span>entos7w<span class="token entity" title="\\0">\\0</span><span class="token entity" title="\\v">\\v</span>mware_desktop\\disk1-000003.vmdk&quot;</span>
\u6539\u4E3A\uFF1A\uFF1A
master: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\\v">\\v</span>m\\k8s\\master\\xxx\\server\\disk1.vmdk&quot;</span>
node1: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\\v">\\v</span>m\\k8s<span class="token entity" title="\\n">\\n</span>ode1\\xxx\\server\\disk1-000001.vmdk&quot;</span>
node2: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\\v">\\v</span>m\\k8s<span class="token entity" title="\\n">\\n</span>ode2\\xxx\\server\\disk1-000002.vmdk&quot;</span>
node3: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\\v">\\v</span>m\\k8s<span class="token entity" title="\\n">\\n</span>ode3\\xxx\\server\\disk1-000003.vmdk&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u590D\u5236\uFF1A</p><p>\u628A <code>D:\\rj-win\\Vagrant\\.vagrant.d\\boxes\\centos7w\\0\\vmware_desktop\\disk1-s001.vmdk</code>--&gt;<code>disk1-s032.vmdk</code> \u590D\u5236\u5230<code>F:\\vm\\k8s\\master\\xxx\\serve\\</code></p><p>\u628A <code>D:\\rj-win\\Vagrant\\.vagrant.d\\boxes\\centos7w\\0\\vmware_desktop\\disk1-000001-s001.vmdk</code>--&gt;<code>disk1-000001-s032.vmdk</code> \u590D\u5236\u5230<code>F:\\vm\\k8s\\node1\\xxx\\serve\\</code></p><p>\u628A <code>D:\\rj-win\\Vagrant\\.vagrant.d\\boxes\\centos7w\\0\\vmware_desktop\\disk1-000002-s001.vmdk</code>--&gt;<code>disk1-000002-s032.vmdk</code> \u590D\u5236\u5230<code>F:\\vm\\k8s\\node2\\xxx\\serve\\</code></p><p>\u628A <code>D:\\rj-win\\Vagrant\\.vagrant.d\\boxes\\centos7w\\0\\vmware_desktop\\disk1-000003-s001.vmdk</code>--&gt;<code>disk1-000003-s032.vmdk</code> \u590D\u5236\u5230<code>F:\\vm\\k8s\\node3\\xxx\\serve\\</code></p><p>vagrant-base-centos7.vmsd</p><p>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/vagrant-base-centos7.vmsd</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cloneOf0 <span class="token operator">=</span> <span class="token string">&quot;D:<span class="token entity" title="\\r">\\r</span>j-win\\Vagrant\\.vagrant.d<span class="token entity" title="\\b">\\b</span>oxes<span class="token entity" title="\\c">\\c</span>entos7w<span class="token entity" title="\\0">\\0</span><span class="token entity" title="\\v">\\v</span>mware_desktop<span class="token entity" title="\\v">\\v</span>agrant-base-centos7.vmx&quot;</span>
\u6539
cloneOf0 <span class="token operator">=</span> <span class="token string">&quot;F:<span class="token entity" title="\\v">\\v</span>m\\k8s<span class="token entity" title="\\c">\\c</span>entos7w<span class="token entity" title="\\v">\\v</span>agrant-base-centos7.vmx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vagrant-base-centos7.vmx</p><p>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/vagrant-base-centos7.vmx</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>filesearchpath <span class="token operator">=</span> <span class="token string">&quot;.;D:<span class="token entity" title="\\r">\\r</span>j-win\\Vagrant\\.vagrant.d<span class="token entity" title="\\b">\\b</span>oxes<span class="token entity" title="\\c">\\c</span>entos7w<span class="token entity" title="\\0">\\0</span><span class="token entity" title="\\v">\\v</span>mware_desktop&quot;</span>
\u6539
filesearchpath <span class="token operator">=</span> &quot;.<span class="token punctuation">;</span>F:<span class="token punctuation">\\</span>vm<span class="token punctuation">\\</span>k8s<span class="token punctuation">\\</span>centos7w<span class="token punctuation">\\</span>&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;master&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos70&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            master.vm.hostname<span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># \u8BBE\u7F6E\u865A\u62DF\u673A\u7684IP(public_network\uFF1A\u6865\u63A5 private_network\uFF1A\u4EC5\u4E3B\u673A)\u3001bridge \u6865\u63A5\u9002\u914D\u5668</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.120&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation\uFF0Cvmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                v.gui<span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;master&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;cpuid.coresPerSocket&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;2&quot;</span>
                <span class="token comment">#cpu\u603B\u5904\u7406\u5668\u5185\u6838\u6570\uFF1Anumvcpus = &quot;4&quot;\uFF0C</span>
                <span class="token comment"># numvcpus=\u5904\u7406\u5668\u6570\u91CF*cpuid.coresPerSocket</span>
                <span class="token comment"># \u5904\u7406\u5668\u6570\u91CF=numvcpus/cpuid.coresPerSocket\uFF084/2=2\uFF09</span>
                <span class="token comment">#cpu\u6BCF\u4E2A\u5904\u7406\u5668\u5185\u6838\u6570\uFF1Acpuid.coresPerSocket = &quot;2&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;shell&quot;</span>, inline: <span class="token operator">&lt;&lt;-</span><span class="token environment constant">SHELL</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;=================  #{i} =========================&quot;</span>
            <span class="token environment constant">SHELL</span>
        end
    end
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3\u3001" tabindex="-1"><a class="header-anchor" href="#_3\u3001" aria-hidden="true">#</a> 3\u3001</h3><p>\u5B89\u88C5kernel-devel,\u9700\u8981\u5B89\u88C5VBOX\u7684\u589E\u5F3A\u5305\uFF0C\u5C31\u5FC5\u987B\u5B89\u88C5\u8FD9\u4E2A</p><p>\u5B89\u88C5\u589E\u5F3A\u5305\uFF1A\u5C31\u662Fvm-tool\uFF08\u5728vm\u5B89\u88C5\u76EE\u5F55\u91CC\u7684 xx.iso\uFF09</p><h3 id="vagrant-box-\u6253\u5305" tabindex="-1"><a class="header-anchor" href="#vagrant-box-\u6253\u5305" aria-hidden="true">#</a> Vagrant Box \u6253\u5305</h3><h3 id="\u6743\u9650\u914D\u7F6E\u516C\u94A5" tabindex="-1"><a class="header-anchor" href="#\u6743\u9650\u914D\u7F6E\u516C\u94A5" aria-hidden="true">#</a> \u6743\u9650\u914D\u7F6E\u516C\u94A5</h3><p>\u4E3Avagrant\u6DFB\u52A0sudo\u6743\u9650</p><h3 id="\u914D\u7F6E\u7F51\u5361" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u7F51\u5361" aria-hidden="true">#</a> \u914D\u7F6E\u7F51\u5361</h3><p>\u6B64\u6B65\u9AA4\u65F6\u5019\u6211\u5F88\u90C1\u95F7\u7684\u4E00\u6B65\uFF0C\u5C31\u662F\u5F53\u4F60\u76F4\u63A5\u628A\u8FD9\u4E2A\u955C\u50CF\u6253\u5305\u540E\uFF0C\u4EE5\u540E\u5982\u679C\u5728\u540C\u4E00\u53F0\u673A\u5668\u4E0A\u9762\u4F7F\u7528\u540C\u4E00\u4E2Abox\u865A\u62DF\u591A\u53F0\u673A\u5668\uFF0C\u914D\u7F6E\u5C31\u4F1A\u51FA\u95EE\u9898\u3002\u56E0\u6B64\u8FD9\u6B65\u9AA4\u8FD8\u662F\u6BD4\u8F83\u5173\u952E\u7684\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u7B2C\u4E00\u6B65\uFF1A\u628A\u7F51\u5361\u4E2D\u7684MAC\u5730\u5740\u6CE8\u91CA</span>
<span class="token comment">#HWADDR=XX:XX------------</span>
<span class="token comment">#\u7B2C\u4E8C\u6B65\uFF1A\u5220\u9664</span>
<span class="token function">rm</span> -rf /etc/udev/rules.d/70-persistent-ipoib.rules
<span class="token comment">#\u5B89\u88C5\u65B0\u7684\u865A\u62DF\u673A\u540E\uFF0C\u5EFA\u8BAE\u6539\u4E00\u4E0BMAC\u5730\u5740\uFF0C\u5982\u679C\u8FD8\u9047\u5230\u5176\u4ED6\u95EE\u9898\uFF0C\u5EFA\u8BAE\u770B\u770B\u8FD9\u91CC</span>
<span class="token comment">#\u865A\u62DF\u673A\u514B\u9686CentOS7 \u51FA\u73B0\u7684\u7F51\u7EDC\u95EE\u9898\u89E3\u51B3\u529E\u6CD5http://www.bubuko.com/infodetail-1483490.html</span>
poweroff
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6253\u5305box" tabindex="-1"><a class="header-anchor" href="#\u6253\u5305box" aria-hidden="true">#</a> \u6253\u5305BOX</h3><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token preprocessor property">#\u8FDB\u5165vagrant\u7684\u76EE\u5F55</span>
<span class="token punctuation">[</span>E<span class="token punctuation">:</span>\\vagrant<span class="token punctuation">]</span>$ vagrant package <span class="token operator">--</span>output <span class="token punctuation">.</span><span class="token operator">/</span>tzfcentos73<span class="token punctuation">.</span>box <span class="token operator">--</span><span class="token keyword">base</span> CentOS73
<span class="token operator">==</span><span class="token operator">&gt;</span> CentOS73<span class="token punctuation">:</span> Exporting VM<span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token operator">&gt;</span> CentOS73<span class="token punctuation">:</span> Compressing <span class="token class-name">package</span> to<span class="token punctuation">:</span> E<span class="token punctuation">:</span><span class="token operator">/</span>vagrant<span class="token operator">/</span>tzfcentos73<span class="token punctuation">.</span>box
<span class="token preprocessor property">#\u89E3\u91CAoutput\u662F\u6307box\u7684\u540D\u5B57\uFF0C--base\u662F\u6307\u57FA\u4E8EVBOX\u91CC\u9762\u7684\u54EA\u4E2A\u865A\u62DF\u673A\u6253\u5305\uFF0C\u8FD9\u7684\u540D\u5B57\u4E00\u5B9A\u8981\u4E89\u53D6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8C\u3001vmrun" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001vmrun" aria-hidden="true">#</a> \u4E8C\u3001vmrun</h2><p>https://docs.vmware.com/cn/</p><h3 id="\u683C\u5F0F-vmrun-\u8EAB\u4EFD\u9A8C\u8BC1\u6807\u5FD7-\u547D\u4EE4-\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u683C\u5F0F-vmrun-\u8EAB\u4EFD\u9A8C\u8BC1\u6807\u5FD7-\u547D\u4EE4-\u53C2\u6570" aria-hidden="true">#</a> \u683C\u5F0F\uFF1Avmrun [\u8EAB\u4EFD\u9A8C\u8BC1\u6807\u5FD7] \u547D\u4EE4 [\u53C2\u6570]</h3><p>https://www.vmware.com/pdf/vix162_vmrun_command.pdf</p><p>https://docs.vmware.com/cn/search/#/vmrun</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u8EAB\u4EFD\u9A8C\u8BC1\u6807\u5FD7
--------------
\u8FD9\u4E9B\u5FC5\u987B\u51FA\u73B0\u5728\u547D\u4EE4\u548C\u4EFB\u4F55\u547D\u4EE4\u53C2\u6570\u4E4B\u524D\u3002
   -T <span class="token operator">&lt;</span>\u4E3B\u673A\u7C7B\u578B<span class="token operator">&gt;</span> <span class="token punctuation">(</span>ws<span class="token operator">|</span>fusion<span class="token operator">||</span>player<span class="token punctuation">)</span>
   -vp <span class="token operator">&lt;</span>\u52A0\u5BC6\u865A\u62DF\u673A\u7684\u5BC6\u7801<span class="token operator">&gt;</span>
   -gu <span class="token operator">&lt;</span>\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7684\u7528\u6237\u540D<span class="token operator">&gt;</span>
   -gp <span class="token operator">&lt;</span>guest OS \u4E2D\u7684\u5BC6\u7801<span class="token operator">&gt;</span>

\u7535\u6E90\u547D\u4EE4          			\u53C2\u6570          			\u63CF\u8FF0
--------------           ----------           -----------
start                    .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u542F\u52A8\u865A\u62DF\u673A\u6216\u56E2\u961F
                         <span class="token punctuation">[</span>gui<span class="token operator">|</span>nogui<span class="token punctuation">]</span>
stop                     .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u505C\u6B62\u865A\u62DF\u673A\u6216\u56E2\u961F
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
reset                    .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u91CD\u7F6E VM \u6216\u56E2\u961F
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
<span class="token function">suspend</span>                  .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u6682\u505C VM \u6216\u56E2\u961F
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
pause                    .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u6682\u505C\u865A\u62DF\u673A
unpause                  .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u53D6\u6D88\u6682\u505C\u865A\u62DF\u673A

\u5FEB\u7167\u547D\u4EE4		        	\u53C2\u6570         			  \u63CF\u8FF0
-----------------        ----------           -----------
listSnapshots            .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u5217\u51FA VM \u4E2D\u7684\u6240\u6709\u5FEB\u7167
                         <span class="token punctuation">[</span>showTree<span class="token punctuation">]</span>
snapshot                 .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u521B\u5EFA VM \u7684\u5FEB\u7167
                         Snapshot name
deleteSnapshot           .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u4ECE VM \u4E2D\u5220\u9664\u5FEB\u7167
                         Snapshot name
                         <span class="token punctuation">[</span>andDeleteChildren<span class="token punctuation">]</span>
revertToSnapshot         .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     		\u5C06 VM \u72B6\u6001\u8BBE\u7F6E\u4E3A\u5FEB\u7167
                         \u5FEB\u7167\u540D\u79F0

\u4E3B\u673A\u7F51\u7EDC\u547D\u4EE4   				 \u53C2\u6570        		  		 \u63CF\u8FF0
---------------------    ----------           -----------
listHostNetworks                              	\u5217\u51FA\u4E3B\u673A\u4E2D\u7684\u6240\u6709\u7F51\u7EDC
listPortForwardings      \u4E3B\u673A\u7F51\u7EDC\u540D\u79F0    			\u5217\u51FA\u4E3B\u673A\u7F51\u7EDC\u4E0A\u6240\u6709\u53EF\u7528\u7684\u7AEF\u53E3\u8F6C\u53D1
setPortForwarding        \u4E3B\u673A\u7F51\u7EDC\u540D\u79F0    			\u5728\u4E3B\u673A\u7F51\u7EDC\u4E0A\u6DFB\u52A0\u6216\u66F4\u65B0\u7AEF\u53E3\u8F6C\u53D1
                         Protocol
                         Host port
                         Guest <span class="token function">ip</span>
                         Guest port
                         <span class="token punctuation">[</span>Description<span class="token punctuation">]</span>
deletePortForwarding     Host network name   	\u5220\u9664\u4E3B\u673A\u7F51\u7EDC\u4E0A\u7684\u7AEF\u53E3\u8F6C\u53D1
                         Protocol
                         Host port

\u5609\u5BBE\u547D\u4EE4   				 \u53C2\u6570        		  		 \u63CF\u8FF0
-----------------        ----------           -----------
runProgramInGuest        .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u8FD0\u884C\u7A0B\u5E8F
                         <span class="token punctuation">[</span>-noWait<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-activeWindow<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-interactive<span class="token punctuation">]</span>
                         \u5B8C\u6574\u8DEF\u5F84\u5230\u7A0B\u5E8F
                         <span class="token punctuation">[</span>\u7A0B\u5E8F\u53C2\u6570<span class="token punctuation">]</span>
runScriptInGuest         .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u8FD0\u884C\u811A\u672C
                         <span class="token punctuation">[</span>-noWait<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-activeWindow<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-interactive<span class="token punctuation">]</span>
                         \u89E3\u91CA\u5668\u8DEF\u5F84
                         \u811A\u672C\u6587\u672C
fileExistsInGuest        .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u68C0\u67E5\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u6587\u4EF6
                         \u6765\u5BBE\u4E2D\u7684\u6587\u4EF6\u8DEF\u5F84
directoryExistsInGuest   .vmx \u6587\u4EF6\u7684\u8DEF\u5F84    		\u68C0\u67E5\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u76EE\u5F55
                         \u6765\u5BBE\u76EE\u5F55\u7684\u8DEF\u5F84
setSharedFolderState     .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u4FEE\u6539\u4E3B\u5BA2\u5171\u4EAB\u6587\u4EF6\u5939
                         \u5171\u4EAB\u540D\u79F0
                         Host path
                         writable <span class="token operator">|</span> <span class="token builtin class-name">readonly</span>
addSharedFolder          .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u6DFB\u52A0\u4E3B\u5BA2\u5171\u4EAB\u6587\u4EF6\u5939
                         \u5171\u4EAB\u540D\u79F0
                         \u65B0\u4E3B\u673A\u8DEF\u5F84
removeSharedFolder       .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5220\u9664\u4E3B\u5BA2\u5171\u4EAB\u6587\u4EF6\u5939
                         \u5171\u4EAB\u540D\u79F0
enableSharedFolders      .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u7CFB\u7EDF\u4E2D\u542F\u7528\u5171\u4EAB\u6587\u4EF6\u5939
                         <span class="token punctuation">[</span>runtime<span class="token punctuation">]</span>
disableSharedFolders     .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u7981\u7528\u6765\u5BBE\u7CFB\u7EDF\u4E2D\u7684\u5171\u4EAB\u6587\u4EF6\u5939
                         <span class="token punctuation">[</span>runtime<span class="token punctuation">]</span>
listProcessesInGuest     .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5217\u51FA\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u6B63\u5728\u8FD0\u884C\u7684\u8FDB\u7A0B
killProcessInGuest       .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7EC8\u6B62\u8FDB\u7A0B
                         \u8FDB\u7A0B\u53F7
deleteFileInGuest        .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5220\u9664\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7684\u6587\u4EF6
                         Path <span class="token keyword">in</span> guest
createDirectoryInGuest   .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u521B\u5EFA\u76EE\u5F55
                         Directory path <span class="token keyword">in</span> guest
deleteDirectoryInGuest   .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5220\u9664\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7684\u76EE\u5F55
                         Directory path <span class="token keyword">in</span> guest
CreateTempfileInGuest    .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u521B\u5EFA\u4E34\u65F6\u6587\u4EF6
listDirectoryInGuest     .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u5217\u51FA\u4E00\u4E2A\u76EE\u5F55
                         Directory path <span class="token keyword">in</span> guest
CopyFileFromHostToGuest  .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5C06\u6587\u4EF6\u4ECE\u4E3B\u673A\u64CD\u4F5C\u7CFB\u7EDF\u590D\u5236\u5230\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF
                         Path on <span class="token function">host</span>
                         Path <span class="token keyword">in</span> guest
CopyFileFromGuestToHost  .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5C06\u6587\u4EF6\u4ECE\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u590D\u5236\u5230\u4E3B\u673A\u64CD\u4F5C\u7CFB\u7EDF
                         Path <span class="token keyword">in</span> guest
                         Path on <span class="token function">host</span>
renameFileInGuest        .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u91CD\u547D\u540D\u6587\u4EF6
                         Original name
                         New name
typeKeystrokesInGuest    .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u952E\u5165\u51FB\u952E
                         keystroke string
connectNamedDevice       .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u8FDE\u63A5\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7684\u547D\u540D\u8BBE\u5907
                         device name
disconnectNamedDevice    .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u65AD\u5F00\u6765\u5BBE\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7684\u547D\u540D\u8BBE\u5907
                         device name
captureScreen            .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5C06\u865A\u62DF\u673A\u7684\u5C4F\u5E55\u6355\u83B7\u5230\u672C\u5730\u6587\u4EF6
                         Path on <span class="token function">host</span>
writeVariable            .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5728VM\u72B6\u6001\u4E0B\u5199\u5165\u4E00\u4E2A\u53D8\u91CF
                         <span class="token punctuation">[</span>runtimeConfig<span class="token operator">|</span>guestEnv<span class="token operator">|</span>guestVar<span class="token punctuation">]</span>
                         variable name
                         variable value
readVariable             .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u8BFB\u53D6\u5904\u4E8EVM\u72B6\u6001\u7684\u53D8\u91CF
                         <span class="token punctuation">[</span>runtimeConfig<span class="token operator">|</span>guestEnv<span class="token operator">|</span>guestVar<span class="token punctuation">]</span>
                         variable name
getGuestIPAddress        .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u83B7\u53D6\u6765\u5BBE\u7684IP\u5730\u5740
                         <span class="token punctuation">[</span>-wait<span class="token punctuation">]</span>

\u5E38\u89C4\u547D\u4EE4\u9009\u9879	   				 \u53C2\u6570        		  		 \u63CF\u8FF0
----------------         ----------           -----------
list                                          	\u5217\u51FA\u6240\u6709\u8FD0\u884C\u7684\u865A\u62DF\u673A\u3002 
upgradevm                .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5C06\u865A\u62DF\u673A\u5347\u7EA7\u5230\u5F53\u524D\u865A\u62DF\u786C\u4EF6\u7248\u672C
installTools             .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5B89\u88C5 VMware Tools <span class="token keyword">in</span> Guest
checkToolsState          .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u68C0\u67E5\u5BA2\u6237\u673A\u4E2D\u7684 VMware Tools \u7684\u72B6\u6001\u3002
												\u53EF\u80FD\u7684\u72B6\u6001\u4E3A unknown\u3001installed\u548Crunning
deleteVM                 .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u5220\u9664\u865A\u62DF\u673A
clone                    .vmx \u6587\u4EF6\u7684\u8DEF\u5F84     	\u521B\u5EFA VM \u7684\u526F\u672C
                         \u76EE\u6807 .vmx \u6587\u4EF6\u7684\u8DEF\u5F84
                         full\uFF08\u5B8C\u5168\u514B\u9686\uFF09<span class="token operator">|</span>linked\uFF08\u94FE\u63A5\u514B\u9686\uFF09
                         <span class="token punctuation">[</span>-snapshot<span class="token operator">=</span>\u514B\u9686\u7684\u5FEB\u7167\u540D\u79F0 <span class="token keyword">if</span> linked\u65F6<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-cloneName<span class="token operator">=</span>\u540D\u79F0<span class="token punctuation">]</span>

VM\u6A21\u677F\u547D\u4EE4   				 \u53C2\u6570        		  		 \u63CF\u8FF0
---------------------    ----------           -----------
downloadPhotonVM         \u65B0\u865A\u62DF\u673A\u7684\u8DEF\u5F84     	 \u4E0B\u8F7D\u5149\u5B50\u865A\u62DF\u673A
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B" aria-hidden="true">#</a> \u793A\u4F8B</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u542F\u52A8\u865A\u62DF\u673A</span>
vmrun -T ws start <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span>
vmrun -T ws stop <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span>

<span class="token comment"># \u514B\u9686\u865A\u62DF\u673A</span>
/d/rj-win/vm16/vmrun.exe -T ws clone <span class="token string">&quot;/f/vm/k8s/centos7_vmware_workstation/centos7_vmware_workstation.vmx&quot;</span> <span class="token string">&quot;/f/vm/k8s/centos7/master-cluster/master-120/master-120.vmx&quot;</span>  full -cloneName<span class="token operator">=</span>master-120

<span class="token comment"># \u5728 Windows \u4E3B\u673A\u4E0A\u4F7F\u7528 Workstation \u5728\u865A\u62DF\u673A\u4E2D\u8FD0\u884C\u7A0B\u5E8F</span>
vmrun -T ws -gu guestUser -gp guestPassword runProgramInGuest <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span> <span class="token string">&quot;c:\\Program Files\\myProgram.exe&quot;</span>

<span class="token comment"># \u5728Windows\u4E0A\u767B\u5F55\u865A\u62DF\u673A\uFF0C\u5E76\u6267\u884C\u865A\u62DF\u673A\u811A\u672C</span>
D:<span class="token punctuation">\\</span>rj-win<span class="token punctuation">\\</span>vm16<span class="token punctuation">\\</span>vmrun.exe -T ws -gu root -gp 123456a runProgramInGuest <span class="token string">&quot;F:<span class="token entity" title="\\v">\\v</span>m\\k8s<span class="token entity" title="\\n">\\n</span>ode-cluster<span class="token entity" title="\\n">\\n</span>ode-121<span class="token entity" title="\\n">\\n</span>ode-121.vmx&quot;</span> /bin/bash /root/first.sh <span class="token number">121</span> node-121


<span class="token comment"># \u521B\u5EFA\u865A\u62DF\u673A\u7684\u5FEB\u7167</span>
vmrun -T ws snapshot <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># \u83B7\u53D6\u5FEB\u7167\u5217\u8868</span>
vmrun -T ws listSnapshots <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span>

<span class="token comment"># \u8FD8\u539F\u5FEB\u7167</span>
vmrun -T ws revertToSnapshot <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># \u5220\u9664\u5FEB\u7167</span>
vmrun -T ws deleteSnapshot <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># \u542F\u7528\u5DE5\u4F5C\u7AD9\u5171\u4EAB\u6587\u4EF6\u5939</span>
vmrun -T ws enableSharedFolders <span class="token string">&quot;c:\\myVMs\\myVM.vmx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6B65\u9AA4-1" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4-1" aria-hidden="true">#</a> \u6B65\u9AA4</h3><ol><li>cd D:\\rj-win\\vm16\\vmrun.exe \u7A0B\u5E8F</li><li>git \u8F6F\u4EF6</li><li>\u7F16\u5199\u811A\u672C auto.sh</li><li>sh auto_VM.sh create</li><li>sh auto_VM.sh start | sh auto_VM.sh</li><li>\u8BBE\u7F6EIP\u7684\u811A\u672C set_ip.bat</li></ol><blockquote><p>\u6267\u884C\u6D41\u7A0B\uFF1Acreate\u300Bstart\u300Bset_ip\u300Bwindow\u4E0B\u8FD0\u884Cset_ip.bat\u811A\u672C</p></blockquote><h3 id="\u811A\u672C-auto-vm-sh" tabindex="-1"><a class="header-anchor" href="#\u811A\u672C-auto-vm-sh" aria-hidden="true">#</a> \u811A\u672C\uFF1Aauto_VM.sh</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">host_master</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span>
<span class="token assign-left variable">host_node</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">121</span> <span class="token number">122</span> <span class="token number">123</span><span class="token punctuation">)</span>
<span class="token assign-left variable">gu</span><span class="token operator">=</span><span class="token string">&quot;root&quot;</span>
<span class="token assign-left variable">gp</span><span class="token operator">=</span><span class="token string">&quot;123456a&quot;</span>

<span class="token comment">#\u6A21\u677F\u955C\u50CF\u4F4D\u7F6E</span>
<span class="token assign-left variable">VMX_FILE</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/CentOS7/CentOS7.vmx&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token variable">\${VMX_FILE}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \u6CA1\u6709\u6A21\u677F\u955C\u50CF &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># vmrun.exe \u4F4D\u7F6E</span>
<span class="token assign-left variable">VMRUN_EXE</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/vm16/vmrun.exe&quot;</span>
<span class="token assign-left variable">PATH_VMRUN_EXE_CMD</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\\\\">\\\\</span>rj-win<span class="token entity" title="\\\\">\\\\</span>vm16<span class="token entity" title="\\\\">\\\\</span>vmrun.exe&quot;</span>
<span class="token comment"># \u96C6\u7FA4\u673A\u5668\u4F4D\u7F6E</span>
<span class="token assign-left variable">K8S_CENTOS7</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">K8S_CENTOS7_CMD</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\\\\">\\\\</span>vm<span class="token entity" title="\\\\">\\\\</span>k8s&quot;</span>
<span class="token comment">#\u96C6\u7FA4\u540D\u79F0</span>
<span class="token assign-left variable">MASTER_CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;master-cluster&quot;</span>
<span class="token assign-left variable">NODE_CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;node-cluster&quot;</span>
<span class="token comment">#\u670D\u52A1\u5668\u540D\u79F0</span>
<span class="token assign-left variable">MASTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
<span class="token assign-left variable">NODE_NAME</span><span class="token operator">=</span><span class="token string">&quot;node&quot;</span>
<span class="token comment">#\u521B\u5EFA\u5FEB\u7167\u7684\u540D\u79F0</span>
<span class="token assign-left variable">SHOT_NAME</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;=====&gt;  sh \u53C2\u6570[<span class="token variable">$1</span>,<span class="token variable">$2</span>,<span class="token variable">$3</span>]&quot;</span>
<span class="token assign-left variable">v2</span><span class="token operator">=</span><span class="token number">120</span>

<span class="token function-name function">clone_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">#    for i in $(cat host-node.txt)</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u514B\u9686 master-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws clone <span class="token string">&quot;<span class="token variable">\${VMX_FILE}</span>&quot;</span> <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> full -cloneName<span class="token operator">=</span><span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">clone_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">#  for i in $(cat host-node.txt)</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u514B\u9686 node-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws clone <span class="token string">&quot;<span class="token variable">\${VMX_FILE}</span>&quot;</span> <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> full -cloneName<span class="token operator">=</span><span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u521B\u5EFA\u514B\u9686\u94FE\u63A5\u7684\u865A\u62DF\u673A</span>
<span class="token function-name function">VM_create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
clone_master
<span class="token function">sleep</span> <span class="token number">6</span>
clone_node
<span class="token function">sleep</span> <span class="token number">8</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u514B\u9686\u865A\u62DF\u673A\u5B8C\u6210     &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">start_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u542F\u52A8: <span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws start <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">start_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u542F\u52A8: <span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws start <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u542F\u52A8\u521B\u5EFA\u597D\u7684\u865A\u62DF\u673A</span>
<span class="token function-name function">VM_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
start_master
<span class="token function">sleep</span> <span class="token number">6</span>
start_node
<span class="token function">sleep</span> <span class="token number">3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u542F\u52A8\u865A\u62DF\u673A\u5B8C\u6210    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># \u4FEE\u6539IP\u5730\u5740</span>
<span class="token function-name function">set_ip_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token operator">&gt;</span>  <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">\${PATH_VMRUN_EXE_CMD}</span> -T ws -gu <span class="token variable">\${gu}</span> -gp <span class="token variable">\${gp}</span> runProgramInGuest <span class="token entity" title="\\&quot;">\\&quot;</span><span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span><span class="token variable">\${MASTER_CLUSTER_NAME}</span><span class="token entity" title="\\\\">\\\\</span><span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span><span class="token entity" title="\\\\">\\\\</span><span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx<span class="token entity" title="\\&quot;">\\&quot;</span> /bin/bash /root/first.sh <span class="token variable">\${i}</span> <span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>&quot;</span> <span class="token operator">&gt;&gt;</span>  <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
    <span class="token comment"># ping -n 5(\u53D1\u90015\u6B21\u8BF7\u6C42)|\u5728Linux\u7AEF\u4F7F\u7528 -c</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ping -n 3 192.168.101.<span class="token variable">\${i}</span> &gt;<span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span>ping<span class="token variable">\${i}</span>.log&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
  <span class="token keyword">done</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u4FEE\u6539IP\u811A\u672C\u751F\u6210\u8DEF\u5F84: <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span>set_ip_<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.bat&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;exit&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
  <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;\u8FD0\u884C\u547D\u4EE4:<span class="token entity" title="\\n">\\n</span>1.\u6253\u5F00cmd.exe<span class="token entity" title="\\n">\\n</span>2.\u8F93\u5165: <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span>set_ip<span class="token variable">\${i}</span>.bat&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">set_ip_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token operator">&gt;</span>  <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
    <span class="token comment">#\u767B\u5F55\u7CFB\u7EDF</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">\${PATH_VMRUN_EXE_CMD}</span> -T ws -gu <span class="token variable">\${gu}</span> -gp <span class="token variable">\${gp}</span> runProgramInGuest <span class="token entity" title="\\&quot;">\\&quot;</span><span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span><span class="token variable">\${NODE_CLUSTER_NAME}</span><span class="token entity" title="\\\\">\\\\</span><span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span><span class="token entity" title="\\\\">\\\\</span><span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx<span class="token entity" title="\\&quot;">\\&quot;</span> /bin/bash /root/first.sh <span class="token variable">\${i}</span> <span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>&quot;</span> <span class="token operator">&gt;&gt;</span>  <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
    <span class="token comment"># ping -n 5(\u53D1\u90015\u6B21\u8BF7\u6C42)|\u5728Linux\u7AEF\u4F7F\u7528 -c</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ping -n 3 192.168.101.<span class="token variable">\${i}</span> &gt;<span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span>ping<span class="token variable">\${i}</span>.log&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;exit&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>set_ip<span class="token variable">\${i}</span>.bat
  <span class="token keyword">done</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u4FEE\u6539IP\u811A\u672C\u751F\u6210\u8DEF\u5F84: <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span>set_ip_<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.bat&quot;</span>
  <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;\u8FD0\u884C\u547D\u4EE4:<span class="token entity" title="\\n">\\n</span>1.\u6253\u5F00cmd.exe<span class="token entity" title="\\n">\\n</span>2.\u8F93\u5165: <span class="token variable">\${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\\\">\\\\</span>set_ip_<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.bat&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment"># -T ws -gu -gp runProgramInGuest &quot;xxx.vmx&quot; &quot;vm.exe&quot;</span>
<span class="token comment">#\u767B\u5F55\u7CFB\u7EDF\u5C31\u884C\u8BBE\u7F6E\uFF1A</span>
<span class="token comment"># runProgramInGuest xx.vmx [\u7A0B\u5E8F\u53C2\u6570]</span>
<span class="token comment"># runScriptInGuest xx.vmx [\u89E3\u91CA\u5668\u8DEF\u5F84] [\u811A\u672C\u6587\u672C]</span>
<span class="token function-name function">VM_set_IP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  set_ip_master
  set_ip_node
<span class="token punctuation">}</span>

<span class="token function-name function">stop_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u5173\u95ED: <span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws stop <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">2</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">stop_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u5173\u95ED: <span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws stop <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">2</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment">#\u6279\u91CF\u5173\u673A</span>
<span class="token function-name function">VM_stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
stop_master
stop_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u6279\u91CF\u5173\u673A\u5B8C\u6210    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">snapshot_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u521B\u5EFA\u5FEB\u7167: <span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i ...}</span>&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws snapshot <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> <span class="token variable">\${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">snapshot_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u521B\u5EFA\u5FEB\u7167: <span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws snapshot <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> <span class="token variable">\${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u521B\u5EFA\u5FEB\u7167</span>
<span class="token function-name function">VM_snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
snapshot_master
<span class="token function">sleep</span> <span class="token number">6</span>
snapshot_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u521B\u5EFA\u5FEB\u7167\u5B8C\u6210    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">shot_list_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u83B7\u53D6\u5FEB\u7167\u5217\u8868: <span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws listSnapshots <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">shot_list_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u83B7\u53D6\u5FEB\u7167\u5217\u8868: <span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws listSnapshots <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u83B7\u53D6\u5FEB\u7167\u5217\u8868</span>
<span class="token function-name function">VM_shot_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_list_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_list_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   \u83B7\u53D6\u5FEB\u7167\u5217\u8868    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">shot_back_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u6062\u590D\u5FEB\u7167: <span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span> <span class="token variable">\${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws revertToSnapshot <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> <span class="token variable">\${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">shot_back_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u6062\u590D\u5FEB\u7167: <span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span> <span class="token variable">\${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws revertToSnapshot <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> <span class="token variable">\${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u6062\u590D\u5FEB\u7167</span>
<span class="token function-name function">VM_shot_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_back_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_back_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   \u6062\u590D\u5FEB\u7167\u5B8C\u6210\uFF1A<span class="token variable">\${SHOT_NAME}</span>    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># \u5220\u9664\u5FEB\u7167</span>
<span class="token function-name function">shot_del_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u5220\u9664\u5FEB\u7167: <span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span> <span class="token variable">\${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws deleteSnapshot <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${MASTER_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> <span class="token variable">\${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u5220\u9664\u5FEB\u7167</span>
<span class="token function-name function">shot_del_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">\${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F00\u59CB\u5220\u9664\u5FEB\u7167: <span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span> <span class="token variable">\${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">\${VMRUN_EXE}</span> -T ws deleteSnapshot <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>/<span class="token variable">\${NODE_NAME}</span>-<span class="token variable">\${i}</span>.vmx&quot;</span> <span class="token variable">\${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u5220\u9664\u5FEB\u7167</span>
<span class="token function-name function">VM_shot_del</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_del_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_del_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u6279\u91CF\u5220\u9664\u5FEB\u7167\u5B8C\u6210:<span class="token variable">\${SHOT_NAME}</span>    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">clone_del_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">rm</span> -rf <span class="token string">&quot;<span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u6279\u91CF\u5220\u9664\u514B\u9686\u5B8C\u6210   <span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${MASTER_CLUSTER_NAME}</span>/ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">clone_del_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">rm</span> -rf <span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u6279\u91CF\u5220\u9664\u514B\u9686\u5B8C\u6210  <span class="token variable">\${K8S_CENTOS7}</span>/<span class="token variable">\${NODE_CLUSTER_NAME}</span>/  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">VM_clone_del</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
clone_del_master
clone_del_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    \u6279\u91CF\u5220\u9664\u514B\u9686\u5B8C\u6210    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># \u83B7\u53D6\u5F53\u524D\u6B63\u5728\u8FD0\u884C\u7684\u865A\u62DF\u673A</span>
<span class="token function-name function">VM_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u5F53\u524D\u6B63\u5728\u8FD0\u884C\u7684\u865A\u62DF\u673A:&quot;</span>
  <span class="token variable">\${VMRUN_EXE}</span> -T ws list
<span class="token punctuation">}</span>

<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
    c<span class="token punctuation">)</span>
        VM_create
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    c1<span class="token punctuation">)</span>
        clone_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    c2<span class="token punctuation">)</span>
        clone_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start<span class="token punctuation">)</span>
        VM_start
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start1<span class="token punctuation">)</span>
        start_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start2<span class="token punctuation">)</span>
        start_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop<span class="token punctuation">)</span>
        VM_stop
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop1<span class="token punctuation">)</span>
        stop_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop2<span class="token punctuation">)</span>
        stop_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot<span class="token punctuation">)</span>
        VM_snapshot
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot1<span class="token punctuation">)</span>
        snapshot_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot2<span class="token punctuation">)</span>
        snapshot_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip<span class="token punctuation">)</span>
        VM_set_IP
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip1<span class="token punctuation">)</span>
        set_ip_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip2<span class="token punctuation">)</span>
        set_ip_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back<span class="token punctuation">)</span>
        VM_shot_back
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back1<span class="token punctuation">)</span>
        shot_back_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back2<span class="token punctuation">)</span>
        shot_back_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del<span class="token punctuation">)</span>
        VM_shot_del
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del1<span class="token punctuation">)</span>
        shot_del_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del2<span class="token punctuation">)</span>
        shot_del_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del<span class="token punctuation">)</span>
        VM_clone_del
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del1<span class="token punctuation">)</span>
        clone_del_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del2<span class="token punctuation">)</span>
        clone_del_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list<span class="token punctuation">)</span>
        VM_shot_list
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list1<span class="token punctuation">)</span>
        shot_list_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list2<span class="token punctuation">)</span>
        shot_list_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    list<span class="token punctuation">)</span>
        VM_list
        <span class="token punctuation">;</span><span class="token punctuation">;</span>

    *<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;bash <span class="token variable">$0</span> { c | start | set_ip | stop | shot | shot_list | shot_back | clone_del | shot_del | list }&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;bash <span class="token variable">$0</span> \u6BCF\u4E2A\u53C2\u6570\u540E\u9762\u90FD\u53EF\u4EE5\u6DFB\u52A0:1(master)|2(node)\uFF0C\u5982(c1,stop2,shot_list1)&quot;</span>
<span class="token keyword">esac</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u811A\u672C-first-sh" tabindex="-1"><a class="header-anchor" href="#\u811A\u672C-first-sh" aria-hidden="true">#</a> \u811A\u672C\uFF1A<a href="#first.sh">first.sh</a></h3><h3 id="start-\u540E-\u901A\u8FC7-\u5609\u5BBE-set-ip1-bat-\u7684\u65B9\u5F0F\u6765\u8BBE\u7F6E\u865A\u62DF\u673A-ip\u3001hostname" tabindex="-1"><a class="header-anchor" href="#start-\u540E-\u901A\u8FC7-\u5609\u5BBE-set-ip1-bat-\u7684\u65B9\u5F0F\u6765\u8BBE\u7F6E\u865A\u62DF\u673A-ip\u3001hostname" aria-hidden="true">#</a> start \u540E\uFF0C\u901A\u8FC7 \u5609\u5BBE\uFF08set_ip1.bat\uFF09 \u7684\u65B9\u5F0F\u6765\u8BBE\u7F6E\u865A\u62DF\u673A\uFF08ip\u3001hostname\uFF09<a name="\u4F7F\u7528first.sh"></a></h3><p>\u811A\u672C\uFF1A<a href="#first.sh">first.sh</a></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>D:<span class="token punctuation">\\</span>rj-win<span class="token punctuation">\\</span>vm16<span class="token punctuation">\\</span>vmrun.exe -T ws -gu root -gp 123456a runProgramInGuest <span class="token string">&quot;F:<span class="token entity" title="\\v">\\v</span>m\\k8s\\master-cluster\\master-120\\master-120.vmx&quot;</span> /bin/bash /root/first.sh <span class="token number">120</span> master-120
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u4E09\u3001" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001" aria-hidden="true">#</a> \u4E09\u3001</h2><h2 id="\u56DB\u3001" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001" aria-hidden="true">#</a> \u56DB\u3001</h2><h2 id="\u4E94\u3001" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001" aria-hidden="true">#</a> \u4E94\u3001</h2><h2 id="\u516D\u3001" tabindex="-1"><a class="header-anchor" href="#\u516D\u3001" aria-hidden="true">#</a> \u516D\u3001</h2>`,83);function Ya(Za,Ja){const a=p("ExternalLinkIcon");return i(),o("div",null,[u,n("p",null,[n("a",d,[v,e(a)])]),n("p",null,[n("a",k,[m,e(a)])]),b,n("table",null,[n("thead",null,[n("tr",null,[g,h,_,n("th",null,[f,n("a",q,[w,e(a)]),x]),y,n("th",null,[$,n("a",E,[M,e(a)]),S]),n("th",null,[N,n("a",A,[T,e(a)]),V]),n("th",null,[O,n("a",D,[C,e(a)]),P]),n("th",null,[R,n("a",L,[G,e(a)]),U]),I])]),n("tbody",null,[n("tr",null,[F,B,z,n("td",null,[H,n("a",K,[W,e(a)]),X]),n("td",null,[j,n("a",Y,[Z,e(a)]),J]),n("td",null,[Q,n("a",ss,[ns,e(a)]),as]),n("td",null,[es,n("a",ts,[ls,e(a)]),is]),n("td",null,[os,n("a",ps,[cs,e(a)]),rs]),n("td",null,[us,n("a",ds,[vs,e(a)]),ks]),n("td",null,[ms,n("a",bs,[gs,e(a)]),hs])]),n("tr",null,[_s,fs,qs,n("td",null,[ws,n("a",xs,[ys,e(a)]),$s]),n("td",null,[Es,n("a",Ms,[Ss,e(a)]),Ns]),n("td",null,[As,n("a",Ts,[Vs,e(a)]),Os]),n("td",null,[Ds,n("a",Cs,[Ps,e(a)]),Rs]),n("td",null,[Ls,n("a",Gs,[Us,e(a)]),Is]),n("td",null,[Fs,n("a",Bs,[zs,e(a)]),Hs]),n("td",null,[Ks,n("a",Ws,[Xs,e(a)]),js])]),n("tr",null,[Ys,Zs,Js,n("td",null,[Qs,n("a",sn,[nn,e(a)]),an]),n("td",null,[en,n("a",tn,[ln,e(a)]),on]),n("td",null,[pn,n("a",cn,[rn,e(a)]),un]),n("td",null,[dn,n("a",vn,[kn,e(a)]),mn]),n("td",null,[bn,n("a",gn,[hn,e(a)]),_n]),n("td",null,[fn,n("a",qn,[wn,e(a)]),xn]),n("td",null,[yn,n("a",$n,[En,e(a)]),Mn])]),n("tr",null,[Sn,Nn,An,n("td",null,[Tn,n("a",Vn,[On,e(a)]),Dn]),n("td",null,[Cn,n("a",Pn,[Rn,e(a)]),Ln]),n("td",null,[Gn,n("a",Un,[In,e(a)]),Fn]),n("td",null,[Bn,n("a",zn,[Hn,e(a)]),Kn]),n("td",null,[Wn,n("a",Xn,[jn,e(a)]),Yn]),n("td",null,[Zn,n("a",Jn,[Qn,e(a)]),sa]),n("td",null,[na,n("a",aa,[ea,e(a)]),ta])]),n("tr",null,[la,ia,oa,n("td",null,[pa,n("a",ca,[ra,e(a)]),ua]),n("td",null,[da,n("a",va,[ka,e(a)]),ma]),n("td",null,[ba,n("a",ga,[ha,e(a)]),_a]),n("td",null,[fa,n("a",qa,[wa,e(a)]),xa]),n("td",null,[ya,n("a",$a,[Ea,e(a)]),Ma]),n("td",null,[Sa,n("a",Na,[Aa,e(a)]),Ta]),n("td",null,[Va,n("a",Oa,[Da,e(a)]),Ca])])])]),Pa,n("p",null,[Ra,La,n("a",Ga,[Ua,e(a)]),Ia,n("a",Fa,[Ba,e(a)])]),za,n("p",null,[Ha,Ka,n("a",Wa,[Xa,e(a)])]),ja])}var ne=l(r,[["render",Ya],["__file","vagrant-vmware.html.vue"]]);export{ne as default};
