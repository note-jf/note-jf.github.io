import{_ as p}from"./plugin-vue_export-helper.21dcd24c.js";import{o as i,c as l,b as n,e,d as s,a as t,r as c}from"./app.c37b87a5.js";var o="/assets/true-1625452569657-833e64b2-1403-4fb6-9ee3-1e166504ccf0.5d65f964.png",u="/assets/true-image-20211119152904883.a62af16d.png",r="/assets/true-image-20211119152923933.0a728a1d.png",d="/assets/true-image-20211119152942908.0b9d7bba.png",k="/assets/true-1625452728905-e72041a2-cf1b-4b24-a327-7f0c3974a931.e8cfbf57.png",m="/assets/true-1626605698082-bf4351dd-6751-44b7-aaf7-7608c847ea42.0e83a11e.png",v="/assets/true-image-20211119155506746.20363ed0.png",b="/assets/true-image-20211212160128007.b96c229b.png",g="/assets/true-image-20211207225032232.3bba15e0.png",h="/assets/true-image-20211207225209670.bf5d087d.png",y="/assets/true-image-20211207225504118.12031911.png",f="/assets/true-image-20211207225722559.14ab1f0f.png",x="/assets/true-image-20211207230129356.334ba033.png",_="/assets/true-image-20211207231251942.978d3211.png",q="/assets/true-image-20211207231314338.8657278e.png",P="/assets/true-image-20211207231849655.a4121ffd.png",w="/assets/true-image-20211208174133284.2ae5eec0.png",j="/assets/true-image-20211208175833308.14204af3.png",E="/assets/true-image-20211208180527896.6d163569.png",R="/assets/true-image-20211208181306441.82c92871.png",S="/assets/true-image-20211208212559503.c73b0cb9.png",A="/assets/true-image-20211208215629869.bcbbe5ba.png",N="/assets/true-image-20211208220838638.2e1ae245.png",C="/assets/components-of-kubernetes.60de9d69.svg",D="/assets/true-image-20211208203943489.deb54355.png",T="/assets/true-image-20211208205239059.d6141b29.png",I="/assets/true-2839691-20220421215548249-23947997.511eeaed.png",O="/assets/true-image-20211208205421842.64437e36.png",z="/assets/true-image-20211208205753063.e288e4ab.png",V="/assets/true-image-20211208205714089.4904c227.png",M="/assets/true-image-20190316184154726.ee8d7ece.png",G="/assets/true-image-20211208221411991.7f0e5476.png",L="/assets/true-nginx-666.53098ffd.png",K="/assets/true-nginx-888.bc46c8b3.png",B="/assets/true-1620.e56e912e.png",H="/assets/true-2839691-20220422220407496-1098118652.73c85e73.png",W="/assets/true-image-20211208223555795.7a7a004c.png",F="/assets/true-image-20211208223713227.e3390e36.png",U="/assets/true-image-20211208223732243.da282496.png",X="/assets/true-image-20220506042516462.250bc7b1.png",Q="/assets/true-image-20220506042632204.514a5d1a.png",J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfAAAABHCAIAAAB3doLIAAAPC0lEQVR4Xu2dzZnzuBGEN405OoS97lFHH/foFBSCU5ij09Bx01Aqk4IFgPjtKhCgyBlRU+/jZy02wEajAZQoDsHvjz89HxXX29fX7XrJR/fPx8Hl8x4+hOKHYfngCtxxU7/8NGwv/ABYhUty5g4+b7fo/fH5fr9/tudcbz7+Om4hhDg3fxBBjyJ4uT5UbxHcKOROyR/Gr/vt5hWRCnrxzeD9JBVv7KC+L7m1SgwF3Z20BLbG5Xr13r2gu++j4ntFCCFODhR0f2HrVNKJ9kNXo+6la/S2NhP0xlNxpjsnmD+zf2cP3xW+/mdxQlDtRCnfD1f3+5CeP9y4K/bopI5ICCFODhZ0ipf00+ug7rUIId6RSUH/CNfQ6er6nMouQRdCvCPzgi6EEOIlkaALIcSb8AKC/rIPm5C/AR9N+nvx4KM72/nr8/LP19/3r7//+fxXW1YweYfq8Pgn4/kpDs+DEIZTCbp/6nCoZh/36M3AGvshQV84Xrb+/N/Xv/870L1tkWw7a4TjPB/BuaIVJ2da0N3j4fnBwgE5WGVU0CeeN+/jH418NLnW5psL+uWvf74u/2mtgG2RbDtrhOM8H8G5ohUnZ1LQnajel+fD99K7IUH3jd1uaGPRFL4DN7d91P2n72yvDm7jcCE4l6BfHMvHfT0fzLmiFSeHCDq+Dg8bOXOtRYrDlC12BBXPqbONRbk231hUb0Ryu0b5TtEx4Y2LK2z9X6MQdPfxa+D5e5g33+pnLMj9YvaitI6yyT+oMYaTcnfrPP1v5B46Hhg2Xig6n0+3u9jlxiX00Zu1YXMj/qj7OPHuHpb1Djt5g/kPBdgO4XmG/vv9snkQ4jCwoPtd92FKPhQ5zu40z8HW/7Su4gtegp/tW/8LNc2MC/qlvNt+uSwH0emcoF+Gt6LivPn8gDwwewAJQWVrv15nmbpCXxtfO142/iKfwcVyQdDDtVB8Ba7kDed/8RJ/WF79tUEXlmfsv98vmwchDgMLekWcnmlmxhlevpyrWJh5OtcLdrs9cUWCbnFbn+7uOyeuw1tylH4x+DcL1N5bfL/8lddIo4YUP8sPswegEBTGQme2MSXoMM7ueNn4ywnka4IRbkFVaDw1LM4RRvJcjSPvl82DEIdBBP3qfuVm/PSMMzPP0OVTM2XtRJ+w17TL8Dok6LHWsvDBinIK75W96y3EU34zrILy1u0vsgdA2IvVigbnesm3Vv6ph3lK0FGc/fGy8ScLFD4MqsLicZ8H8j8EyXPfP+zXltaF2AgU9Gv+JR2O/PQs57ifou/++tyqw0ZWADhv2c+gPcCiC9Waylt4WtDpcHhs/H3hw6AqNG8k/9DJKiDPxH+/XzYPQhwGE3S9PrcSDtdGt66H5M35QXlg9oWU7obQ34FwVnhe0PvjZeLvCx8GVaF5I/mPw0fuofvJnHW6sLd5Jv5X+mXyIMRhQEH/0OtzHVV3Sd9rcN58fsBTGcyeiLlo2vW5GOxwhx0EnY+Xp4l/RfggqIrJW1GC8u9L+FMuPp2mkVjQfCUh/6v9IuMoxO5gQad4WbPKczIahToa1hyzr7H1PMHA81l5FqdjUtA/wrVOurrGK+HV+eaVyppj9hX0E/57UJ7F+ZgXdDELE25m54QbT6P3l85BczMt8qMXC++YZ/ErkKALIcSb8LOCXu3nFIZ6v+tn+nNu85c6bP8ttH+CFOL38qOCPn/P4XcB8wONHfvbI0EXIvKjgv6WrP0trRXetfot7flr9rMwm4eEBF2IyO6CXrzm1B2URfb4HVkRJlNsDCsw4Wb2FarxeoKn/czmISFBFyKCBT1vw2ifOmevS72y15zmJVodpmcbmjXMNoCQdt32xNX6Q3awAaqJPwlHsNuAipvZC1agSvXp1Wf5MVGt2Ene4Hj1YHljfki7cLx6eSB+PrK53pgmxK8GCrpXnWVNPVZU3ikdrqL84nGrsFhHrqSQwqxweYkDwXFyUJq8F7BFm7WLX2fa98PswX+7NZ8Jeuqse4FA1Yn2uITkwNgibX4cyAezs7yR8aKwvDE/rF02Xr4M5IH6qcdLgi5EgAm6X7/tKkmSZo/qokghMmi9toKFnbT29VrrNXr2dNQTdFQ/HdqOBmD7nfptfjxIuImd9MscrNGpDIs67Ras5435YXYhfjtQ0P31k/8JXf3C9lemFesCEe24/FoJFpCkZCft9l9n2jBoT6HO2tMhbKU9LULrf7T5CRA3wN7JWxt0F+s5g/x02oXjtRSZPDA//fwL8Yshgh6pbyggfVmgqyoUkOLGIanVVkuE4KxGdfwM2NMREw5mT4cw2lm7A3WcySuwo9MXWCogncqwiLUbumrHqyhMh4uJ+UHjJcSvBwn6pbjTWS+zckXWr0vlq8qV3Ehpe5bzj+7Vknb96eHj2OtSe3Z7D32pHmsn/31Bd6Wgs21XE6S+B55UD0nXTvIWSqxnCssb80PapePlLSAPxE87XuY8IX4pSNDd4rLPIiwl5dMO6WKLLWyPW32dwuAulrOnKXC7+HWmpj7zU9rBUy4fObzKf1/Qi5NyLXD5nAH1TVnVAjRiO84bCHoFljfmB7fLx8uB8oD9hIQGs55yESKBBV3sC5M9IYTYEQn68XQvz4UQYi8k6EII8SZI0IUQ4k2YEPTiseBT3kCYjn/9Vsmm1/+CG+qb/GxmvV+vwf5xHp3nY/yj53+O4Zj4M3od9ABAHyaYEPSF/ZfZ9zIe/2rN1QoQO2Db/Gzmm5vbzO5x7u6w4SD/3yboB8WfgP6hsWN/e6w+zPBzgh6eJW6txzMe/3jNKZ4bsB04qF9PYufDWeI8mo6g56c6zQPG30U7SrP5ac9fs5+F2TwkntOH0wk6e00rsxvG4x+vOcVzA7aVIj8H9etJ7Hx4Ks7h+TCLjfNoqKD7guLlZd8cl8ekwxhWYKPM7CvsNe5P+5nNQ+I5fWCCzjaSoEQ3liKg6gKi2F6SbpIt5LPLdot9JM4pfE0rs5ONQr6kjd9bQbu+5md0ZOIJFK6CZ+DI14/WeiPMrJ+Uu8ENNSg/nX657Zhw3Pl8gEA/bJ6w+dDPAzTD/i720nVjXDzljtH4a7Iz6P8Dx9nrF8LVX2LzIaT6lWaU2cXrrsdM/CWl+mzJj5kVK3a0Th1s3BlsPjM/pN3peUL8UH2YBgu6Sz/e6o0SzRZq+JTnWOWmno2VLU3dol8+orwkVuzZT7WVP9Qx8bN2w8AwPw43/NmVrx+DuZT9a+IxjvbyY0H54f1ir7ftzQcE9kPnSTxsxmU4DwPzJJW2Qx9oZxuMfykzcWZa/zhO3i9MDO7x//d76z/5KXrgM7vUM+uux1j8Gb6Waluk9e9APpg9x2NGrDvuLb42nM/YD2t3dp5QP3WebaLHgYLuJwRzaRNNF2rMG3QFOly3Wx2xkKC948dE6yD17Zxpm7oaIYb1if/MXn4sqBL1X8PanaXKJ5wn8RDMKxhnJw/9UOs8l2ZoD6zGmWn8kzhpvwi+/s1dwtl24RW0C5Guux5j8ZPybARxBlD+wXpk9k48MBRGpzIs6rRb0NhBHpgfZt8CEnSQygJb2lmo8DW8qRrwU7M+YMjeiceWLhbUbt/PYioqsPrMntnLjwVV6viBr7e1GVtlxE8TGp4PqD6zmwNDneeA82ZOgfEvRSbOzDHjGObn3Sq6d7Sc6i/tUnFn3fUYix8XR8bzEyBugD3koWR03Gus5wzy02l3ap4wPyt5ngMJet+lTcdAQOCHpbXA8V5ATqm9NjZVbPysXVeT+1lMxYk0D914FtMufiyoEu3XNf3yM3bjpAfxQ/sVD0fnVScP/VCvZqBtq8lIXMIzFhr/JE7aL0IaL9d0UbXxAyY2Wnc9xuJPh9Azszts/nHYxI5OX1hNYkmnMixi7Yaujs+Tjh+e50mgoPtg8D2mpbCOK1SPtdM9IP4aXm+qZcVTZsj9vWH9da/Ynv2Ae382FNKui7Dj56NtnS/UJh7jaBc//u8qeX5Fo2mM98tXDg3X/sMA0/nQtsv8BDfRSxO/nQ/DeShOQ/3NNKU+EWCJsfiDxcSZaVvHcfJ+LcdNPosWiwwuR9UVeijqrzvrP2NDQfHDqomZ/ERjGyKz53h8RAP6gAlpRPMZ+yHt+soz84T4afNszpsAC7qfCW7Vu58F9jdbLCunVqpdvha1vMNnvOSTinGr2i0mHU40t8N7ixEbP2zXL7zyaZDkIFO66i3UIKK+Ivwr9qyfuwus9uNmhfGM8sP7xV9v25kPoF3qh8yTpnDpfT8PeHxRf0vaPJcQ76txlrRTC8XZ61c4rvNZSUOtE9l9lYjuujP+S0bi92Zz+ZyZyQ83Yjtap6GqObsLm8/MD253fp5gPyGhwWzW9RxM0MXLA+be5mnwJD/V7rtydD6f9Q+mnngNJOin4nEZUPx80KISP0D38lz8LBL0c1H+ZDO3koQQvxsJuhBCvAkvIOi6ISeEEHtwKkG/XPd5X7P747RuAgoh3o1pQXePT8IHfjYzKuj+cas9/hrj70M/mhxoUwghzsOkoDtRTU/k7/ScxZCg+8ZuN7LVahzfgZvbF+3+86QzIYR4JYig4+twp4alBi5SHB5jwo9fkI0J+aH75kF69hTHxW/nuiJB726UqIkPXF1v1o0QQpwcLOj4tZBJzxfV9W+Aexj8Lqeov9Vm4/DZ2eutw409FWQ7vv4fF/T6Xy+8LAfRqQRdCPGGYEGviLdE0n6CKNlRuxvtzbdQ8qfn7Ako6Jarv6VyT18sj+PoKP1i8Dtvm+8LIYQ4M0TQr+C1kFHQ80ax5VOzcywJ8RZ7zTZBj7WWL5qmuVDD3enJii+EEG8AFPRw5R21NApuuhBfLsyrK3Qk0PSKu2PvKyyrUF1qPy7Ci38Nyl2sm3+yJdxyAUovhBDnhQk6ei1kFHJ0Dx0KevHNMH0P3f9dtlViKOjupMFrbf8g+8ci6O77qP0JIIQQ5wUKer7TXL8WsrlZnmszQW88FWem2yudp1ya12OWlPJ9Mf/UIsc9vJPu6+htKEKItwILOsVL+ul1UPdahBDvyKSgf4Rr6HR1fU5ll6ALId6ReUEXQgjxkkjQhRDiTXgBQdfDJkIIsQenEnS9PlcIITjTgo5f2/UMo4I+8bx5H70+VwjxlkwKuhNVvT5XCCFekf8DVWsiIDLh+xoAAAAASUVORK5CYII=",Y="/assets/true-image-20220515182956539.f05d990e.png",Z="/assets/true-image-20220515183019002.027a99e7.png",$="/assets/true-1631589337850-64ced113-11ed-4c25-99b0-5b101995cecf.fb46f00a.png",nn="/assets/true-\u591A\u79DF\u6237\u7BA1\u7406\u5FEB\u901F\u5165\u95E8.cc1af67b.png",sn="/assets/true-image-20220516131100542.62aa9087.png",an="/assets/true-image-20220516132218174.ac22aefd.png",en="/assets/true-image-20220516132700995.5179e62c.png",tn="/assets/true-image-20220516132947864.101aef6a.png",pn="/assets/true-image-20220516133434615.53b5b039.png",ln="/assets/true-image-20220516133452504.5a1612bf.png",cn="/assets/true-WordPress.59ec0c5d.png",on="/assets/true-image-20220516141949481.3a8e6cec.png",un="/assets/true-image-20220516142218882.501be4a3.png",rn="/assets/true-image-20220516142317994.d2170a03.png",dn="/assets/true-image-20220516142337866.d45a9bf2.png",kn="/assets/true-image-20220516153908487.d75e919f.png",mn="/assets/true-image-20220516144552690.13014395.png",vn="/assets/true-image-20220516144619786.fddb474c.png",bn="/assets/true-image-20220516144738362.4c01704e.png",gn="/assets/true-image-20220516144800580.2bdc7961.png",hn="/assets/true-image-20220516144955437.4bd9ed00.png",yn="/assets/true-image-20220516154617299.48e2c7bd.png",fn="/assets/true-image-20220516145535925.4b07996b.png",xn="/assets/true-image-20220516145602690.14bd6094.png",_n="/assets/true-image-20220516150150694.a3390b6c.png",qn="/assets/true-image-20220516150245715.7258eabb.png",Pn="/assets/true-image-20220516150608459.8cc0e453.png",wn="/assets/true-image-20220516151023577.e656990f.png",jn="/assets/true-image-20220516151031852.2a761ff4.png",En="/assets/true-image-20220516151356307.b83d406d.png",Rn="/assets/true-image-20220516151419794.2103fa56.png",Sn="/assets/true-image-20220516151506949.20944fd5.png",An="/assets/true-image-20220501211906409.36f40f56.png";const Nn={},Cn=n("h1",{id:"\u4E00\u3001k8s-\u57FA\u7840\u642D\u5EFA",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4E00\u3001k8s-\u57FA\u7840\u642D\u5EFA","aria-hidden":"true"},"#"),s(" \u4E00\u3001K8S \u57FA\u7840\u642D\u5EFA")],-1),Dn=n("p",null,"\u4E2D\u6587\u793E\u533A: https://www.kubernetes.org.cn/",-1),Tn=n("p",null,"\u5B98\u65B9\u6587\u6863:https://kubernetes.io/zh/docs/home/",-1),In=n("p",null,"\u793E\u533A\u6587\u6863:http://docs.kubernetes.org.cn/",-1),On=n("p",null,"https://feisky.gitbooks.io/kubernetes/content/",-1),zn={href:"https://kubernetes.io/releases/",target:"_blank",rel:"noopener noreferrer"},Vn=s("\u5386\u53F2\u7248\u672C Release History"),Mn={href:"https://github.com/kubernetes/kubernetes/tree/master/CHANGELOG",target:"_blank",rel:"noopener noreferrer"},Gn=s("\u5BA2\u6237\u7AEF\u4E0B\u8F7D github"),Ln=t('<h2 id="_1-\u3001\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-\u3001\u6982\u5FF5" aria-hidden="true">#</a> 1\uFF09\u3001\u6982\u5FF5</h2><p><img src="'+o+'" alt="image.png"></p><p>**\u4F20\u7EDF\u90E8\u7F72\u65F6\u4EE3</p><p>**\u865A\u62DF\u5316\u90E8\u7F72\u65F6\u4EE3</p><p>**\u5BB9\u5668\u90E8\u7F72\u65F6\u4EE3</p><p>\u597D\u5904\uFF1A</p><ul><li>\u654F\u6377\u5E94\u7528\u7A0B\u5E8F\u7684\u521B\u5EFA\u548C\u90E8\u7F72\uFF1A\u4E0E\u4F7F\u7528 VM \u955C\u50CF\u76F8\u6BD4\uFF0C\u63D0\u9AD8\u4E86\u5BB9\u5668\u955C\u50CF\u521B\u5EFA\u7684\u7B80\u4FBF\u6027\u548C\u6548\u7387\u3002</li><li>\u6301\u7EED\u5F00\u53D1\u3001\u96C6\u6210\u548C\u90E8\u7F72\uFF1A\u901A\u8FC7\u5FEB\u901F\u7B80\u5355\u7684\u56DE\u6EDA(\u7531\u4E8E\u955C\u50CF\u4E0D\u53EF\u53D8\u6027)\uFF0C\u63D0\u4F9B\u53EF\u9760\u4E14\u9891\u7E41\u7684\u5BB9\u5668\u955C\u50CF\u6784\u5EFA\u548C\u90E8\u7F72\u3002</li><li>\u5173\u6CE8\u5F00\u53D1\u4E0E\u8FD0\u7EF4\u7684\u5206\u79BB\uFF1A\u5728\u6784\u5EFA/\u53D1\u5E03\u65F6\u800C\u4E0D\u662F\u5728\u90E8\u7F72\u65F6\u521B\u5EFA\u5E94\u7528\u7A0B\u5E8F\u5BB9\u5668\u955C\u50CF\uFF0C\u4ECE\u800C\u5C06\u5E94\u7528\u7A0B\u5E8F\u4E0E\u57FA\u7840\u67B6\u6784\u5206\u79BB\u3002</li><li>\u53EF\u89C2\u5BDF\u6027\u4E0D\u4EC5\u53EF\u4EE5\u663E\u793A\u64CD\u4F5C\u7CFB\u7EDF\u7EA7\u522B\u7684\u4FE1\u606F\u548C\u6307\u6807\uFF0C\u8FD8\u53EF\u4EE5\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u7684\u8FD0\u884C\u72B6\u51B5\u548C\u5176\u4ED6\u6307\u6807\u4FE1\u53F7\u3002</li><li>\u8DE8\u5F00\u53D1\u3001\u6D4B\u8BD5\u548C\u751F\u4EA7\u7684\u73AF\u5883\u4E00\u81F4\u6027\uFF1A\u5728\u4FBF\u643A\u5F0F\u8BA1\u7B97\u673A\u4E0A\u4E0E\u5728\u4E91\u4E2D\u76F8\u540C\u5730\u8FD0\u884C\u3002</li><li>\u4E91\u548C\u64CD\u4F5C\u7CFB\u7EDF\u5206\u53D1\u7684\u53EF\u79FB\u690D\u6027\uFF1A\u53EF\u5728 Ubuntu\u3001RHEL\u3001CoreOS\u3001\u672C\u5730\u3001Google Kubernetes Engine \u548C\u5176\u4ED6\u4EFB\u4F55\u5730\u65B9\u8FD0\u884C\u3002</li><li>\u4EE5\u5E94\u7528\u7A0B\u5E8F\u4E3A\u4E2D\u5FC3\u7684\u7BA1\u7406\uFF1A\u63D0\u9AD8\u62BD\u8C61\u7EA7\u522B\uFF0C\u4ECE\u5728\u865A\u62DF\u786C\u4EF6\u4E0A\u8FD0\u884C OS \u5230\u4F7F\u7528\u903B\u8F91\u8D44\u6E90\u5728 OS \u4E0A\u8FD0\u884C\u5E94\u7528\u7A0B\u5E8F\u3002</li><li>\u677E\u6563\u8026\u5408\u3001\u5206\u5E03\u5F0F\u3001\u5F39\u6027\u3001\u89E3\u653E\u7684\u5FAE\u670D\u52A1\uFF1A\u5E94\u7528\u7A0B\u5E8F\u88AB\u5206\u89E3\u6210\u8F83\u5C0F\u7684\u72EC\u7ACB\u90E8\u5206\uFF0C\u5E76\u4E14\u53EF\u4EE5\u52A8\u6001\u90E8\u7F72\u548C\u7BA1\u7406 - \u800C\u4E0D\u662F\u5728\u4E00\u53F0\u5927\u578B\u5355\u673A\u4E0A\u6574\u4F53\u8FD0\u884C\u3002</li><li>\u8D44\u6E90\u9694\u79BB\uFF1A\u53EF\u9884\u6D4B\u7684\u5E94\u7528\u7A0B\u5E8F\u6027\u80FD\u3002</li><li>\u8D44\u6E90\u5229\u7528\uFF1A\u9AD8\u6548\u7387\u548C\u9AD8\u5BC6\u5EA6</li></ul>',7),Kn={id:"\u4E3A\u4EC0\u4E48\u9700\u8981-kubernetes-\u5B83\u80FD\u505A\u4EC0\u4E48",tabindex:"-1"},Bn=n("a",{class:"header-anchor",href:"#\u4E3A\u4EC0\u4E48\u9700\u8981-kubernetes-\u5B83\u80FD\u505A\u4EC0\u4E48","aria-hidden":"true"},"#",-1),Hn=s(),Wn={href:"https://v1-18.docs.kubernetes.io/zh/docs/concepts/overview/what-is-kubernetes/#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-kubernetes-%E5%AE%83%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88",target:"_blank",rel:"noopener noreferrer"},Fn=s("\u4E3A\u4EC0\u4E48\u9700\u8981 Kubernetes\uFF0C\u5B83\u80FD\u505A\u4EC0\u4E48?"),Un=t('<h3 id="\u7B80\u4ECB-\u8C03\u5EA6\u3001\u81EA\u52A8\u4FEE\u590D\u3001\u6C34\u5E73\u4F38\u7F29" tabindex="-1"><a class="header-anchor" href="#\u7B80\u4ECB-\u8C03\u5EA6\u3001\u81EA\u52A8\u4FEE\u590D\u3001\u6C34\u5E73\u4F38\u7F29" aria-hidden="true">#</a> \u7B80\u4ECB\uFF1A\u8C03\u5EA6\u3001\u81EA\u52A8\u4FEE\u590D\u3001\u6C34\u5E73\u4F38\u7F29</h3><p><img src="'+u+'" alt="true-image-20211119152904883"></p><p><img src="'+r+'" alt="image-20211119152923933"></p><p><img src="'+d+'" alt="image-20211119152942908"></p><h3 id="\u7EC4\u4EF6\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#\u7EC4\u4EF6\u67B6\u6784" aria-hidden="true">#</a> \u7EC4\u4EF6\u67B6\u6784</h3><p><img src="'+k+'" alt="image.png"></p><h4 id="kube-apiserver" tabindex="-1"><a class="header-anchor" href="#kube-apiserver" aria-hidden="true">#</a> kube-apiserver</h4>',7),Xn=s("API \u670D\u52A1\u5668\u662F Kubernetes "),Qn={href:"https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-control-plane",target:"_blank",rel:"noopener noreferrer"},Jn=s("\u63A7\u5236\u9762"),Yn=s("\u7684\u7EC4\u4EF6\uFF0C \u8BE5\u7EC4\u4EF6\u516C\u5F00\u4E86 Kubernetes API\u3002"),Zn=n("h4",{id:"etcd",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#etcd","aria-hidden":"true"},"#"),s(" etcd")],-1),$n=n("p",null,"etcd \u662F\u517C\u5177\u4E00\u81F4\u6027\u548C\u9AD8\u53EF\u7528\u6027\u7684\u952E\u503C\u6570\u636E\u5E93\uFF0C\u53EF\u4EE5\u4F5C\u4E3A\u4FDD\u5B58 Kubernetes \u6240\u6709\u96C6\u7FA4\u6570\u636E\u7684\u540E\u53F0\u6570\u636E\u5E93\u3002",-1),ns=n("h4",{id:"kube-scheduler",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#kube-scheduler","aria-hidden":"true"},"#"),s(" kube-scheduler")],-1),ss=s("\u63A7\u5236\u5E73\u9762\u7EC4\u4EF6\uFF0C\u8D1F\u8D23\u76D1\u89C6\u65B0\u521B\u5EFA\u7684\u3001\u672A\u6307\u5B9A\u8FD0\u884C"),as={href:"https://kubernetes.io/zh/docs/concepts/architecture/nodes/",target:"_blank",rel:"noopener noreferrer"},es=s("\u8282\u70B9\uFF08node\uFF09"),ts=s("\u7684 "),ps={href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/",target:"_blank",rel:"noopener noreferrer"},is=s("Pods"),ls=s("\uFF0C\u9009\u62E9\u8282\u70B9\u8BA9 Pod \u5728\u4E0A\u9762\u8FD0\u884C\u3002"),cs=n("h4",{id:"kube-controller-manager",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#kube-controller-manager","aria-hidden":"true"},"#"),s(" kube-controller-manager")],-1),os=s("\u5728\u4E3B\u8282\u70B9\u4E0A\u8FD0\u884C "),us={href:"https://kubernetes.io/zh/docs/concepts/architecture/controller/",target:"_blank",rel:"noopener noreferrer"},rs=s("\u63A7\u5236\u5668"),ds=s(" \u7684\u7EC4\u4EF6"),ks=n("blockquote",null,[n("p",null,"\u8FD9\u4E9B\u63A7\u5236\u5668\u5305\u62EC:"),n("ul",null,[n("li",null,"\u8282\u70B9\u63A7\u5236\u5668\uFF08Node Controller\uFF09: \u8D1F\u8D23\u5728\u8282\u70B9\u51FA\u73B0\u6545\u969C\u65F6\u8FDB\u884C\u901A\u77E5\u548C\u54CD\u5E94"),n("li",null,"\u4EFB\u52A1\u63A7\u5236\u5668\uFF08Job controller\uFF09: \u76D1\u6D4B\u4EE3\u8868\u4E00\u6B21\u6027\u4EFB\u52A1\u7684 Job \u5BF9\u8C61\uFF0C\u7136\u540E\u521B\u5EFA Pods \u6765\u8FD0\u884C\u8FD9\u4E9B\u4EFB\u52A1\u76F4\u81F3\u5B8C\u6210"),n("li",null,"\u7AEF\u70B9\u63A7\u5236\u5668\uFF08Endpoints Controller\uFF09: \u586B\u5145\u7AEF\u70B9(Endpoints)\u5BF9\u8C61(\u5373\u52A0\u5165 Service \u4E0E Pod)"),n("li",null,"\u670D\u52A1\u5E10\u6237\u548C\u4EE4\u724C\u63A7\u5236\u5668\uFF08Service Account & Token Controllers\uFF09: \u4E3A\u65B0\u7684\u547D\u540D\u7A7A\u95F4\u521B\u5EFA\u9ED8\u8BA4\u5E10\u6237\u548C API \u8BBF\u95EE\u4EE4\u724C")])],-1),ms=n("h4",{id:"cloud-controller-manager",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cloud-controller-manager","aria-hidden":"true"},"#"),s(" cloud-controller-manager")],-1),vs=s("\u4E91\u63A7\u5236\u5668\u7BA1\u7406\u5668\u662F\u6307\u5D4C\u5165\u7279\u5B9A\u4E91\u7684\u63A7\u5236\u903B\u8F91\u7684 "),bs={href:"https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-control-plane",target:"_blank",rel:"noopener noreferrer"},gs=s("\u63A7\u5236\u5E73\u9762"),hs=s("\u7EC4\u4EF6"),ys=t('<blockquote><p>\u4E0B\u9762\u7684\u63A7\u5236\u5668\u90FD\u5305\u542B\u5BF9\u4E91\u5E73\u53F0\u9A71\u52A8\u7684\u4F9D\u8D56\uFF1A</p><ul><li>\u8282\u70B9\u63A7\u5236\u5668\uFF08Node Controller\uFF09: \u7528\u4E8E\u5728\u8282\u70B9\u7EC8\u6B62\u54CD\u5E94\u540E\u68C0\u67E5\u4E91\u63D0\u4F9B\u5546\u4EE5\u786E\u5B9A\u8282\u70B9\u662F\u5426\u5DF2\u88AB\u5220\u9664</li><li>\u8DEF\u7531\u63A7\u5236\u5668\uFF08Route Controller\uFF09: \u7528\u4E8E\u5728\u5E95\u5C42\u4E91\u57FA\u7840\u67B6\u6784\u4E2D\u8BBE\u7F6E\u8DEF\u7531</li><li>\u670D\u52A1\u63A7\u5236\u5668\uFF08Service Controller\uFF09: \u7528\u4E8E\u521B\u5EFA\u3001\u66F4\u65B0\u548C\u5220\u9664\u4E91\u63D0\u4F9B\u5546\u8D1F\u8F7D\u5747\u8861\u5668</li></ul></blockquote><h3 id="node-\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#node-\u7EC4\u4EF6" aria-hidden="true">#</a> Node \u7EC4\u4EF6</h3><h4 id="kubelet" tabindex="-1"><a class="header-anchor" href="#kubelet" aria-hidden="true">#</a> kubelet</h4><p>\u4E00\u4E2A\u5728\u96C6\u7FA4\u4E2D\u6BCF\u4E2A\u8282\u70B9\uFF08node\uFF09\u4E0A\u8FD0\u884C\u7684\u4EE3\u7406\u3002 \u5B83\u4FDD\u8BC1\u5BB9\u5668containers\u90FD \u8FD0\u884C\u5728 Pod \u4E2D\u3002</p><h4 id="kube-proxy" tabindex="-1"><a class="header-anchor" href="#kube-proxy" aria-hidden="true">#</a> kube-proxy</h4><p>\u662F\u96C6\u7FA4\u4E2D\u6BCF\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884C\u7684\u7F51\u7EDC\u4EE3\u7406</p><p><img src="'+m+`" alt="image.png"></p><h2 id="_3-\u3001\u96C6\u7FA4\u5B89\u88C5-\u73AF\u5883\u914D\u7F6E\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#_3-\u3001\u96C6\u7FA4\u5B89\u88C5-\u73AF\u5883\u914D\u7F6E\u642D\u5EFA" aria-hidden="true">#</a> 3\uFF09\u3001\u96C6\u7FA4\u5B89\u88C5+\u73AF\u5883\u914D\u7F6E\u642D\u5EFA</h2><h3 id="kubectl-\u5FEB\u6377\u952E-alias" tabindex="-1"><a class="header-anchor" href="#kubectl-\u5FEB\u6377\u952E-alias" aria-hidden="true">#</a> kubectl \u5FEB\u6377\u952E\uFF08alias\uFF09</h3><h4 id="k8s" tabindex="-1"><a class="header-anchor" href="#k8s" aria-hidden="true">#</a> k8s<a name="k8s-alias"></a></h4><p>vim ~/.bashrc</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">########k8s############</span>
<span class="token comment">###########k8s-\u521B\u5EFA\u4E0E\u5220\u9664</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">k</span><span class="token operator">=</span><span class="token string">&#39;kubectl&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kaf</span><span class="token operator">=</span><span class="token string">&#39;kubectl apply -f&#39;</span> <span class="token comment">#\u4F7F\u7528yaml\u521B\u5EFAapps</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kdf</span><span class="token operator">=</span><span class="token string">&#39;kubectl delete -f&#39;</span> <span class="token comment">#\u5220\u9664yaml\u521B\u5EFAapps</span>
<span class="token comment">###########k8s-\u8D44\u6E90\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kg</span><span class="token operator">=</span><span class="token string">&#39;kubectl get&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgnodes</span><span class="token operator">=</span><span class="token string">&#39;kubectl get nodes -o wide&#39;</span> <span class="token comment">#\u83B7\u53D6node\u8D44\u6E90\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpods</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pods -o wide&#39;</span> <span class="token comment">#\u83B7\u53D6pods\u8D44\u6E90\u4FE1\u606F</span>
<span class="token comment">###########k8s-\u540D\u79F0\u7A7A\u95F4</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgns</span><span class="token operator">=</span><span class="token string">&#39;kubectl get ns&#39;</span> <span class="token comment">#\u83B7\u53D6\u6240\u6709\u540D\u79F0\u7A7A\u95F4</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgall</span><span class="token operator">=</span><span class="token string">&#39;kubectl get all -o wide&#39;</span> <span class="token comment">#\u83B7\u53D6\u6240\u6709apps-pod-service</span>
<span class="token comment">###########k8s-svc\u670D\u52A1\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgsvc</span><span class="token operator">=</span><span class="token string">&#39;kubectl get svc&#39;</span>
<span class="token builtin class-name">alias</span> kgsvc-n<span class="token operator">=</span><span class="token string">&#39;kubectl get svc -n $1&#39;</span> <span class="token comment">#\u81EA\u5B9A\u4E49\u540D\u79F0\u7A7A\u95F4\u7684svc\u67E5\u8BE2</span>
<span class="token builtin class-name">alias</span> kgsvc-k8s<span class="token operator">=</span><span class="token string">&#39;kubectl get svc -n kube-system -o wide&#39;</span> <span class="token comment">#\u83B7\u53D6k8s\u670D\u52A1</span>
<span class="token builtin class-name">alias</span> kgsvc-ing<span class="token operator">=</span><span class="token string">&#39;kubectl get svc -n ingress-nginx -o wide&#39;</span> <span class="token comment">#\u83B7\u53D6ingress\u670D\u52A1</span>
<span class="token comment">###########k8s-pod\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpod</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pod --show-labels&#39;</span> <span class="token comment">#\u67E5\u770Bk8s\u7684pod\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpodw</span><span class="token operator">=</span><span class="token string">&#39;watch kubectl get pod -n kube-system -o wide&#39;</span>	<span class="token comment">#\u76D1\u63A7k8s-pod\u7684kube-system\u8FDB\u5EA6</span>
<span class="token comment">###########k8s-pods\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpodsallns</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pods --all-namespaces -o wide&#39;</span> <span class="token comment">#\u83B7\u53D6pods\u6240\u6709\u540D\u79F0\u7A7A\u95F4</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpodsn</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pods -o wide -n $1&#39;</span> <span class="token comment">#\u67E5\u770B\u8F93\u5165\u7684\u3010kgpodsallns\u3011\u540D\u79F0\u7A7A\u95F4\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> kgpodsn-k8s<span class="token operator">=</span><span class="token string">&#39;kubectl get pods -n kube-system -o wide&#39;</span> <span class="token comment">#\u67E5\u770B\u540D\u79F0\u7A7A\u95F4kube-system\u7684\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> kgpodsn-ingressnginx<span class="token operator">=</span><span class="token string">&#39;kubectl get pods -n ingress-nginx -o wide&#39;</span> <span class="token comment">#\u67E5\u770B\u540D\u79F0\u7A7A\u95F4ingress-nginx\u7684\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> kgpodsn-node<span class="token operator">=</span><span class="token string">&#39;kubectl get pods -n kube-system -o wide | grep $1&#39;</span> <span class="token comment">#\u67E5\u770Bnode\u5B50\u8282\u70B9\u7684pod\u4FE1\u606F</span>
<span class="token comment">###########k8s-describe\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> kdesc-node<span class="token operator">=</span><span class="token string">&#39;kubectl describe node $1&#39;</span> <span class="token comment">#\u4F20\u5165node\u4E3B\u673A\u540D\u79F0</span>
<span class="token builtin class-name">alias</span> kdesc-pod<span class="token operator">=</span><span class="token string">&#39;kubectl describe pod -n $1&#39;</span> <span class="token comment">#\u4F20\u5165\u540D\u79F0\u7A7A\u95F4</span>
<span class="token comment">###########k8s-log\u4FE1\u606F</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">klog</span><span class="token operator">=</span><span class="token string">&#39;kubectl logs -n $1&#39;</span> <span class="token comment">#\u4F20\u5165\u540D\u79F0\u7A7A\u95F4</span>
<span class="token comment">###########k8s-\u7CFB\u7EDF\u64CD\u4F5C\u90E8\u5206</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">ks</span><span class="token operator">=</span><span class="token string">&#39;kubectl set&#39;</span> <span class="token comment">#\u8BBE\u7F6E\u5E94\u7528\u8D44\u6E90</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">ke</span><span class="token operator">=</span><span class="token string">&#39;kubectl edit&#39;</span> <span class="token comment">#\u7F16\u8F91\u8D44\u6E90</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kc</span><span class="token operator">=</span><span class="token string">&#39;kubectl create&#39;</span> <span class="token comment">#\u521B\u5EFA\u8D44\u6E90</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kd</span><span class="token operator">=</span><span class="token string">&#39;kubectl delete&#39;</span> <span class="token comment">#\u5220\u9664</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">krollout</span><span class="token operator">=</span><span class="token string">&#39;kubectl rollout&#39;</span> <span class="token comment">#\u8F93\u51FA\u3001\u67E5\u770B\u3001\u56DE\u6EDA</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">klabel</span><span class="token operator">=</span><span class="token string">&#39;kubectl label&#39;</span> <span class="token comment">#\u66F4\u65B0\u8D44\u6E90\u5BF9\u8C61\u7684label</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kpatch</span><span class="token operator">=</span><span class="token string">&#39;kubectl patch&#39;</span> <span class="token comment">#\u66F4\u65B0\u8D44\u6E90\u5BF9\u8C61\u5B57\u6BB5</span>
<span class="token comment">###########k8s-\u5FEB\u6377\u952E\u63D0\u793A</span>
<span class="token builtin class-name">source</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>kubectl completion <span class="token function">bash</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u90E8\u7F72\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72\u6B65\u9AA4" aria-hidden="true">#</a> \u90E8\u7F72\u6B65\u9AA4</h3><div class="language-ABAP ext-ABAP line-numbers-mode"><pre class="language-ABAP"><code>1.\u5728\u6240\u6709\u8282\u70B9\u4E0A\u5B89\u88C5 Docker\u548C kubeadm
2.\u90E8\u7F72 Kubernetes Master
3.\u90E8\u7F72\u5BB9\u5668\u7F51\u7EDC\u63D2\u4EF6
4.\u90E8\u7F72 Kubernetes Node\uFF0C\u5C06\u8282\u70B9\u52A0\u5165 Kubernetes\u96C6\u7FA4\u4E2D
5.\u90E8\u7F72\u53EF\u89C6\u5316\u7BA1\u7406 Kubernetes \u8D44\u6E90
6.\u90E8\u7F72\u7A0B\u5E8F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+v+'" alt="image-20211119155506746"></p><h3 id="\u73AF\u5883\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u51C6\u5907" aria-hidden="true">#</a> \u73AF\u5883\u51C6\u5907</h3><h4 id="vmware" tabindex="-1"><a class="header-anchor" href="#vmware" aria-hidden="true">#</a> VMware</h4><h4 id="\u521B\u5EFA\u865A\u62DF\u673A" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u865A\u62DF\u673A" aria-hidden="true">#</a> \u521B\u5EFA\u865A\u62DF\u673A</h4><p><img src="'+b+`" alt="image-20211212160128007"></p><p><strong>\u5177\u4F53\u8BBE\u7F6E&amp;\u521B\u5EFA\u8BF7\u53C2\u8003\uFF1A\u6279\u91CF\u5904\u7406vagrant_vmware</strong></p><p><strong>bash :ifconf mmand not found</strong></p><blockquote><p>yum install -y net-tools</p></blockquote><p>\u672C\u673A\u6DFB\u52A0hosts\uFF1AC:\\Windows\\System32\\drivers\\etc</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>192.168.101.120 tomcat.k8s.com
192.168.101.120 nginx.k8s.com
192.168.101.120 ks.k8s.com
192.168.101.120 master
192.168.101.121 node1
192.168.101.122 node2
192.168.101.123 node3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u6BCF\u4E2A\u8282\u70B9\u4E0A\u6DFB\u52A0 vim /etc/hosts</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.101.120 master
192.168.101.121 node1
192.168.101.122 node2
192.168.101.123 node3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>systemctl restart network.service //\u91CD\u542F\u7F51\u7EDC\u670D\u52A1\uFF0C</p><p>ping -c 3 master-120 &amp;&amp; ping -c 3 node-121 &amp;&amp; ping -c 3 node-122 &amp;&amp; ping -c 3 node-123</p></blockquote><p>\u7528\u6237\uFF1Aa\uFF0C\u5BC6\u7801\uFF1A123456a\uFF0C hostnamectl set-hostname</p><h4 id="\u5F00\u542F-ssh-\u8FDC\u7A0B\u767B\u5F55" tabindex="-1"><a class="header-anchor" href="#\u5F00\u542F-ssh-\u8FDC\u7A0B\u767B\u5F55" aria-hidden="true">#</a> \u5F00\u542F ssh \u8FDC\u7A0B\u767B\u5F55<a name="ssh"></a></h4><p>\u5177\u4F53\uFF1Ahttps://blog.csdn.net/qq_42476834/article/details/124766896</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sed</span> -i <span class="token string">&#39;s/#PermitRootLogin yes/PermitRootLogin yes/g&#39;</span> /etc/ssh/sshd_config
\u767B\u5F55master\u3001node1\u3001node2\u3001node3
ssh-keygen -t rsa	\uFF08ssh-keygen\u8FD9\u91CC\u4E00\u8DEF\u56DE\u8F66\u5C31\u884C\uFF09
    
ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.101.120 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.101.121 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.101.122 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
ssh-copy-id -i ~/.ssh/id_rsa.pub a@192.168.101.120 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
ssh-copy-id -i ~/.ssh/id_rsa.pub a@192.168.101.121 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
ssh-copy-id -i ~/.ssh/id_rsa.pub a@192.168.101.122
\u514D\u5BC6\u767B\u5F55
<span class="token function">ssh</span> <span class="token number">192.168</span>.101.120 
<span class="token function">ssh</span> <span class="token number">192.168</span>.101.121
<span class="token function">ssh</span> <span class="token number">192.168</span>.101.122
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884Csh\u811A\u672C\uFF1Ak8s-init.sh\uFF0Ck8s-docker.sh\uFF0Ck8s-install.sh</p><h4 id="\u5F00\u542Fipvs\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#\u5F00\u542Fipvs\u652F\u6301" aria-hidden="true">#</a> \u5F00\u542FIPVS\u652F\u6301</h4><p>vim /etc/sysconfig/modules/ipvs.modules</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysconfig/modules/ipvs.modules</span>
#!/bin/bash
ipvs_modules=&quot;ip_vs ip_vs_lc ip_vs_wlc ip_vs_rr ip_vs_wrr ip_vs_lblc ip_vs_lblcr ip_vs_dh ip_vs_sh ip_vs_fo ip_vs_nq ip_vs_sed ip_vs_ftp nf_conntrack&quot;
for kernel_module in <span class="token variable">\${ipvs_modules}</span>; do
  /sbin/modinfo -F filename <span class="token variable">\${kernel_module}</span> &gt; /dev/null 2&gt;&amp;1
  if [ <span class="token variable">$?</span> -eq 0 ]; then
    /sbin/modprobe <span class="token variable">\${kernel_module}</span>
  fi
done
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>chmod 755 /etc/sysconfig/modules/ipvs.modules sh /etc/sysconfig/modules/ipvs.modules lsmod | grep ip_vs</p></blockquote><h4 id="\u5C06\u6865\u63A5\u7684ipv4\u6D41\u91CF\u4F20\u9012\u5230iptables\u7684\u94FE" tabindex="-1"><a class="header-anchor" href="#\u5C06\u6865\u63A5\u7684ipv4\u6D41\u91CF\u4F20\u9012\u5230iptables\u7684\u94FE" aria-hidden="true">#</a> \u5C06\u6865\u63A5\u7684IPv4\u6D41\u91CF\u4F20\u9012\u5230iptables\u7684\u94FE</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/modules-load.d/k8s.conf</span>
br_netfilter
EOF</span>

<span class="token comment"># cat /usr/lib/sysctl.d/00-system.conf \u4E0E\u4E4B\u76F8\u540C</span>
<span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysctl.d/k8s.conf</span>
# For binary values, 0 is disabled, 1 is enabled
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
vm.swappiness=0
EOF</span>

<span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysctl.d/k8s.conf</span>
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
vm.swappiness=0
EOF</span>

modprobe br_netfilter
sysctl -p /etc/sysctl.d/k8s.conf
sysctl --system

<span class="token comment">#\u4FEE\u6539/etc/sysctl.d/10-network-security.conf</span>
<span class="token comment">#\u4E0E /usr/lib/sysctl.d/50-default.conf \u7C7B\u4F3C</span>
<span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysctl.d/10-network-security.conf</span>
net.ipv4.conf.default.rp_filter=1
net.ipv4.conf.all.rp_filter=1
EOF</span>
<span class="token comment">#\u7136\u540E\u4F7F\u4E4B\u751F\u6548</span>
sysctl --system
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u65F6\u95F4\u540C\u6B65" tabindex="-1"><a class="header-anchor" href="#\u65F6\u95F4\u540C\u6B65" aria-hidden="true">#</a> \u65F6\u95F4\u540C\u6B65</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  yum <span class="token function">install</span> -y chrony
  systemctl <span class="token builtin class-name">enable</span> chronyd
  systemctl start chronyd
  timedatectl set-ntp <span class="token boolean">true</span>
\u8BBE\u7F6E\u65F6\u533A\uFF1Atimedatectl set-timezone Asia/Shanghai
timedatectl status
\u68C0\u67E5 ntp-server \u662F\u5426\u53EF\u7528\uFF1Achronyc activity -v
---------------------------------------
  yum -y <span class="token function">install</span> ntpdate <span class="token operator">&amp;&amp;</span> yum <span class="token function">install</span> ntpsec-ntpdate
  ntpdate time.windows.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="a\u3001\u5728\u6240\u6709\u8282\u70B9\u4E0A\u5B89\u88C5-docker\u548C-kubeadm\u3001kubelet\u3001kubectl" tabindex="-1"><a class="header-anchor" href="#a\u3001\u5728\u6240\u6709\u8282\u70B9\u4E0A\u5B89\u88C5-docker\u548C-kubeadm\u3001kubelet\u3001kubectl" aria-hidden="true">#</a> A\u3001\u5728\u6240\u6709\u8282\u70B9\u4E0A\u5B89\u88C5 Docker\u548C kubeadm\u3001kubelet\u3001kubectl</h3><h4 id="\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907" aria-hidden="true">#</a> \u51C6\u5907</h4>`,42),fs={href:"https://kubernetes.io/zh/docs/tasks/tools/",target:"_blank",rel:"noopener noreferrer"},xs=s("\u5B89\u88C5\u5DE5\u5177"),_s=s("\uFF1A"),qs={href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"},Ps=s("docker"),ws=s("\u3001kubeadm\u7BA1\u7406\u3001kukelet\u4EE3\u7406\u3001kubectl\u547D\u4EE4\u884C"),js=t(`<h4 id="_1\u3001\u5B89\u88C5docker" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5B89\u88C5docker" aria-hidden="true">#</a> 1\u3001\u5B89\u88C5docker</h4><p>https://docs.docker.com/engine/install/centos/</p><p>\u5378\u8F7D\u7684\u65E7\u7248\u672C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  yum remove <span class="token function">docker</span> docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u534E\u4E3A\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>\u3001\u82E5\u60A8\u5B89\u88C5\u8FC7docker\uFF0C\u9700\u8981\u5148\u5220\u6389\uFF0C\u4E4B\u540E\u518D\u5B89\u88C5\u4F9D\u8D56:
  yum remove <span class="token function">docker</span> docker-common docker-selinux docker-engine
  yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
<span class="token number">2</span>\u3001\u4E0B\u8F7Drepo\u6587\u4EF6
  <span class="token function">wget</span> -O /etc/yum.repos.d/docker-ce.repo https://repo.huaweicloud.com/docker-ce/linux/centos/docker-ce.repo
\u66FF\u6362\u4E3A\uFF1A
  <span class="token function">sed</span> -i <span class="token string">&#39;s+download.docker.com+repo.huaweicloud.com/docker-ce+&#39;</span> /etc/yum.repos.d/docker-ce.repo
<span class="token number">3</span>\u3001\u66F4\u65B0\u7D22\u5F15\u6587\u4EF6\u5E76\u5B89\u88C5
  yum clean all <span class="token operator">&amp;&amp;</span>   yum makecache fast
yum list docker-ce.x86_64 --showduplicates <span class="token operator">|</span> <span class="token function">sort</span> -r
  yum <span class="token function">install</span> -y docker-ce
<span class="token number">4</span>\u3001\u5F00\u542FDocker\u670D\u52A1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u963F\u91CC\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># step 1: \u5B89\u88C5\u5FC5\u8981\u7684\u4E00\u4E9B\u7CFB\u7EDF\u5DE5\u5177</span>
  yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
<span class="token comment"># Step 2: \u6DFB\u52A0\u8F6F\u4EF6\u6E90\u4FE1\u606F</span>
  yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
<span class="token comment"># Step 3</span>
  <span class="token function">sed</span> -i <span class="token string">&#39;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#39;</span> /etc/yum.repos.d/docker-ce.repo
<span class="token comment"># Step 4: \u66F4\u65B0\u5E76\u5B89\u88C5Docker-CE</span>
  yum clean all <span class="token operator">&amp;&amp;</span>   yum makecache fast
yum list docker-ce.x86_64 --showduplicates <span class="token operator">|</span> <span class="token function">sort</span> -r
  yum -y <span class="token function">install</span> docker-ce-<span class="token punctuation">[</span>VERSION<span class="token punctuation">]</span>
<span class="token comment"># Step 4: \u5F00\u542FDocker\u670D\u52A1</span>
  <span class="token function">service</span> <span class="token function">docker</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>systemctl docker systemctl restart docker systemctl stop docker systemctl enable docker systemctl disable docker systemctl status docker</p><p>usermod -aG docker a #\u975Eroot\u7528\u6237</p><p>\u8BBE\u7F6E\u52A0\u901F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> -su <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/docker/daemon.json</span>
{
  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],
  &quot;log-driver&quot;: &quot;json-file&quot;,
  &quot;log-opts&quot;: {
    &quot;max-size&quot;: &quot;100m&quot;
  },
  &quot;storage-driver&quot;: &quot;overlay2&quot;,
  &quot;registry-mirrors&quot;: [
    &quot;https://04eo9xup.mirror.aliyuncs.com&quot;,
    &quot;https://098cc8006500f4db0f2fc01937bbce40.mirror.swr.myhuaweicloud.com&quot;
  ],
}
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  systemctl daemon-reload
  systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>docker\u914D\u7F6Ehttp\u4EE3\u7406\uFF08\u53EF\u9009\uFF09</strong></p><p>\u9996\u5148, \u4F7F\u7528<code>systemctl status docker</code>\u547D\u4EE4\u67E5\u8BE2<code>docker.service</code>\u6587\u4EF6\u7684\u8DEF\u5F84, \u5728\u6211\u7684\u73AF\u5883\u4E2D\u5B83\u7684\u6587\u4EF6\u8DEF\u5F84\u662F<code>/lib/systemd/system/docker.service</code>; \u7136\u540E\u7F16\u8F91\u8FD9\u4E2A\u6587\u4EF6, \u6DFB\u52A0\u5982\u4E0B\u5185\u5BB9:</p><p>vim /lib/systemd/system/docker.service</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;HTTP_PROXY=http://127.0.0.1:10809&quot;</span>
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;HTTPS_PROXY=http://127.0.0.1:10809&quot;</span> 
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;NO_PROXY=localhost,127.0.0.0/8,192.168.0.0/16,10.0.0.0/8&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><hr><h4 id="_2\u3001\u6DFB\u52A0-\u963F\u91CCkubernetes-\u4ED3\u5E93\u6E90-\u63A8\u8350" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6DFB\u52A0-\u963F\u91CCkubernetes-\u4ED3\u5E93\u6E90-\u63A8\u8350" aria-hidden="true">#</a> 2\u3001\u6DFB\u52A0 \u963F\u91CCkubernetes \u4ED3\u5E93\u6E90\uFF08\u63A8\u8350\uFF09</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/yum.repos.d/kubernetes.repo</span>
[kubernetes]
name=Kubernetes
baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
enabled=1
gpgcheck=1
repo_gpgcheck=0
gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u6DFB\u52A0-\u534E\u4E3Akubernetes-\u4ED3\u5E93\u6E90-\u4ED3\u5E93\u7EF4\u62A4\u592A\u6162\u4E86" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u6DFB\u52A0-\u534E\u4E3Akubernetes-\u4ED3\u5E93\u6E90-\u4ED3\u5E93\u7EF4\u62A4\u592A\u6162\u4E86" aria-hidden="true">#</a> 3\u3001\u6DFB\u52A0 \u534E\u4E3Akubernetes \u4ED3\u5E93\u6E90\uFF08\u4ED3\u5E93\u7EF4\u62A4\u592A\u6162\u4E86\uFF09</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> -s <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/yum.repos.d/kubernetes.repo</span>
[kubernetes]
name=Kubernetes
baseurl=https://repo.huaweicloud.com/kubernetes/yum/repos/kubernetes-el7-x86_64
enabled=1
gpgcheck=1
repo_gpgcheck=0
gpgkey=https://repo.huaweicloud.com/kubernetes/yum/doc/yum-key.gpg https://repo.huaweicloud.com/kubernetes/yum/doc/rpm-package-key.gpg
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4\u3001\u66F4\u65B0\u7D22\u5F15\u6587\u4EF6\u5E76\u5B89\u88C5-kubernetes" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u66F4\u65B0\u7D22\u5F15\u6587\u4EF6\u5E76\u5B89\u88C5-kubernetes" aria-hidden="true">#</a> 4\u3001\u66F4\u65B0\u7D22\u5F15\u6587\u4EF6\u5E76\u5B89\u88C5 <strong>kubernetes</strong></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum -y update <span class="token operator">&amp;&amp;</span> yum repolist all
yum list kubelet	yum list kube*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>failure: repodata/repomd.xml from kubernetes: [Errno 256] No more mirrors to try.</code></p><p>\u6682\u65F6\u7981\u7528\u5B58\u50A8\u5E93\uFF1Ayum --disablerepo=kubernetes</p><p>\u6C38\u4E45\u7981\u7528\u5B58\u50A8\u5E93\uFF1Ayum-config-manager --disable kubernetes or subscription-manager repos --disable=kubernetes</p><p>\u5982\u679C\u4E0D\u53EF\u7528\uFF0C\u5219\u8DF3\u8FC7\uFF1Ayum-config-manager --save --setopt=kubernetes.skip_if_unavailable=true</p><h4 id="_5\u3001master-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_5\u3001master-\u5B89\u88C5" aria-hidden="true">#</a> 5\u3001master \u5B89\u88C5</h4><p><strong>\u5347\u7EA70\uFF0C\u65B0\u5B89\u88C50\uFF0C\u964D\u7EA73\uFF0C\u5220\u96640\uFF0C\u672A\u5347\u7EA725</strong></p><div class="language-ABAP ext-ABAP line-numbers-mode"><pre class="language-ABAP"><code>apt-get install -y kubeadm=1.21.5-00 kubelet=1.21.5-00 kubectl=1.21.5-00

yum install kubeadm-1.22.9-0 kubelet-1.22.9-0 kubectl-1.22.9-0
yum install --nogpgcheck kubelet-1.22.9-0 kubeadm-1.22.9-0 kubectl-1.22.9-0
\u534E\u4E3A\uFF1Ayum install kubeadm-1.22.9-0 kubelet-1.22.9-0 kubectl-1.22.9-0 --disableexcludes=kubernetes
\u963F\u91CC\uFF1Ayum install kubeadm-1.22.9-0 kubelet-1.22.9-0 kubectl-1.22.9-0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5\u3001node-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_5\u3001node-\u5B89\u88C5" aria-hidden="true">#</a> 5\u3001node \u5B89\u88C5</h4><p>node<code>\u8282\u70B9\u4E00\u822C\u4E0D\u9700\u8981\u5B89\u88C5</code>kubectl</p><blockquote><p>yum install -y kubeadm-1.22.9-0 kubelet-1.22.9-0</p></blockquote><p>\u6267\u884C\uFF1A<em><em>cp /usr/bin/kube</em> /usr/local/bin/</em>*</p><h4 id="\u5378\u8F7D" tabindex="-1"><a class="header-anchor" href="#\u5378\u8F7D" aria-hidden="true">#</a> \u5378\u8F7D</h4><h4 id="\u542F\u52A8-k8s" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8-k8s" aria-hidden="true">#</a> \u542F\u52A8 k8s</h4><blockquote><p>systemctl enable kubelet systemctl disable kubelet</p><p>systemctl start kubelet systemctl stop kubelet</p><p>systemctl status kubelet</p><p>\u53D1\u73B0\uFF1Akubelet.service - kubelet: The Kubernetes Node Agent\uFF0C\u5C5E\u4E8E\u6B63\u5E38\uFF0Ck8s\u8FD8\u6CA1\u6709\u914D\u7F6E</p></blockquote>`,39),Es={href:"https://kubernetes.io/releases/",target:"_blank",rel:"noopener noreferrer"},Rs=s("\u7248\u672C History"),Ss=s(" https://github.com/kubernetes/kubernetes/tree/master/CHANGELOG"),As=n("h3",{id:"b\u3001master-\u90E8\u7F72-kubernetes",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#b\u3001master-\u90E8\u7F72-kubernetes","aria-hidden":"true"},"#"),s(" B\u3001Master \u90E8\u7F72 Kubernetes")],-1),Ns=s("\u7F16\u8F91 master_images.sh\uFF1A\u8BBE\u7F6E\u9700\u8981\u7684\u955C\u50CF\uFF0C\u4ED3\u5E93\u5730\u5740,"),Cs={href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"},Ds=s("\u5B98\u7F51docker\u955C\u50CF\u641C\u7D22"),Ts=t(`<blockquote><p>https://hub.docker.com/u/aiotceo \u3001https://hub.docker.com/u/mirrorgooglecontainers</p><p>swr.myhuaweicloud.com/iivey</p><p>registry.cn-chengdu.aliyuncs.com/jinfang</p><p>registry.aliyuncs.com/google_containers</p></blockquote><h4 id="\u955C\u50CF\u62C9\u53D6" tabindex="-1"><a class="header-anchor" href="#\u955C\u50CF\u62C9\u53D6" aria-hidden="true">#</a> \u955C\u50CF\u62C9\u53D6</h4><p>kubeadm config print init-defaults #\u67E5\u770B\u5B89\u88C5k8s\u7684\u76F8\u5173\u4FE1\u606F kubeadm config images list #\u67E5\u8BE2\u9700\u8981\u7684\u955C\u50CF</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>------------\u5B98\u65B9\u8BB8\u54DF\u554A
kube-apiserver:v1.22.9\uFF08\u6709\uFF09
kube-controller-manager:v1.22.9\uFF08\u6709\uFF09
kube-scheduler:v1.22.9\uFF08\u6709\uFF09
kube-proxy:v1.22.9\uFF08\u6709\uFF09
pause:3.5\uFF08\u6709\uFF09
etcd:3.5.0-0\uFF08\u6709\uFF09
coredns:v1.8.4\uFF08\u6709\uFF09
------------\u5176\u4ED6\u9700\u8981
ks-installer:v3.2.1\uFF08\u6709\uFF09
flannel:v0.16.3
flannelcni-flannel-cni-plugin:v1.0.1
kube-webhook-certgen:v1.5.2
nginx-ingress-controller:v1.1.0

docker rmi registry.aliyuncs.com/google_containers/
docker push registry.cn-chengdu.aliyuncs.com/jinfang/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> login --username<span class="token operator">=</span>\u5C0F\u725B\u7A0B\u5E8Fapp registry.cn-chengdu.aliyuncs.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="master-kubeadm-\u521D\u59CB\u5316" tabindex="-1"><a class="header-anchor" href="#master-kubeadm-\u521D\u59CB\u5316" aria-hidden="true">#</a> master -&gt; kubeadm \u521D\u59CB\u5316<a name="kubeadm init"></a></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm config print init-defaults <span class="token comment">#\u67E5\u770B\u5B89\u88C5k8s\u7684\u76F8\u5173\u4FE1\u606F</span>
kubeadm config images list <span class="token comment">#\u67E5\u8BE2\u9700\u8981\u7684\u955C\u50CF</span>
------------------
kubeadm config images list --kubernetes-version<span class="token operator">=</span>v1.22.9 --image-repository registry.cn-chengdu.aliyuncs.com/jinfang <span class="token comment">#\u8BBE\u7F6Ek8s\u955C\u50CF\u4ED3\u5E93\u4E3A</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm init <span class="token punctuation">\\</span>
--apiserver-advertise-address<span class="token operator">=</span><span class="token number">192.168</span>.101.120 <span class="token punctuation">\\</span>
--control-plane-endpoint<span class="token operator">=</span><span class="token number">192.168</span>.101.120 <span class="token punctuation">\\</span>
--image-repository registry.cn-chengdu.aliyuncs.com/jinfang <span class="token punctuation">\\</span>
--kubernetes-version v1.22.9 <span class="token punctuation">\\</span>
--service-cidr<span class="token operator">=</span><span class="token number">10.96</span>.0.0/16 <span class="token punctuation">\\</span>
--pod-network-cidr<span class="token operator">=</span><span class="token number">10.244</span>.0.0/16
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5F97\u5230-kubeadm-join" tabindex="-1"><a class="header-anchor" href="#\u5F97\u5230-kubeadm-join" aria-hidden="true">#</a> \u5F97\u5230 kubeadm join</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u60A8\u7684Kubernetes\u63A7\u5236\u5E73\u9762\u5DF2\u6210\u529F\u521D\u59CB\u5316\uFF01
\u8981\u5F00\u59CB\u4F7F\u7528\u7FA4\u96C6\uFF0C\u60A8\u9700\u8981\u4EE5\u666E\u901A\u7528\u6237\u8EAB\u4EFD\u8FD0\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A
    <span class="token function">mkdir</span> -p <span class="token environment constant">$HOME</span>/.kube
    <span class="token function">sudo</span> <span class="token function">cp</span> -i /etc/kubernetes/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
    <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config

\u6216\u8005\uFF0C\u5982\u679C\u60A8\u662Froot\u7528\u6237\uFF0C\u5219\u53EF\u4EE5\u8FD0\u884C\uFF1A
  <span class="token builtin class-name">export</span> <span class="token assign-left variable">KUBECONFIG</span><span class="token operator">=</span>/etc/kubernetes/admin.conf
  
\u60A8\u73B0\u5728\u5E94\u8BE5\u5728\u96C6\u7FA4\u4E0A\u90E8\u7F72\u4E00\u4E2Apod\u7F51\u7EDC\u3002
\u4F7F\u7528\u4E0B\u5217\u9009\u9879\u4E4B\u4E00\u8FD0\u884C\u201Ckubectl apply-f<span class="token punctuation">[</span>podnetwork<span class="token punctuation">]</span>.yaml\u201D\uFF1A
https://kubernetes.io/docs/concepts/cluster-administration/addons/

<span class="token comment">##### master</span>
\u73B0\u5728\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u590D\u5236\u8BC1\u4E66\u9881\u53D1\u673A\u6784\u6765\u52A0\u5165\u4EFB\u610F\u6570\u91CF\u7684\u63A7\u5236\u5E73\u9762\u8282\u70B9
\u548C\u6BCF\u4E2A\u8282\u70B9\u4E0A\u7684\u670D\u52A1\u5E10\u6237\u5BC6\u94A5\uFF0C\u7136\u540E\u4EE5root\u7528\u6237\u8EAB\u4EFD\u8FD0\u884C\u4EE5\u4E0B\u64CD\u4F5C\uFF1A

kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.101.120:6443 --token 7yjap0.zrq216lw4tj3jhnz <span class="token punctuation">\\</span>
        --discovery-token-ca-cert-hash sha256:735d57dd43fad0851902c749d8e15d2e9c41e6ec8eec5916fdfb7f739895093b <span class="token punctuation">\\</span>
        --control-plane

\u7136\u540E\uFF0C\u5728\u6BCF\u4E2A\u8282\u70B9\u4E0A\u4EE5root\u8EAB\u4EFD\u8FD0\u884C\u4EE5\u4E0B\u64CD\u4F5C\uFF0C\u53EF\u4EE5\u52A0\u5165\u4EFB\u610F\u6570\u91CF\u7684\u5DE5\u4F5C\u8282\u70B9\uFF1A
<span class="token comment">###### node</span>
<span class="token function">su</span> root
kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.101.120:6443 --token 7yjap0.zrq216lw4tj3jhnz <span class="token punctuation">\\</span>
        --discovery-token-ca-cert-hash sha256:735d57dd43fad0851902c749d8e15d2e9c41e6ec8eec5916fdfb7f739895093b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="kubectl-\u547D\u4EE4\u7684\u81EA\u52A8\u8865\u5168\u529F\u80FD-\u6240\u6709\u7684\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#kubectl-\u547D\u4EE4\u7684\u81EA\u52A8\u8865\u5168\u529F\u80FD-\u6240\u6709\u7684\u8282\u70B9" aria-hidden="true">#</a> kubectl \u547D\u4EE4\u7684\u81EA\u52A8\u8865\u5168\u529F\u80FD\uFF08\u6240\u6709\u7684\u8282\u70B9\uFF09</h4><blockquote><p>echo &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt; ~/.bashrc</p></blockquote><h4 id="\u91CD\u542F\u540E\u51FA\u73B0-the-connection-to-the-server-localhost-8080-was-refused-did-you-specify-the-right-host-or-port" tabindex="-1"><a class="header-anchor" href="#\u91CD\u542F\u540E\u51FA\u73B0-the-connection-to-the-server-localhost-8080-was-refused-did-you-specify-the-right-host-or-port" aria-hidden="true">#</a> \u91CD\u542F\u540E\u51FA\u73B0\uFF1A<code>The connection to the server localhost:8080 was refused - did you specify the right host or port?</code></h4><blockquote><p>\u89E3\u51B3\uFF1Ahttps://blog.csdn.net/qq_42476834/article/details/124730955</p><p><a href="#ssh">ssh\u514D\u5BC6\u767B\u5F55\u8BBF\u95EE</a></p></blockquote><h4 id="\u5C06\u4E3B\u8282\u70B9-master-\u4E2D\u7684-etc-kubernetes-admin-conf-\u6587\u4EF6\u62F7\u8D1D\u5230\u4ECE\u8282\u70B9-node-\u76F8\u540C\u76EE\u5F55\u4E0B" tabindex="-1"><a class="header-anchor" href="#\u5C06\u4E3B\u8282\u70B9-master-\u4E2D\u7684-etc-kubernetes-admin-conf-\u6587\u4EF6\u62F7\u8D1D\u5230\u4ECE\u8282\u70B9-node-\u76F8\u540C\u76EE\u5F55\u4E0B" aria-hidden="true">#</a> \u5C06\u4E3B\u8282\u70B9\uFF08master\uFF09\u4E2D\u7684\u201C/etc/kubernetes/admin.conf\u201D\u6587\u4EF6\u62F7\u8D1D\u5230\u4ECE\u8282\u70B9\uFF08node\uFF09\u76F8\u540C\u76EE\u5F55\u4E0B</h4><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>scp /etc/kubernetes/admin.conf root@192.168.101.121:/etc/kubernetes/ &amp;&amp; \\
scp /etc/kubernetes/admin.conf root@192.168.101.122:/etc/kubernetes/

echo &quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot; &gt;&gt; ~/.bash_profile
scp ~/.bash_profile root@192.168.101.121:/root/ &amp;&amp; \\
scp ~/.bash_profile root@192.168.101.122:/root/

source ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="\u89E3\u51B3\u7AEF\u53E3\u5360\u7528-kubeadm-reset" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3\u7AEF\u53E3\u5360\u7528-kubeadm-reset" aria-hidden="true">#</a> \u89E3\u51B3\u7AEF\u53E3\u5360\u7528\uFF1Akubeadm reset</h4><h3 id="c\u3001\u5C06\u4ECE\u8282\u70B9-node-\u52A0\u5165-kubernetes-master-\u96C6\u7FA4\u4E2D" tabindex="-1"><a class="header-anchor" href="#c\u3001\u5C06\u4ECE\u8282\u70B9-node-\u52A0\u5165-kubernetes-master-\u96C6\u7FA4\u4E2D" aria-hidden="true">#</a> C\u3001\u5C06\u4ECE\u8282\u70B9\uFF08node\uFF09\u52A0\u5165 Kubernetes \uFF08Master\uFF09\u96C6\u7FA4\u4E2D</h3><p>su root \u5728\u6BCF\u4E2A\u6839\u8282\u70B9\u4E0A\u8FD0\u884C\u4EE5\u4E0B\u64CD\u4F5C\uFF1A</p><p>[\u67E5\u770B kubeadm init](#kubeadm init)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">su</span> root
kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.101.120:6443 --token yz5tlv.fwg52dzz0g4w6eyk <span class="token punctuation">\\</span>
        --discovery-token-ca-cert-hash sha256:4acb1c30f7cd2c1dab84de2dd7d9768e931ed3e2cfc8798171fd2dd3260a9e81
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node-121 ~<span class="token punctuation">]</span><span class="token comment"># kubeadm join 192.168.101.120:6443 --token 971p07.4h9ljb93kcm471bd --discovery-token-ca-cert-hash sha256:2f02b1e11049f9cbe3784ed6a78f1f7f4fc794d421eabe642335bc55393ea61b</span>

<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> \u8FDB\u884C\u98DE\u884C\u524D\u68C0\u67E5
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> \u4ECE\u96C6\u7FA4\u4E2D\u8BFB\u53D6\u914D\u7F6E<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> \u4EC5\u4F9B\u53C2\u8003\uFF1A\u60A8\u53EF\u4EE5\u67E5\u770B\u6B64\u914D\u7F6E\u6587\u4EF6<span class="token string">&#39;kubectl -n kube-system get cm kubeadm-config -o yaml&#39;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> \u5C06 kubelet \u914D\u7F6E\u5199\u5165\u6587\u4EF6 <span class="token string">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> \u5C06\u5E26\u6709\u6807\u5FD7\u7684 kubelet \u73AF\u5883\u6587\u4EF6\u5199\u5165\u6587\u4EF6 <span class="token string">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> \u542F\u52A8 kubelet
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> \u7B49\u5F85 kubelet \u6267\u884C TLS Bootstrap<span class="token punctuation">..</span>.

\u6B64\u8282\u70B9\u5DF2\u52A0\u5165\u96C6\u7FA4\uFF1A
* \u8BC1\u4E66\u7B7E\u540D\u8BF7\u6C42\u5DF2\u53D1\u9001\u5230 apiserver \u5E76\u6536\u5230\u54CD\u5E94\u3002
* Kubelet  \u88AB\u544A\u77E5\u65B0\u7684\u5B89\u5168\u8FDE\u63A5\u7EC6\u8282\u3002

Run <span class="token string">&#39;kubectl get nodes&#39;</span> \u5728\u63A7\u5236\u5E73\u9762\u4E0A\u67E5\u770B\u8BE5\u8282\u70B9\u52A0\u5165\u96C6\u7FA4\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="kubeadm-config-\u7565\u8FC7-\u563F\u563F\u563F" tabindex="-1"><a class="header-anchor" href="#kubeadm-config-\u7565\u8FC7-\u563F\u563F\u563F" aria-hidden="true">#</a> kubeadm-config\uFF08\u7565\u8FC7 \u563F\u563F\u563F\uFF09</h4><p>kubectl -n kube-system get cm kubeadm-config -o yaml</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>apiVersion<span class="token operator">:</span> v1
data<span class="token operator">:</span>
  ClusterConfiguration<span class="token operator">:</span> |
    apiServer<span class="token operator">:</span>
      extraArgs<span class="token operator">:</span>
        authorization-mode<span class="token operator">:</span> Node<span class="token punctuation">,</span>RBAC
      timeoutForControlPlane<span class="token operator">:</span> 4m0s
    apiVersion<span class="token operator">:</span> kubeadm.k8s.io/v1beta3
    certificatesDir<span class="token operator">:</span> /etc/kubernetes/pki
    clusterName<span class="token operator">:</span> kubernetes
    controlPlaneEndpoint<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.120</span><span class="token operator">:</span><span class="token number">6443</span>
    controllerManager<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    dns<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    etcd<span class="token operator">:</span>
      local<span class="token operator">:</span>
        dataDir<span class="token operator">:</span> /var/lib/etcd
    imageRepository<span class="token operator">:</span> registry.cn-chengdu.aliyuncs.com/jinfang
    kind<span class="token operator">:</span> ClusterConfiguration
    kubernetesVersion<span class="token operator">:</span> v1.<span class="token number">22.9</span>
    networking<span class="token operator">:</span>
      dnsDomain<span class="token operator">:</span> cluster.local
      podSubnet<span class="token operator">:</span> <span class="token number">10.244</span>.<span class="token number">0.0</span>/<span class="token number">16</span>
      serviceSubnet<span class="token operator">:</span> <span class="token number">10.96</span>.<span class="token number">0.0</span>/<span class="token number">16</span>
    scheduler<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
kind<span class="token operator">:</span> ConfigMap
metadata<span class="token operator">:</span>
  creationTimestamp<span class="token operator">:</span> <span class="token string">&quot;2022-05-12T03:07:48Z&quot;</span>
  name<span class="token operator">:</span> kubeadm-config
  namespace<span class="token operator">:</span> kube-system
  resourceVersion<span class="token operator">:</span> <span class="token string">&quot;197&quot;</span>
  uid<span class="token operator">:</span> b4929ea8-6f0d-4a20-a24c-ef1a2e104360
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="token\u8FC7\u671F-\u91CD\u65B0\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#token\u8FC7\u671F-\u91CD\u65B0\u8BBE\u7F6E" aria-hidden="true">#</a> token\u8FC7\u671F\uFF0C\u91CD\u65B0\u8BBE\u7F6E</h4><blockquote><p>kubeadm token list</p><p>kubeadm token create --print-join-command</p><p>kubeadm token create --ttl 0 --print-join-command</p></blockquote><h3 id="d\u3001master-\u90E8\u7F72\u5BB9\u5668\u7F51\u7EDC\u63D2\u4EF6-flannel" tabindex="-1"><a class="header-anchor" href="#d\u3001master-\u90E8\u7F72\u5BB9\u5668\u7F51\u7EDC\u63D2\u4EF6-flannel" aria-hidden="true">#</a> D\u3001master \u90E8\u7F72\u5BB9\u5668\u7F51\u7EDC\u63D2\u4EF6 Flannel</h3><p>\u53C2\u8003\uFF1Ahttps://kubernetes.io/zh/docs/concepts/cluster-administration/addons/</p><h4 id="\u914D\u7F6E\u7F51\u7EDC\u7B56\u7565-flannel" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u7F51\u7EDC\u7B56\u7565-flannel" aria-hidden="true">#</a> \u914D\u7F6E\u7F51\u7EDC\u7B56\u7565 Flannel</h4>`,30),Is=s("root\u7528\u6237\uFF1A\u4F7F\u7528"),Os={href:"https://github.com/flannel-io/flannel#deploying-flannel-manually",target:"_blank",rel:"noopener noreferrer"},zs=s("Flannel"),Vs=s(" \u914D\u7F6E\uFF0C\u6267\u884C\uFF1A"),Ms=t(`<blockquote><p>https://gitee.com/k8s_s/flannel/blob/master/Documentation/kube-flannel.yml</p><p>https://gitee.com/k8s_s/flannel/blob/v0.17.0/Documentation/kube-flannel.yml</p><p>kubectl apply -f kube-flannel-0.17.0.yml</p><p>\u5220\u9664\uFF1Akubectl delete -f kube-flannel-0.17.0.yml</p></blockquote><h5 id="kube-flannel-yml-\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#kube-flannel-yml-\u5185\u5BB9" aria-hidden="true">#</a> kube-flannel.yml \u5185\u5BB9</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">### v0.15.1-v0.16.1\uFF1A\uFF1A\uFF1A\uFF1A\uFF1A\uFF1Av1.0.0\u3001v0.15.1</span>
<span class="token comment">### v0.16.2-v0.16.3\uFF1A\uFF1A\uFF1A\uFF1A\uFF1A\uFF1Av1.0.1\u3001v0.16.1</span>
<span class="token comment">### v0.17.0\uFF1A\uFF1A\uFF1A\uFF1A\uFF1A\uFF1Av1.0.1\u3001v0.16.3</span>

dkpull rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.0.1
dkpull rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">:</span>v0.16.3
image\u4FEE\u6539\uFF1A
registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.0.1
registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/flannel<span class="token punctuation">:</span>v0.16.3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),Gs={id:"kubectl-\u547D\u4EE4\u57FA\u7840",tabindex:"-1"},Ls=n("a",{class:"header-anchor",href:"#kubectl-\u547D\u4EE4\u57FA\u7840","aria-hidden":"true"},"#",-1),Ks=s(),Bs={href:"https://blog.csdn.net/qq_42476834/article/details/121781274",target:"_blank",rel:"noopener noreferrer"},Hs=s("kubectl \u547D\u4EE4\u57FA\u7840"),Ws=t(`<h4 id="\u67E5\u770B" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B" aria-hidden="true">#</a> \u67E5\u770B</h4><p>\u5217\u51FA\u6240\u6709\u8FD0\u884C\u7684Pod\u4FE1\u606F</p><p>\u5217\u51FAPod\u4EE5\u53CA\u8FD0\u884CPod\u8282\u70B9\u4FE1\u606F\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get pods</span>
No resources found <span class="token keyword">in</span> default namespace.
<span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get pods -o wide</span>
No resources found <span class="token keyword">in</span> default namespace.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u6240\u4EE5\u8282\u70B9 kg nodes</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kg nodes</span>
NAME         STATUS   ROLES                  AGE   VERSION
master-120   Ready    control-plane,master   63m   v1.22.9
node-121     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 58m   v1.22.9
node-122     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 58m   v1.22.9
node-123     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 58m   v1.22.9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u547D\u540D\u7A7A\u95F4 kubectl get ns</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get ns</span>
NAME              STATUS   AGE
default           Active   63m
kube-node-lease   Active   63m
kube-public       Active   63m
kube-system       Active   63m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B pod \u547D\u540D\u7A7A\u95F4 kubectl get pods --all-namespaces</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get pods --all-namespaces</span>
NAMESPACE     NAME                                 READY   STATUS    RESTARTS   AGE
kube-system   coredns-687d9f64f-dlqq9              <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-system   coredns-687d9f64f-hqch5              <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-system   etcd-master-120                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-system   kube-apiserver-master-120            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-system   kube-controller-manager-master-120   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-system   kube-flannel-ds-44l8g                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          47m
kube-system   kube-flannel-ds-cf2zd                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          47m
kube-system   kube-flannel-ds-tkbnh                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          47m
kube-system   kube-flannel-ds-wxhk4                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          47m
kube-system   kube-proxy-4rt2z                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-system   kube-proxy-86jzc                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          58m
kube-system   kube-proxy-dmz5t                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          58m
kube-system   kube-proxy-sz9q2                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          58m
kube-system   kube-scheduler-master-120            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl get pods -n kube-system</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get pods -n kube-system</span>
NAME                                 READY   STATUS    RESTARTS   AGE
coredns-687d9f64f-dlqq9              <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
coredns-687d9f64f-hqch5              <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
etcd-master-120                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-apiserver-master-120            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-controller-manager-master-120   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-flannel-ds-44l8g                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
kube-flannel-ds-cf2zd                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
kube-flannel-ds-tkbnh                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
kube-flannel-ds-wxhk4                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
kube-proxy-4rt2z                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
kube-proxy-86jzc                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          59m
kube-proxy-dmz5t                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          59m
kube-proxy-sz9q2                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          59m
kube-scheduler-master-120            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          63m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl get pods -n kube-system -o wide</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get pods -n kube-system -o wide</span>
NAME                                 READY   STATUS    RESTARTS   AGE   IP                NODE         NOMINATED NODE   READINESS GATES
coredns-687d9f64f-dlqq9              <span class="token number">1</span>/1     Running   <span class="token number">0</span>          65m   <span class="token number">10.244</span>.0.2        master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
coredns-687d9f64f-hqch5              <span class="token number">1</span>/1     Running   <span class="token number">0</span>          65m   <span class="token number">10.244</span>.0.3        master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
etcd-master-120                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          65m   <span class="token number">192.168</span>.101.120   master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-apiserver-master-120            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          65m   <span class="token number">192.168</span>.101.120   master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-controller-manager-master-120   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          65m   <span class="token number">192.168</span>.101.120   master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-flannel-ds-44l8g                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          49m   <span class="token number">192.168</span>.101.123   node-123     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-flannel-ds-cf2zd                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          49m   <span class="token number">192.168</span>.101.121   node-121     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-flannel-ds-tkbnh                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          49m   <span class="token number">192.168</span>.101.120   master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-flannel-ds-wxhk4                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          49m   <span class="token number">192.168</span>.101.122   node-122     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-proxy-4rt2z                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          65m   <span class="token number">192.168</span>.101.120   master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-proxy-86jzc                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          60m   <span class="token number">192.168</span>.101.123   node-123     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-proxy-dmz5t                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          60m   <span class="token number">192.168</span>.101.122   node-122     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-proxy-sz9q2                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          60m   <span class="token number">192.168</span>.101.121   node-121     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-scheduler-master-120            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          65m   <span class="token number">192.168</span>.101.120   master-120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>kube-flannel-ds-xxxx \u5FC5\u987B\u8FD0\u884COK</strong></p><h3 id="e\u3001\u53EF\u89C6\u5316\u67E5\u770B-kubernetes\u8D44\u6E90" tabindex="-1"><a class="header-anchor" href="#e\u3001\u53EF\u89C6\u5316\u67E5\u770B-kubernetes\u8D44\u6E90" aria-hidden="true">#</a> E\u3001\u53EF\u89C6\u5316\u67E5\u770B Kubernetes\u8D44\u6E90</h3><p>\u6587\u6863\uFF1Ahttps://kuboard.cn/install/install-k8s-dashboard.html</p><h4 id="_1\u3001dashboard-\u4E0D\u63A8\u8350" tabindex="-1"><a class="header-anchor" href="#_1\u3001dashboard-\u4E0D\u63A8\u8350" aria-hidden="true">#</a> 1\u3001dashboard\uFF08\u4E0D\u63A8\u8350\uFF09</h4><blockquote><p>https://github.com/kubernetes/dashboard/releases/tag/v2.4.0</p><p>kubectl apply -f https://gitee.com/k8s_s/dashboard1/blob/v2.4.0/aio/deploy/recommended.yaml -o yaml &gt; dashboard.yaml</p></blockquote><h4 id="_2\u3001kubesphere-\u63A8\u8350" tabindex="-1"><a class="header-anchor" href="#_2\u3001kubesphere-\u63A8\u8350" aria-hidden="true">#</a> 2\u3001KubeSphere\uFF08\u63A8\u8350\uFF09</h4><p><a href="#KubeSphere">\u8DF3\u8F6C\u5230 KubeSphere \u5B89\u88C5</a></p>`,21),Fs={href:"https://github.com/kubesphere/kubesphere",target:"_blank",rel:"noopener noreferrer"},Us=s("github kubesphere"),Xs=s("\uFF0Cstar: 9.8+K"),Qs=n("h4",{id:"_3\u3001kuboard",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3\u3001kuboard","aria-hidden":"true"},"#"),s(" 3\u3001Kuboard")],-1),Js=n("p",null,"https://kuboard.cn/overview/",-1),Ys={href:"https://github.com/eip-work/kuboard-press",target:"_blank",rel:"noopener noreferrer"},Zs=s("Github kuboard"),$s=s(" stars 14.5+K"),na=t(`<h4 id="_4\u3001kubeoperator" tabindex="-1"><a class="header-anchor" href="#_4\u3001kubeoperator" aria-hidden="true">#</a> 4\u3001KubeOperator</h4><hr><hr><h2 id="_4-\u3001k8s-\u5165\u95E8" tabindex="-1"><a class="header-anchor" href="#_4-\u3001k8s-\u5165\u95E8" aria-hidden="true">#</a> 4\uFF09\u3001k8s \u5165\u95E8</h2><p>\u540E\u671F\u76F4\u63A5\u5230\u8FD9\u91CC\u5F00\u59CB\u5427\uFF1A<a href="#apps+expose-port"> \u4F7F\u7528 [apps +\u66B4\u9732Service port] \u7684 yaml \u683C\u5F0F </a></p><h3 id="\u8D44\u6E90\u5305\u62EC-\u4E0D\u533A\u5206\u5927\u5C0F\u5199-pod-po-service-svc-replication-controller-rc-deployment-deploy-replica-set-rs" tabindex="-1"><a class="header-anchor" href="#\u8D44\u6E90\u5305\u62EC-\u4E0D\u533A\u5206\u5927\u5C0F\u5199-pod-po-service-svc-replication-controller-rc-deployment-deploy-replica-set-rs" aria-hidden="true">#</a> \u8D44\u6E90\u5305\u62EC(\u4E0D\u533A\u5206\u5927\u5C0F\u5199)\uFF1Apod\uFF08po\uFF09\uFF0Cservice\uFF08svc\uFF09\uFF0Creplication controller\uFF08rc\uFF09\uFF0Cdeployment\uFF08deploy\uFF09\uFF0Creplica set\uFF08rs\uFF09</h3><p>\u5177\u4F53\u547D\u4EE4\u8BF7\u770B\uFF1A<a href="#k8s-alias">k8s-alias</a></p><h3 id="kubectl-get-po" tabindex="-1"><a class="header-anchor" href="#kubectl-get-po" aria-hidden="true">#</a> kubectl get po</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get po</span>
NAME                      READY   STATUS    RESTARTS      AGE
nginx-689b55fcd-2c8v8     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
nginx-689b55fcd-5qpkp     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
nginx-689b55fcd-gpdqz     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
tomcat-549f8d66bc-bln66   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
tomcat-549f8d66bc-rqhvm   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
tomcat-549f8d66bc-zkc94   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubectl-get-svc" tabindex="-1"><a class="header-anchor" href="#kubectl-get-svc" aria-hidden="true">#</a> kubectl get svc</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get svc</span>
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>    AGE
kubernetes   ClusterIP   <span class="token number">10.96</span>.0.1      <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP    29h
nginx        ClusterIP   <span class="token number">10.96</span>.99.230   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8000</span>/TCP   19h
tomcat       ClusterIP   <span class="token number">10.96</span>.102.96   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8001</span>/TCP   19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubectl-get-rc" tabindex="-1"><a class="header-anchor" href="#kubectl-get-rc" aria-hidden="true">#</a> kubectl get rc</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>No resources found <span class="token keyword">in</span> default namespace.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="kubectl-get-deploy" tabindex="-1"><a class="header-anchor" href="#kubectl-get-deploy" aria-hidden="true">#</a> kubectl get deploy</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get deploy</span>
NAME     READY   UP-TO-DATE   AVAILABLE   AGE
nginx    <span class="token number">3</span>/3     <span class="token number">3</span>            <span class="token number">3</span>           19h
tomcat   <span class="token number">3</span>/3     <span class="token number">3</span>            <span class="token number">3</span>           19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubectl-get-rs" tabindex="-1"><a class="header-anchor" href="#kubectl-get-rs" aria-hidden="true">#</a> kubectl get rs</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get rs</span>
NAME                DESIRED   CURRENT   READY   AGE
nginx-689b55fcd     <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>       19h
tomcat-549f8d66bc   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>       19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="a\u3001\u57FA\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#a\u3001\u57FA\u672C\u547D\u4EE4" aria-hidden="true">#</a> A\u3001\u57FA\u672C\u547D\u4EE4</h3><h4 id="_1\u3001\u521B\u5EFAapps-create-deployment" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u521B\u5EFAapps-create-deployment" aria-hidden="true">#</a> 1\u3001\u521B\u5EFAapps\uFF1Acreate deployment</h4><p>master\u5B89\u88C5tomcat</p><h5 id="kubectl-create-deployment-tomcat6-image-tomcat-6-0-53-jre8" tabindex="-1"><a class="header-anchor" href="#kubectl-create-deployment-tomcat6-image-tomcat-6-0-53-jre8" aria-hidden="true">#</a> kubectl create deployment tomcat6 --image=tomcat:6.0.53-jre8</h5><h4 id="_2\u3001\u67E5\u770B-kg-all" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u67E5\u770B-kg-all" aria-hidden="true">#</a> 2\u3001\u67E5\u770B kg all</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>a1@node01:~/k8s$ kubectl get all
NAME                           READY   STATUS              RESTARTS  		 AGE
pod/tomcat6-56fcc999cb-47vfm   <span class="token number">0</span>/1     ContainerCreating      <span class="token number">0</span>      		 23s
NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>   		 AGE
service/kubernetes   ClusterIP   <span class="token number">10.96</span>.0.1    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP  		 115m
NAME                      READY   UP-TO-DATE   AVAILABLE   					AGE
deployment.apps/tomcat6   <span class="token number">0</span>/1     	 <span class="token number">1</span>             <span class="token number">0</span>           				23s
NAME                                 DESIRED   CURRENT   READY  			AGE
replicaset.apps/tomcat6-56fcc999cb   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">0</span>      			23s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u67E5\u770B\u8BE6\u7EC6-kg-all-o-wide" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u67E5\u770B\u8BE6\u7EC6-kg-all-o-wide" aria-hidden="true">#</a> 3\u3001\u67E5\u770B\u8BE6\u7EC6 kg all -o wide</h4><p>tomcat6\u5728\u8282\u70B9node2---docker\u4E0B\u8F7D\u955C\u50CFok</p><p><img src="`+g+'" alt="image-20211207225032232"></p><p>\u5728node2\u67E5\u770B</p><p><img src="'+h+'" alt="image-20211207225209670"></p><p><img src="'+y+'" alt="image-20211207225504118"></p><h4 id="_4\u3001\u67E5\u770B-kg-pod-o-wide" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u67E5\u770B-kg-pod-o-wide" aria-hidden="true">#</a> 4\u3001\u67E5\u770B kg pod -o wide</h4><p><img src="'+f+'" alt="image-20211207225722559"></p><h5 id="node02\u6A21\u62DF\u5B95\u673A-\u770B\u770Bk8s\u600E\u4E48\u5904\u7406-dkstop\u4E0Enode02\u5173\u673A" tabindex="-1"><a class="header-anchor" href="#node02\u6A21\u62DF\u5B95\u673A-\u770B\u770Bk8s\u600E\u4E48\u5904\u7406-dkstop\u4E0Enode02\u5173\u673A" aria-hidden="true">#</a> node02\u6A21\u62DF\u5B95\u673A\uFF0C\u770B\u770Bk8s\u600E\u4E48\u5904\u7406\uFF08dkstop\u4E0Enode02\u5173\u673A\uFF09</h5><p><img src="'+x+'" alt="image-20211207230129356"></p><p>\u53D1\u73B0node2\u8282\u70B9\u5DF2\u7ECF\u4E0D\u884C\u4E86\uFF0C\u5168\u90E8\u538B\u529B\u5230\u4E86node3</p><p><img src="'+_+'" alt="image-20211207231251942"></p><p><img src="'+q+'" alt="image-20211207231314338"></p><h5 id="\u91CD\u542F-node02" tabindex="-1"><a class="header-anchor" href="#\u91CD\u542F-node02" aria-hidden="true">#</a> \u91CD\u542F node02</h5><p><img src="'+P+`" alt="image-20211207231849655"></p><h4 id="_5\u3001\u66B4\u9732-port-expose" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u66B4\u9732-port-expose" aria-hidden="true">#</a> 5\u3001\u66B4\u9732 port \uFF1Aexpose</h4><blockquote><p>expose (-f FILENAME | TYPE NAME) [--port=port] [--protocol=TCP|UDP] [--target-port=number-or-name] [--name=name] [--external-ip=external-ip-of-service] [--type=type]</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl expose rc nginx --port<span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8080</span>
kubectl expose deploy tomcat6 --port<span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8080</span> --type<span class="token operator">=</span>NodePort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+w+'" alt="image-20211208174133284"></p><p><img src="'+j+`" alt="image-20211208175833308"></p><p>http://192.168.101.121:31002/</p><h4 id="_6\u3001\u4FEE\u6539-port-edit" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u4FEE\u6539-port-edit" aria-hidden="true">#</a> 6\u3001\u4FEE\u6539 port\uFF1Aedit</h4><blockquote><p>kubectl edit svc tomcat6 ###\u4FEE\u6539app\u5E94\u7528\u670D\u52A1\u7684port</p><p>kubectl edit deploy tomcat6 ### \u4FEE\u6539app\u5E94\u7528</p></blockquote><h4 id="_7\u3001\u6269\u5BB9\u6216\u7F29\u5BB9-scale" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u6269\u5BB9\u6216\u7F29\u5BB9-scale" aria-hidden="true">#</a> 7\u3001\u6269\u5BB9\u6216\u7F29\u5BB9\uFF1Ascale</h4><blockquote><p>scale [--resource-version=version] [--current-replicas=count] --replicas=COUNT (-f FILENAME | TYPE NAME)</p></blockquote><p>\u5C06\u540D\u4E3Atomcat6\u4E2D\u7684pod\u526F\u672C\u6570\u8BBE\u7F6E\u4E3A3\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kubectl scale --replicas=3 deployment tomcat6
kg pods -o wide
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+E+`" alt="image-20211208180527896"></p><p>\u5982\u679C\u5F53\u524D\u526F\u672C\u6570\u4E3A2\uFF0C\u5219\u5C06\u5176\u6269\u5C55\u81F33\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kubectl scale --current-replicas=2 --replicas=3 deployment/tomcat6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_8\u3001\u5220\u9664\u4EE5-create-deployment-\u90E8\u7F72\u7684-apps\u3001service-delete" tabindex="-1"><a class="header-anchor" href="#_8\u3001\u5220\u9664\u4EE5-create-deployment-\u90E8\u7F72\u7684-apps\u3001service-delete" aria-hidden="true">#</a> 8\u3001\u5220\u9664\u4EE5 create deployment \u90E8\u7F72\u7684(apps\u3001service) delete</h4><blockquote><p>kubectl get all</p><p>kubectl delete deployment.apps/tomcat6</p><p>kubectl delete service/tomcat6</p></blockquote><p><img src="`+R+`" alt="image-20211208181306441"></p><h4 id="_9\u3001\u90E8\u7F72-\u5220\u9664\u4EE5-yaml-\u90E8\u7F72\u7684\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_9\u3001\u90E8\u7F72-\u5220\u9664\u4EE5-yaml-\u90E8\u7F72\u7684\u5B9E\u4F8B" aria-hidden="true">#</a> 9\u3001\u90E8\u7F72&amp;\u5220\u9664\u4EE5 yaml \u90E8\u7F72\u7684\u5B9E\u4F8B</h4><p><a href="#xxx.yaml">\u67E5\u770B xxx.yaml</a></p><h5 id="kubectl-apply-f-xxx-yaml" tabindex="-1"><a class="header-anchor" href="#kubectl-apply-f-xxx-yaml" aria-hidden="true">#</a> kubectl apply -f xxx.yaml</h5><h5 id="kubectl-delete-f-xxx-yaml" tabindex="-1"><a class="header-anchor" href="#kubectl-delete-f-xxx-yaml" aria-hidden="true">#</a> kubectl delete -f xxx.yaml</h5><hr><hr><h3 id="b\u3001yaml-\u57FA\u672C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#b\u3001yaml-\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a> B\u3001yaml &amp; \u57FA\u672C\u4F7F\u7528</h3><p>https://kubernetes.io/zh/docs/reference/kubectl/overview/</p><p>\u540E\u671F\u4F7F\u7528\uFF1A<a href="#apps+expose-port"># apps+expose-port</a>\uFF0C\u800C\u4E0D\u662F\u4F7F\u7528 <a href="#%E5%88%9D%E7%BA%A7%E4%BD%BF%E7%94%A8yaml%E5%88%9B%E5%BB%BAapps"># \u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps</a></p><h4 id="pod-\u6A21\u7248" tabindex="-1"><a class="header-anchor" href="#pod-\u6A21\u7248" aria-hidden="true">#</a> Pod \u6A21\u7248</h4><p>\u4E00\u822C\u4E0D\u4F1A\u81EA\u5DF1\u521B\u5EFA</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat9<span class="token punctuation">-</span><span class="token number">02</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat9<span class="token punctuation">-</span><span class="token number">02</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat9<span class="token punctuation">-</span><span class="token number">02</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="deployment-\u6A21\u7248" tabindex="-1"><a class="header-anchor" href="#deployment-\u6A21\u7248" aria-hidden="true">#</a> Deployment \u6A21\u7248</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token comment">#replicas\u590D\u5236\u51E0\u4EFD</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span> 
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token comment">#Pod\u6A21\u677F</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
  <span class="token comment">#Pod\u6A21\u677F</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
 	<span class="token comment">#Pod\u6A21\u677F\u89C4\u7EA6\uFF1Aspec-\u6307\u793A Pods \u8FD0\u884C\u4E00\u4E2A nginx \u5BB9\u5668</span>
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.14.2
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="service-\u6A21\u7248" tabindex="-1"><a class="header-anchor" href="#service-\u6A21\u7248" aria-hidden="true">#</a> Service \u6A21\u7248</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601<span class="token punctuation">-</span>xxx<span class="token punctuation">-</span>jp3sk
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token comment">#- NodePort: 30965</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1\u3001\u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps-\u540E\u671F\u4E0D\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps-\u540E\u671F\u4E0D\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F" aria-hidden="true">#</a> 1\u3001\u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps<a name="\u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps"></a>\uFF08\u540E\u671F\u4E0D\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F\uFF09</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4F7F\u7528 example-service.yaml \u4E2D\u7684\u5B9A\u4E49\u521B\u5EFA\u670D\u52A1\u3002</span>
kubectl apply -f example-service.yaml

<span class="token comment"># \u4F7F\u7528 example-controller.yaml \u4E2D\u7684\u5B9A\u4E49\u521B\u5EFA replication controller\u3002</span>
kubectl apply -f example-controller.yaml

<span class="token comment"># \u4F7F\u7528 &lt;directory&gt; \u8DEF\u5F84\u4E0B\u7684\u4EFB\u610F .yaml, .yml, \u6216 .json \u6587\u4EF6 \u521B\u5EFA\u5BF9\u8C61\u3002</span>
kubectl apply -f <span class="token operator">&lt;</span>directory<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u5E76\u4FDD\u5B58 Deployment \u7684 yaml \u6587\u4EF6\uFF08--dry-run\uFF09</p><blockquote><p>--dry-run\uFF1A\u4EC5\u67E5\u770B\u4E0D\u8FD0\u884C</p><p>kubectl create deployment \u670D\u52A1\u540D\u79F0--image=\u955C\u50CF\u540D\u79F0 --dry-run -o yaml &gt; \u4FDD\u5B58\u76EE\u6807</p><p>kubectl create deployment tomcat6 --image=tomcat:6.0.53-jre8 --dry-run -o yaml &gt; tomcat6.yaml</p></blockquote><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA Deployment apps\uFF1Akubectl apply -f tomcat6.yaml</p><p>kubectl get deployments</p><p>\u66F4\u65B0 Deployment</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl <span class="token builtin class-name">set</span> image deployment.v1.apps/tomcat6 <span class="token assign-left variable">tomcat</span><span class="token operator">=</span>tomcat:9.0.53-jre8
\u6216
kubectl <span class="token builtin class-name">set</span> image deployment/tomcat6 <span class="token assign-left variable">tomcat</span><span class="token operator">=</span>tomcat:9.0.53-jre8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u56DE\u6EDA Deployment</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl <span class="token builtin class-name">set</span> image deployment/tomcat6 <span class="token assign-left variable">tomcat</span><span class="token operator">=</span>tomcat:9.0.53-jre8 --record<span class="token operator">=</span>true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u66B4\u9732 service \u7AEF\u53E3\uFF1Akubectl expose deploy tomcat6 --port=80 --target-port=8080 --type=NodePort</p><p>\u67E5\u770B Pod\uFF08kg all \uFF0Ckg pods -o wide\uFF0Ckg pod xx -o yaml\uFF09</p><p><img src="`+S+`" alt="image-20211208212559503"></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
    <span class="token key atrule">pod-template-hash</span><span class="token punctuation">:</span> 56fcc999cb
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6<span class="token punctuation">-</span>56fcc999cb<span class="token punctuation">-</span>nm2nx
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">ownerReferences</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
    <span class="token key atrule">blockOwnerDeletion</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">controller</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> ReplicaSet
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6<span class="token punctuation">-</span>56fcc999cb
    <span class="token key atrule">uid</span><span class="token punctuation">:</span> 28633fd6<span class="token punctuation">-</span>b3ee<span class="token punctuation">-</span>45aa<span class="token punctuation">-</span>93d5<span class="token punctuation">-</span>fb8931735029
  <span class="token key atrule">resourceVersion</span><span class="token punctuation">:</span> <span class="token string">&quot;47929&quot;</span>
  <span class="token key atrule">uid</span><span class="token punctuation">:</span> 59333abe<span class="token punctuation">-</span>6a24<span class="token punctuation">-</span>4995<span class="token punctuation">-</span>888b<span class="token punctuation">-</span>88577fef9559
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
<span class="token punctuation">...</span> <span class="token punctuation">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u81EA\u5DF1\u521B\u5EFA pod\uFF08.yaml\uFF09\u6587\u4EF6</p><p>Pod \u901A\u5E38\u4E0D\u662F\u76F4\u63A5\u521B\u5EFA\u7684\uFF0C\u800C\u662F\u4F7F\u7528\u5DE5\u4F5C\u8D1F\u8F7D\u8D44\u6E90\u521B\u5EFA\u7684\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
  	<span class="token comment">#\u5B9E\u4F8B\u540D\u79F0</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token comment">#\u5BB9\u5668\u540D\u79F0  </span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span>  tomcat6<span class="token punctuation">-</span>xxx<span class="token punctuation">-</span>wzfj2
  <span class="token comment">#\u547D\u540D\u7A7A\u95F4</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token comment">#\u5BB9\u5668</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl apply -f myPod.yaml</p><p>\u67E5\u770B Service\uFF08kg svc tomcat6 -o yaml\uFF09</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token string">&quot;2021-12-08T13:41:18Z&quot;</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">resourceVersion</span><span class="token punctuation">:</span> <span class="token string">&quot;48461&quot;</span>
  <span class="token key atrule">uid</span><span class="token punctuation">:</span> b4ebfb65<span class="token punctuation">-</span>4e0c<span class="token punctuation">-</span>478a<span class="token punctuation">-</span>8e85<span class="token punctuation">-</span>f03acef2d166
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> 10.96.126.87
  <span class="token key atrule">clusterIPs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 10.96.126.87
  <span class="token key atrule">externalTrafficPolicy</span><span class="token punctuation">:</span> Cluster
  <span class="token key atrule">internalTrafficPolicy</span><span class="token punctuation">:</span> Cluster
  <span class="token key atrule">ipFamilies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> IPv4
  <span class="token key atrule">ipFamilyPolicy</span><span class="token punctuation">:</span> SingleStack
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">31005</span> <span class="token comment">#\u66B4\u9732\u7ED9\u5916\u90E8\u4F7F\u7528port</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">sessionAffinity</span><span class="token punctuation">:</span> None
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
<span class="token key atrule">status</span><span class="token punctuation">:</span>
  <span class="token key atrule">loadBalancer</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B Deployment-apps\uFF08kg deploy tomcat6 -o yaml\uFF09</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token punctuation">...</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
        <span class="token key atrule">terminationMessagePath</span><span class="token punctuation">:</span> /dev/termination<span class="token punctuation">-</span>log
        <span class="token key atrule">terminationMessagePolicy</span><span class="token punctuation">:</span> File
   <span class="token punctuation">...</span>.
<span class="token key atrule">status</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B Deployment \u4E0A\u7EBF\u72B6\u6001<code>kubectl rollout status deployment/nginx-deployment</code></p><p>\u6821\u9A8C\uFF1Ahttp://192.168.101.120:80/</p><p><img src="`+A+`" alt="image-20211208215629869"></p><h4 id="_2\u3001\u4F7F\u7528-apps-\u66B4\u9732service-port-\u7684-yaml-\u683C\u5F0F-\u4F7F\u7528\u8FD9\u4E2A-\u4E0D\u4F7F\u7528-\u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps-\u63A8\u8350" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u4F7F\u7528-apps-\u66B4\u9732service-port-\u7684-yaml-\u683C\u5F0F-\u4F7F\u7528\u8FD9\u4E2A-\u4E0D\u4F7F\u7528-\u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps-\u63A8\u8350" aria-hidden="true">#</a> 2\u3001\u4F7F\u7528 [apps +\u66B4\u9732Service port] \u7684 yaml \u683C\u5F0F\uFF08\u4F7F\u7528\u8FD9\u4E2A\uFF0C\u4E0D\u4F7F\u7528<a href="#%E5%88%9D%E7%BA%A7%E4%BD%BF%E7%94%A8yaml%E5%88%9B%E5%BB%BAapps"># \u521D\u7EA7\u4F7F\u7528yaml\u521B\u5EFAapps</a>\uFF09=<mark><mark><mark><mark>\u63A8\u8350</mark></mark></mark></mark>==<a name="apps+expose-port"></a></h4><p>=<mark><mark><mark><mark>\u63A8\u8350</mark></mark></mark></mark>==</p><h5 id="\u5B89\u88C5-deployment-apps-\u4E0E\u66B4\u9732service-expose-port-\u5728\u540C\u4E00\u4E2Ayaml\u6587\u4EF6\u91CC\u8BBE\u7F6E-\u901A\u8FC7-\u5206\u9694" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-deployment-apps-\u4E0E\u66B4\u9732service-expose-port-\u5728\u540C\u4E00\u4E2Ayaml\u6587\u4EF6\u91CC\u8BBE\u7F6E-\u901A\u8FC7-\u5206\u9694" aria-hidden="true">#</a> \u5B89\u88C5 Deployment\uFF08apps \uFF09\u4E0E\u66B4\u9732Service\uFF08expose-port \uFF09\u5728\u540C\u4E00\u4E2Ayaml\u6587\u4EF6\u91CC\u8BBE\u7F6E\uFF0C\u901A\u8FC7<code>---</code>\u5206\u9694</h5><p>=<mark><mark><mark><mark>\u63A8\u8350</mark></mark></mark></mark>==</p><p>xxx.yaml<a name="xxx.yaml"></a></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
        <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/tomcat<span class="token punctuation">:</span>9.0.62<span class="token punctuation">-</span>jre11<span class="token punctuation">-</span>temurin<span class="token punctuation">-</span>focal
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+N+`" alt="image-20211208220838638"></p><h3 id="tomcat-404" tabindex="-1"><a class="header-anchor" href="#tomcat-404" aria-hidden="true">#</a> tomcat 404<a name="tomcat404"></a></h3><p>\u67E5\u770B\u65E5\u5FD7\uFF1A kubectl logs tomcat-xx</p><p>\u8FDB\u5165\u5BB9\u5668\u4E2D\u67E5\u770B:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>a@master ~<span class="token punctuation">]</span>$ kg pod -o wide
NAME                     READY   STATUS    RESTARTS   AGE   IP            NODE    NOMINATED NODE   READINESS GATES
tomcat-b8cdc6f6b-7ngdx   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8m    <span class="token number">10.244</span>.3.12   node3   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
tomcat-b8cdc6f6b-97g7f   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8m    <span class="token number">10.244</span>.1.14   node2   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
tomcat-b8cdc6f6b-r2w26   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8m    <span class="token number">10.244</span>.1.13   node2   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

<span class="token punctuation">[</span>a@master ~<span class="token punctuation">]</span>$ kubectl <span class="token builtin class-name">exec</span> xx -it -- /bin/bash
<span class="token punctuation">[</span>a@master ~<span class="token punctuation">]</span>$ kubectl <span class="token builtin class-name">exec</span> xx -it -- /bin/bash
<span class="token punctuation">[</span>a@master ~<span class="token punctuation">]</span>$ kubectl <span class="token builtin class-name">exec</span> xx -it -- /bin/bash

root@tomcat-xx-8sdxp:/usr/local/tomcat<span class="token comment"># ls</span>
    BUILDING.txt	 LICENSE  README.md	 RUNNING.txt  conf  logs	    temp     webapps.dist
    CONTRIBUTING.md  NOTICE   RELEASE-NOTES  bin	      lib   native-jni-lib  webapps  work
root@tomcat-xx-8sdxp:/usr/local/tomcat<span class="token comment"># cp -R webapps.dist/. webapps/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="c\u3001deployment-service-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#c\u3001deployment-service-\u6982\u5FF5" aria-hidden="true">#</a> C\u3001Deployment &amp; service \u6982\u5FF5</h3><p><img src="`+C+'" alt=""></p><h4 id="pod-service" tabindex="-1"><a class="header-anchor" href="#pod-service" aria-hidden="true">#</a> pod &amp; service</h4><p><img src="'+D+'" alt="image-20211208203943489"></p><p><img src="'+T+'" alt="image-20211208205239059"></p><p>\u5C06\u4E00\u7EC4pod\u516C\u5F00\u4E3A\u7F51\u7EDC\u670D\u52A1\uFF0C\u901A\u8FC7service\u4EE3\u7406\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861</p><p><img src="'+I+'" alt="img"></p><h4 id="clusterip" tabindex="-1"><a class="header-anchor" href="#clusterip" aria-hidden="true">#</a> ClusterIP</h4><p>\u6B64\u65B9\u5F0F\u53EA\u80FD\u5728\u96C6\u7FA4\u5185\u8BBF\u95EE</p><h4 id="label-selector" tabindex="-1"><a class="header-anchor" href="#label-selector" aria-hidden="true">#</a> label &amp; selector</h4><p><img src="'+O+'" alt="image-20211208205421842"></p><p>\u901A\u8BAF1</p><p><img src="'+z+'" alt="image-20211208205753063"></p><p>\u901A\u8BAF2</p><p><img src="'+V+'" alt="image-20211208205714089"></p><h4 id="\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u8BF4\u660E" aria-hidden="true">#</a> \u8BF4\u660E\uFF1A</h4><blockquote><p>\u4E00\u4E2A\u96C6\u7FA4\u540E\u591A\u53F0mster\u3001node\uFF0C\u4E00\u4E2A\u8282\u70B9node\uFF0C\u91CC\u9762\u6709\u591A\u4E2APod\uFF0C\u4E00\u4E2APod\u91CC\u53EF\u80FD\u6709\u591A\u4E2A\u670D\u52A1\uFF0C\u5404\u4E2APod\u901A\u8FC7service\u66B4\u9732port\u7ED9\u5176\u4ED6Pod\u3001node\u4E4B\u95F4\u662F\u4E92\u901A\uFF0C\u901A\u8FC7controller\u6765\u7BA1\u7406\u4F7F\u7528Pod\u8D44\u6E90\u3002</p></blockquote><p>node -&gt; pod -&gt; service -&gt; controller</p><h3 id="d\u3001ingress-\u57FA\u4E8E\u57DF\u540D\u8BBF\u95EE-\u4E0D\u9700\u8981\u901A\u8FC7ip-port\u8BBF\u95EE\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#d\u3001ingress-\u57FA\u4E8E\u57DF\u540D\u8BBF\u95EE-\u4E0D\u9700\u8981\u901A\u8FC7ip-port\u8BBF\u95EE\u670D\u52A1" aria-hidden="true">#</a> D\u3001Ingress \u57FA\u4E8E\u57DF\u540D\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u901A\u8FC7ip\uFF1Aport\u8BBF\u95EE\u670D\u52A1</h3><p>ingress\uFF1A\u901A\u8FC7\u57DF\u540D\u3001\u8D1F\u8F7D\u5747\u8861<a name="ingress"></a></p><p>ingress \u5E95\u5C42\u662Fnginx</p><blockquote><p>\u901A\u8FC7Service \u53D1\u73B0Pod\u8FDB\u884C\u5173\u8054\u3002\u57FA\u4E8E\u57DF\u540D\u8BBF\u95EE\u3002</p><p>\u901A\u8FC7Ingress Controller \u5B9E\u73B0Pod\u8D1F\u8F7D\u5747\u8861\u3002</p><p>\u652F\u6301TCP/UDP 4\u5C42\u8D1F\u8F7D\u5747\u8861\u548CHTTP 7\u5C42\u8D1F\u8F7D\u5747\u8861\u3002</p></blockquote><p><img src="'+M+'" alt="image-20190316184154726"></p><p><img src="'+G+'" alt="image-20211208221411991"></p><hr><p><img src="'+L+'" alt=""></p><p><img src="'+K+'" alt=""></p><p><img src="'+B+'" alt="img"></p><hr><h4 id="\u6267\u884C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u6267\u884C\u6D41\u7A0B" aria-hidden="true">#</a> \u6267\u884C\u6D41\u7A0B</h4><blockquote><p>ingress-nginx-controller \u5BF9\u5916\u63D0\u4F9B80\uFF08NodePort\uFF09\u7AEF\u53E3\uFF0C\u5916\u90E8\u8BBF\u95EE80\u8F6C\u5230\u5185\u90E8service\u7684pod\u3010k8s\u5185\u90E8\u7AEF\u53E3\uFF08ClusterIP\uFF09\u3011</p><p>web -\u300B ingress -\u300Bnode\uFF1Aservice -\u300B pod -\u300B \u5177\u4F53\u7A0B\u5E8Fapp</p></blockquote><p><img src="'+H+'" alt="img"></p><h4 id="ingress-\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#ingress-\u662F\u4EC0\u4E48" aria-hidden="true">#</a> Ingress \u662F\u4EC0\u4E48\uFF1F</h4><p>https://kubernetes.io/zh/docs/concepts/services-networking/ingress/</p><p><img src="'+W+`" alt="image-20211208223555795"></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>wildcard<span class="token punctuation">-</span>host
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;foo.bar.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/bar&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service1
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;*.foo.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/foo&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service2
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+F+`" alt=""></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> simple<span class="token punctuation">-</span>fanout<span class="token punctuation">-</span>example
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> foo.bar.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /foo
        <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service1
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">4200</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /bar
        <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service2
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u4F60\u4F7F\u7528 <code>kubectl apply -f</code> \u521B\u5EFA Ingress \u65F6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl describe ingress simple-fanout-example
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+U+`" alt="image-20211208223732243"></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> name<span class="token punctuation">-</span>virtual<span class="token punctuation">-</span>host<span class="token punctuation">-</span>ingress
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> foo.bar.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service1
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> bar.foo.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service2
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
              
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> name<span class="token punctuation">-</span>virtual<span class="token punctuation">-</span>host<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>no<span class="token punctuation">-</span>third<span class="token punctuation">-</span>host
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> first.bar.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service1
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> second.bar.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service2
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> service3
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u7248\u672C\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u7248\u672C\u5173\u7CFB" aria-hidden="true">#</a> \u7248\u672C\u5173\u7CFB</h4><p>https://kubernetes.github.io/ingress-nginx/</p><p>https://github.com/kubernetes/ingress-nginx/\u3001https://gitee.com/k8s_s/ingress-nginx/</p><table><thead><tr><th>Ingress-NGINX version</th><th>k8s supported version</th><th>Alpine Version</th><th>Nginx Version</th></tr></thead><tbody><tr><td>v1.2.0</td><td>1.23, 1.22, 1.21, 1.20, 1.19</td><td>3.14.6</td><td>1.19.10\u2020</td></tr><tr><td>v1.1.3</td><td>1.23, 1.22, 1.21, 1.20, 1.19</td><td>3.14.4</td><td>1.19.10\u2020</td></tr><tr><td>v1.1.2</td><td>1.23, 1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.1.1</td><td>1.23, 1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.1.0</td><td>1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.0.5</td><td>1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.0.4</td><td>1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.0.3</td><td>1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.0.2</td><td>1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.0.1</td><td>1.22, 1.21, 1.20, 1.19</td><td>3.14.2</td><td>1.19.9\u2020</td></tr><tr><td>v1.0.0</td><td>1.22, 1.21, 1.20, 1.19</td><td>3.13.5</td><td>1.20.1</td></tr></tbody></table><p><strong>Ingress-nginx \u7248\u672C\u9009\u62E9</strong></p><blockquote><p>https://gitee.com/k8s_s/ingress-nginx/blob/controller-v1.1.3/deploy/static/provider/baremetal/1.22/deploy.yaml</p><p>https://gitee.com/k8s_s/ingress-nginx/blob/controller-v1.2.0/deploy/static/provider/baremetal/1.22/deploy.yaml</p></blockquote><p><strong>yaml\u6587\u4EF6\u9700\u8981\u7684\u955C\u50CF2\u4E2A</strong></p><blockquote><p>docker push registry.cn-chengdu.aliyuncs.com/jinfang/kube-webhook-certgen:v1.5.2</p><p>docker push registry.cn-chengdu.aliyuncs.com/jinfang/nginx-ingress-controller:1.2.0</p></blockquote><p>1.2.0</p>`,161),sa={href:"https://hub.docker.com/r/bitnami/nginx-ingress-controller/tags",target:"_blank",rel:"noopener noreferrer"},aa=s("nginx-ingress-controller"),ea=s("\u3001"),ta={href:"https://hub.docker.com/search?q=kube-webhook-certgen",target:"_blank",rel:"noopener noreferrer"},pa=s("kube-webhook-certgen:1.5.2"),ia=t(`<h4 id="ingress\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#ingress\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> Ingress\u6CE8\u610F\u4E8B\u9879</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>apiVersion: networking.k8s.io/v1
import &quot;k8s.io/api/networking/v1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6587\u6863\u6559\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u6587\u6863\u6559\u7A0B" aria-hidden="true">#</a> \u6587\u6863\u6559\u7A0B\uFF1A</h4><p>https://kubesphere.io/zh/learn/level_2/lesson_9/content/\u3001https://www.yuque.com/leifengyang/oncloud/ctiwgo#JEtqN</p><h4 id="_1\u3001\u90E8\u7F72-\u5220\u9664-ingress-\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u90E8\u7F72-\u5220\u9664-ingress-\u670D\u52A1" aria-hidden="true">#</a> 1\u3001\u90E8\u7F72&amp;\u5220\u9664 ingress \u670D\u52A1</h4><p>kubectl apply -f ingress-controller-1.2.0.yaml</p><p>kubectl delete -f ingress-controller-1.2.0.yaml</p><h4 id="_2\u3001\u521B\u5EFA-svc\u3001deploy-nginx\u3001tomcat" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u521B\u5EFA-svc\u3001deploy-nginx\u3001tomcat" aria-hidden="true">#</a> 2\u3001\u521B\u5EFA svc\u3001deploy\uFF08nginx\u3001tomcat\uFF09</h4><h5 id="tomcat" tabindex="-1"><a class="header-anchor" href="#tomcat" aria-hidden="true">#</a> tomcat</h5><p>\u4EE5 <a href="#xxx.yaml">tomcat6 </a>\u4E3A\u4F8B</p><p>kapp tomcat6-deploy.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/tomcat<span class="token punctuation">:</span>9.0.62<span class="token punctuation">-</span>jre11<span class="token punctuation">-</span>temurin<span class="token punctuation">-</span>focal<span class="token punctuation">-</span>final
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8002</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> nginx</h5><p>kapp nginx-deploy.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/nginx<span class="token punctuation">:</span>1.21.6<span class="token punctuation">-</span>alpine
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u521B\u5EFA-ingress-\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u521B\u5EFA-ingress-\u89C4\u5219" aria-hidden="true">#</a> 3\u3001\u521B\u5EFA ingress \u89C4\u5219</h4><p>https://v1-22.docs.kubernetes.io/zh/docs/concepts/services-networking/ingress/</p><h5 id="tomcat-1" tabindex="-1"><a class="header-anchor" href="#tomcat-1" aria-hidden="true">#</a> tomcat</h5><p>kapp ingress-tomcat.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span> 
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>tomcat
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token comment"># \u91CD\u5199\u914D\u7F6E</span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation">:</span> /$2
    <span class="token comment"># \u9650\u6D41</span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/limit-rps</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
    <span class="token comment"># \u8DE8\u57DF</span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/enable-cors</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>    
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingressClassName</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;tomcat.k8s.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8002</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;tomcat.k8s.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/nginx(/|$)(.*)&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8001</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="nginx-\u9650\u6D41-\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#nginx-\u9650\u6D41-\u8DE8\u57DF" aria-hidden="true">#</a> nginx + \u9650\u6D41+\u8DE8\u57DF</h5><p>kapp ingress-nginx.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span> 
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ingress<span class="token punctuation">-</span>nginx
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token comment"># \u91CD\u5199\u914D\u7F6E # </span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation">:</span> /$2
    <span class="token comment"># \u9650\u6D41</span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/limit-rps</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
    <span class="token comment"># \u8DE8\u57DF</span>
    <span class="token key atrule">nginx.ingress.kubernetes.io/enable-cors</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingressClassName</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;nginx.k8s.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8001</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;nginx.k8s.com&quot;</span>
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/tomcat(/|$)(.*)&quot;</span>
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8002</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://test.nginx.com:</p><h4 id="\u62A5\u9519-validate-nginx-ingress-kubernetes-io" tabindex="-1"><a class="header-anchor" href="#\u62A5\u9519-validate-nginx-ingress-kubernetes-io" aria-hidden="true">#</a> \u62A5\u9519\uFF1Avalidate.nginx.ingress.kubernetes.io</h4><p>error when creating &quot;ingress-nginx.yaml&quot;: Internal error occurred: failed calling webhook &quot;validate.nginx.ingress.kubernetes.io&quot;: Post &quot;https://ingress-nginx-controller-admission.ingress-nginx.svc:443/networking/v1/ingresses?timeout=10s&quot;: x509: certificate signed by unknown authority</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kg validatingwebhookconfigurations     --\u300B		ingress-nginx-admission

\u5220\u9664\uFF1Akubectl delete -A ValidatingWebhookConfiguration ingress-nginx-admission
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u8865\u5145" tabindex="-1"><a class="header-anchor" href="#\u8865\u5145" aria-hidden="true">#</a> \u8865\u5145</h4><p>\u8865\u5145\uFF1A\u53E6\u5916\u9700\u8981\u5728 ingress-controller-1.2.0.yaml \u90E8\u7F72\u914D\u7F6E\u4E2D</p><ul><li>\u5C06 <code>rbac.authorization.k8s.io/v1beta1</code> \u6539\u4E3A <code>rbac.authorization.k8s.io/v1</code></li><li>\u5C06 <code>image: quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.29.0</code> \u6539\u4E3A <code>image: docker.io/bitnami/nginx-ingress-controller:latest</code></li></ul><p>4\u3001\u66F4\u65B0 Ingress</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl describe ingress <span class="token variable">$Name</span>
kubectl edit ingress <span class="token variable">$Name</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="n\u3001\u67E5\u770B\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#n\u3001\u67E5\u770B\u72B6\u6001" aria-hidden="true">#</a> n\u3001\u67E5\u770B\u72B6\u6001\uFF1A</h4><p>\u66F4\u591A\u547D\u4EE4\uFF1A<a href="#k8s-alias">k8s-alias</a></p><p>\u7A7A\u95F4\u540D\u79F0\uFF1Akg pods --all-namespaces -o wide</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span>$ kg pods --all-namespaces -o wide
NAMESPACE       NAME                                        READY   STATUS      RESTARTS   AGE     IP                NODE         NOMINATED NODE   READINESS GATES
default         nginx-689b55fcd-6dp5r                       <span class="token number">1</span>/1     Running     <span class="token number">0</span>          30m     <span class="token number">10.244</span>.2.4        node-122     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
default         nginx-689b55fcd-n7fg4                       <span class="token number">1</span>/1     Running     <span class="token number">0</span>          30m     <span class="token number">10.244</span>.1.4        node-123     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
default         nginx-689b55fcd-r7bxt                       <span class="token number">1</span>/1     Running     <span class="token number">0</span>          30m     <span class="token number">10.244</span>.3.4        node-121     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
default         tomcat-549f8d66bc-fcjfp                     <span class="token number">1</span>/1     Running     <span class="token number">0</span>          30m     <span class="token number">10.244</span>.1.5        node-123     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
default         tomcat-549f8d66bc-msfvd                     <span class="token number">1</span>/1     Running     <span class="token number">0</span>          30m     <span class="token number">10.244</span>.2.5        node-122     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
default         tomcat-549f8d66bc-w85zm                     <span class="token number">1</span>/1     Running     <span class="token number">0</span>          30m     <span class="token number">10.244</span>.3.5        node-121     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
ingress-nginx   ingress-nginx-admission-create--1-hbsxj     <span class="token number">0</span>/1     Completed   <span class="token number">0</span>          33m     <span class="token number">10.244</span>.2.3        node-122     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
ingress-nginx   ingress-nginx-controller-5898458b5c-5wwxs   <span class="token number">1</span>/1     Running     <span class="token number">0</span>          33m     <span class="token number">10.244</span>.1.3        node-123     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kg pod -n ingress-nginx -o wide</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>a@master ~<span class="token punctuation">]</span>$ kg pod -n ingress-nginx -o wide
NAME                                        READY   STATUS      RESTARTS   AGE   IP            NODE    NOMINATED NODE   READINESS GATES
ingress-nginx-admission-create-h6wmw        <span class="token number">0</span>/1     Completed   <span class="token number">0</span>          47m   <span class="token number">10.244</span>.3.22   node3   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
ingress-nginx-admission-patch-27bm2         <span class="token number">0</span>/1     Completed   <span class="token number">0</span>          47m   <span class="token number">10.244</span>.1.21   node2   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
ingress-nginx-controller-5898458b5c-x98tl   <span class="token number">1</span>/1     Running     <span class="token number">0</span>          47m   <span class="token number">10.244</span>.3.23   node3   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770Bingress-nginx\u6240\u6709\u670D\u52A1\uFF1Akg all -n ingress-nginx -o wide</p><h5 id="\u7528-kg-ingress-owide\u3001kg-pod-show-labels" tabindex="-1"><a class="header-anchor" href="#\u7528-kg-ingress-owide\u3001kg-pod-show-labels" aria-hidden="true">#</a> \uFF08\u7528\uFF09kg ingress -owide\u3001kg pod --show-labels</h5><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kg ingress -owide</span>
NAME            CLASS   HOSTS                           ADDRESS           PORTS   AGE
ingress-nginx   nginx   test.nginx.com,test.nginx.com   <span class="token number">192.168</span>.101.122   <span class="token number">80</span>      20h
<span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kg pod --show-labels</span>
NAME                      READY   STATUS    RESTARTS      AGE   LABELS
nginx-689b55fcd-2c8v8     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   20h   <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx,pod-template-hash<span class="token operator">=</span>689b55fcd
nginx-689b55fcd-5qpkp     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   20h   <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx,pod-template-hash<span class="token operator">=</span>689b55fcd
nginx-689b55fcd-gpdqz     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   20h   <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx,pod-template-hash<span class="token operator">=</span>689b55fcd
tomcat-549f8d66bc-bln66   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   20h   <span class="token assign-left variable">app</span><span class="token operator">=</span>tomcat,pod-template-hash<span class="token operator">=</span>549f8d66bc
tomcat-549f8d66bc-rqhvm   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   20h   <span class="token assign-left variable">app</span><span class="token operator">=</span>tomcat,pod-template-hash<span class="token operator">=</span>549f8d66bc
tomcat-549f8d66bc-zkc94   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   20h   <span class="token assign-left variable">app</span><span class="token operator">=</span>tomcat,pod-template-hash<span class="token operator">=</span>549f8d66bc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u7528-\u67E5\u770Bsvc\u670D\u52A1-kg-svc-n-ingress-nginx" tabindex="-1"><a class="header-anchor" href="#\u7528-\u67E5\u770Bsvc\u670D\u52A1-kg-svc-n-ingress-nginx" aria-hidden="true">#</a> \uFF08\u7528\uFF09\u67E5\u770Bsvc\u670D\u52A1\uFF1Akg svc -n ingress-nginx</h5><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>a@master ~<span class="token punctuation">]</span>$ kg svc -n ingress-nginx
NAME                                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>                      AGE
ingress-nginx-controller             NodePort    <span class="token number">10.96</span>.123.65    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">80</span>:31861/TCP,443:31236/TCP   48m
ingress-nginx-controller-admission   ClusterIP   <span class="token number">10.96</span>.166.101   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP                      48m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B pod \u63CF\u8FF0\uFF1Ak describe pod -n ingress-nginx</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>a@master ~<span class="token punctuation">]</span>$ k describe pod  -n ingress-nginx
Name:         ingress-nginx-admission-create-h6wmw
Namespace:    ingress-nginx
Priority:     <span class="token number">0</span>
Node:         node3/192.168.101.123
Start Time:   Fri, 06 May <span class="token number">2022</span> 03:30:55 +0800
IP:           <span class="token number">10.244</span>.3.22
IPs:
  IP:           <span class="token number">10.244</span>.3.22
Name:         ingress-nginx-admission-patch-27bm2
Namespace:    ingress-nginx
Priority:     <span class="token number">0</span>
Node:         node2/192.168.101.122
IP:           <span class="token number">10.244</span>.1.21
IPs:
  IP:           <span class="token number">10.244</span>.1.21
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u7528-\u67E5\u770B-ingress-\u63CF\u8FF0-kubectl-describe-ingress" tabindex="-1"><a class="header-anchor" href="#\u7528-\u67E5\u770B-ingress-\u63CF\u8FF0-kubectl-describe-ingress" aria-hidden="true">#</a> \uFF08\u7528\uFF09\u67E5\u770B ingress \u63CF\u8FF0\uFF1Akubectl describe ingress</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[a@master ~]$ kubectl describe ingress ingress-nginx
Name:             ingress-nginx
Namespace:        default
Address:          192.168.101.123
Default backend:  default-http-backend:80 (&lt;error: endpoints &quot;default-http-backend&quot; not found&gt;)
Rules:
  Host            Path  Backends
  ----            ----  --------
  test.nginx.com
                  /   nginx:8000 (10.244.1.30:80,10.244.1.31:80,10.244.3.28:80)
  test.nginx.com
                  /nginx(/|$)(.*)   nginx:8000 (10.244.1.30:80,10.244.1.31:80,10.244.3.28:80)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[a@master ~]$ kubectl describe ingress ingress-tomcat
Name:             ingress-tomcat
Namespace:        default
Address:          192.168.101.123
Default backend:  default-http-backend:80 (&lt;error: endpoints &quot;default-http-backend&quot; not found&gt;)
Rules:
  Host             Path  Backends
  ----             ----  --------
  test.tomcat.com
                      tomcat:8001 (10.244.1.32:8080,10.244.1.33:8080,10.244.3.30:8080)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>k logs ingress-nginx</p><h4 id="_5\u3001\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u8BBF\u95EE" aria-hidden="true">#</a> 5\u3001\u8BBF\u95EE</h4><p>http://tomcat.k8s.com:31839\u3001http://nginx.k8s.com:31839</p><p>if <a href="#tomcat404">tomcat 404</a></p><p><img src="`+X+'" alt="image-20220506042516462"></p><p><img src="'+Q+`" alt="image-20220506042632204"></p><hr><hr><h1 id="\u4E8C\u3001kubesphere-master" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001kubesphere-master" aria-hidden="true">#</a> \u4E8C\u3001KubeSphere -&gt; master<a name="KubeSphere"></a></h1><p>\u5B98\u7F51\uFF1Ahttps://kubesphere.com.cn/zh/</p><p>\u6559\u7A0B\uFF1Ahttps://github.com/kubesphere/ks-installer/blob/master/README_zh.md</p><p>https://gitee.com/k8s_s/kubesphere\u3001https://gitee.com/k8s_s/ks-installer</p><h2 id="kubesphere-\u7248\u672C\u9009\u62E9" tabindex="-1"><a class="header-anchor" href="#kubesphere-\u7248\u672C\u9009\u62E9" aria-hidden="true">#</a> KubeSphere \u7248\u672C\u9009\u62E9</h2><table><thead><tr><th style="text-align:center;">KubeSphere</th><th style="text-align:center;">\u652F\u6301\u7684 Kubernetes \u7248\u672C</th></tr></thead><tbody><tr><td style="text-align:center;">3.3.x</td><td style="text-align:center;">1.19.x, 1.20.x, 1.21.x, 1.22.x (experimental)</td></tr><tr><td style="text-align:center;">3.2.x</td><td style="text-align:center;">1.19.x, 1.20.x, 1.21.x, 1.22.x (experimental)</td></tr><tr><td style="text-align:center;">3.1.x</td><td style="text-align:center;">1.17.x, 1.18.x, 1.19.x, 1.20.x</td></tr><tr><td style="text-align:center;">3.0.x</td><td style="text-align:center;">1.15.x, 1.16.x, 1.17.x, 1.18.x</td></tr></tbody></table><h2 id="_1\u3001\u8BBE\u7F6E\u5B58\u50A8\u7C7B\u578B-nfs\u6587\u4EF6\u7CFB\u7EDF" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u8BBE\u7F6E\u5B58\u50A8\u7C7B\u578B-nfs\u6587\u4EF6\u7CFB\u7EDF" aria-hidden="true">#</a> 1\u3001\u8BBE\u7F6E\u5B58\u50A8\u7C7B\u578B\uFF08nfs\u6587\u4EF6\u7CFB\u7EDF\uFF09</h2><p>\u5728\u5B89\u88C5\u4E4B\u524D\uFF0C\u9700\u8981\u914D\u7F6E Kubernetes \u96C6\u7FA4\u4E2D\u7684<strong>\u9ED8\u8BA4</strong>\u5B58\u50A8\u7C7B\u578B\u3002</p><p>\u5B89\u88C5nfs:https://zhuanlan.zhihu.com/p/411489781</p><p>storageclass\u5B58\u50A8\u65B9\u6CD5:https://blog.csdn.net/weixin_43384009/article/details/105958068</p><p>nfs\u6587\u4EF6\u7CFB\u7EDF:https://www.yuque.com/leifengyang/oncloud/gz1sls</p><h3 id="_1\u3001nfs\u6587\u4EF6\u7CFB\u7EDF" tabindex="-1"><a class="header-anchor" href="#_1\u3001nfs\u6587\u4EF6\u7CFB\u7EDF" aria-hidden="true">#</a> 1\u3001nfs\u6587\u4EF6\u7CFB\u7EDF</h3><h4 id="a\u3001\u5B89\u88C5nfs\u6587\u4EF6\u7CFB\u7EDF" tabindex="-1"><a class="header-anchor" href="#a\u3001\u5B89\u88C5nfs\u6587\u4EF6\u7CFB\u7EDF" aria-hidden="true">#</a> a\u3001\u5B89\u88C5nfs\u6587\u4EF6\u7CFB\u7EDF</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#\u5728\u6BCF\u4E2A\u673A\u5668\u3002
yum install -y nfs-utils

#\u5728master \u6267\u884C\u4EE5\u4E0B\u547D\u4EE4 
echo &quot;/nfs/data/ *(insecure,rw,sync,no_root_squash)&quot; &gt; /etc/exports

#\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF0C\u542F\u52A8 nfs \u670D\u52A1;\u521B\u5EFA\u5171\u4EAB\u76EE\u5F55
mkdir -p /nfs/data

#\u5728master\u6267\u884C
systemctl enable rpcbind
systemctl enable nfs-server
systemctl start rpcbind
systemctl start nfs-server
systemctl status rpcbind
systemctl status nfs-server

#\u4F7F\u914D\u7F6E\u751F\u6548
exportfs -r
#\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u751F\u6548
exportfs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="b\u3001\u914D\u7F6Enfs-client-\u9009\u505A" tabindex="-1"><a class="header-anchor" href="#b\u3001\u914D\u7F6Enfs-client-\u9009\u505A" aria-hidden="true">#</a> b\u3001\u914D\u7F6Enfs-client\uFF08\u9009\u505A\uFF09</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>showmount -e 192.168.101.120
mkdir -p /nfs/data
mount -t nfs 192.168.101.120:/nfs/data /nfs/data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="c\u3001\u914D\u7F6E\u9ED8\u8BA4\u5B58\u50A8" tabindex="-1"><a class="header-anchor" href="#c\u3001\u914D\u7F6E\u9ED8\u8BA4\u5B58\u50A8" aria-hidden="true">#</a> c\u3001\u914D\u7F6E\u9ED8\u8BA4\u5B58\u50A8</h4><p>\u521B\u5EFA\u4E00\u4E2A\u6587\u4EF6 vim ./nfs.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>storage
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">storageclass.kubernetes.io/is-default-class</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
<span class="token key atrule">provisioner</span><span class="token punctuation">:</span> k8s<span class="token punctuation">-</span>sigs.io/nfs<span class="token punctuation">-</span>subdir<span class="token punctuation">-</span>external<span class="token punctuation">-</span>provisioner
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">archiveOnDelete</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>  <span class="token comment">## \u5220\u9664pv\u7684\u65F6\u5019\uFF0Cpv\u7684\u5185\u5BB9\u662F\u5426\u8981\u5907\u4EFD</span>

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
  <span class="token comment"># replace with namespace where provisioner is deployed</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> Recreate
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
          <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/nfs<span class="token punctuation">:</span>v4.0.2
          <span class="token comment"># resources:</span>
          <span class="token comment">#    limits:</span>
          <span class="token comment">#      cpu: 10m</span>
          <span class="token comment">#    requests:</span>
          <span class="token comment">#      cpu: 10m</span>
          <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>root
              <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /persistentvolumes
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> PROVISIONER_NAME
              <span class="token key atrule">value</span><span class="token punctuation">:</span> k8s<span class="token punctuation">-</span>sigs.io/nfs<span class="token punctuation">-</span>subdir<span class="token punctuation">-</span>external<span class="token punctuation">-</span>provisioner
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> NFS_SERVER
              <span class="token key atrule">value</span><span class="token punctuation">:</span> 192.168.101.120 <span class="token comment">## \u6307\u5B9A\u81EA\u5DF1nfs\u670D\u52A1\u5668\u5730\u5740</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> NFS_PATH  
              <span class="token key atrule">value</span><span class="token punctuation">:</span> /nfs/data  <span class="token comment">## nfs\u670D\u52A1\u5668\u5171\u4EAB\u7684\u76EE\u5F55</span>
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>root
          <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
            <span class="token key atrule">server</span><span class="token punctuation">:</span> 192.168.101.120
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
  <span class="token comment"># replace with namespace where provisioner is deployed</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token punctuation">---</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner<span class="token punctuation">-</span>runner
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;nodes&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;watch&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;persistentvolumes&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;watch&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;create&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;delete&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;persistentvolumeclaims&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;watch&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;storage.k8s.io&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;storageclasses&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;watch&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;events&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;patch&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">---</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> run<span class="token punctuation">-</span>nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
    <span class="token comment"># replace with namespace where provisioner is deployed</span>
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner<span class="token punctuation">-</span>runner
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
<span class="token punctuation">---</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> leader<span class="token punctuation">-</span>locking<span class="token punctuation">-</span>nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
  <span class="token comment"># replace with namespace where provisioner is deployed</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;endpoints&quot;</span><span class="token punctuation">]</span>
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;watch&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;create&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;patch&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">---</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> leader<span class="token punctuation">-</span>locking<span class="token punctuation">-</span>nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
  <span class="token comment"># replace with namespace where provisioner is deployed</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
    <span class="token comment"># replace with namespace where provisioner is deployed</span>
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
  <span class="token key atrule">name</span><span class="token punctuation">:</span> leader<span class="token punctuation">-</span>locking<span class="token punctuation">-</span>nfs<span class="token punctuation">-</span>client<span class="token punctuation">-</span>provisioner
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl apply -f nfs.yaml</p><h4 id="d\u3001\u786E\u8BA4\u914D\u7F6E\u662F\u5426\u751F\u6548" tabindex="-1"><a class="header-anchor" href="#d\u3001\u786E\u8BA4\u914D\u7F6E\u662F\u5426\u751F\u6548" aria-hidden="true">#</a> d\u3001\u786E\u8BA4\u914D\u7F6E\u662F\u5426\u751F\u6548</h4><p>kubectl get sc</p><h3 id="_2\u3001metrics-server" tabindex="-1"><a class="header-anchor" href="#_2\u3001metrics-server" aria-hidden="true">#</a> 2\u3001metrics-server</h3><p>vim metrics-server.yaml</p><p>kubectl apply -f metrics-server.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
    <span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-admin</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
    <span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-edit</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
    <span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-view</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> system<span class="token punctuation">:</span>aggregated<span class="token punctuation">-</span>metrics<span class="token punctuation">-</span>reader
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> metrics.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> pods
  <span class="token punctuation">-</span> nodes
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> get
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> system<span class="token punctuation">:</span>metrics<span class="token punctuation">-</span>server
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;&quot;</span>
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> pods
  <span class="token punctuation">-</span> nodes
  <span class="token punctuation">-</span> nodes/stats
  <span class="token punctuation">-</span> namespaces
  <span class="token punctuation">-</span> configmaps
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> get
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server<span class="token punctuation">-</span>auth<span class="token punctuation">-</span>reader
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
  <span class="token key atrule">name</span><span class="token punctuation">:</span> extension<span class="token punctuation">-</span>apiserver<span class="token punctuation">-</span>authentication<span class="token punctuation">-</span>reader
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server<span class="token punctuation">:</span>system<span class="token punctuation">:</span>auth<span class="token punctuation">-</span>delegator
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> system<span class="token punctuation">:</span>auth<span class="token punctuation">-</span>delegator
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> system<span class="token punctuation">:</span>metrics<span class="token punctuation">-</span>server
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> system<span class="token punctuation">:</span>metrics<span class="token punctuation">-</span>server
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> https
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> https
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
    <span class="token key atrule">rollingUpdate</span><span class="token punctuation">:</span>
      <span class="token key atrule">maxUnavailable</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">args</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>cert<span class="token punctuation">-</span>dir=/tmp
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>kubelet<span class="token punctuation">-</span>insecure<span class="token punctuation">-</span>tls
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>secure<span class="token punctuation">-</span>port=4443
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>kubelet<span class="token punctuation">-</span>preferred<span class="token punctuation">-</span>address<span class="token punctuation">-</span>types=InternalIP<span class="token punctuation">,</span>ExternalIP<span class="token punctuation">,</span>Hostname
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>kubelet<span class="token punctuation">-</span>use<span class="token punctuation">-</span>node<span class="token punctuation">-</span>status<span class="token punctuation">-</span>port
        <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/metrics<span class="token punctuation">-</span>server<span class="token punctuation">:</span>v0.4.3
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
        <span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>
          <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">3</span>
          <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /livez
            <span class="token key atrule">port</span><span class="token punctuation">:</span> https
            <span class="token key atrule">scheme</span><span class="token punctuation">:</span> HTTPS
          <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">4443</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> https
          <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
        <span class="token key atrule">readinessProbe</span><span class="token punctuation">:</span>
          <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">3</span>
          <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /readyz
            <span class="token key atrule">port</span><span class="token punctuation">:</span> https
            <span class="token key atrule">scheme</span><span class="token punctuation">:</span> HTTPS
          <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
        <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>
          <span class="token key atrule">readOnlyRootFilesystem</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">runAsNonRoot</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">1000</span>
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /tmp
          <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp<span class="token punctuation">-</span>dir
      <span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span>
        <span class="token key atrule">kubernetes.io/os</span><span class="token punctuation">:</span> linux
      <span class="token key atrule">priorityClassName</span><span class="token punctuation">:</span> system<span class="token punctuation">-</span>cluster<span class="token punctuation">-</span>critical
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp<span class="token punctuation">-</span>dir
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apiregistration.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> APIService
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
  <span class="token key atrule">name</span><span class="token punctuation">:</span> v1beta1.metrics.k8s.io
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">group</span><span class="token punctuation">:</span> metrics.k8s.io
  <span class="token key atrule">groupPriorityMinimum</span><span class="token punctuation">:</span> <span class="token number">100</span>
  <span class="token key atrule">insecureSkipTLSVerify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics<span class="token punctuation">-</span>server
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
  <span class="token key atrule">version</span><span class="token punctuation">:</span> v1beta1
  <span class="token key atrule">versionPriority</span><span class="token punctuation">:</span> <span class="token number">100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2\u3001pv-pvc" tabindex="-1"><a class="header-anchor" href="#_2\u3001pv-pvc" aria-hidden="true">#</a> 2\u3001PV&amp;PVC</h2><blockquote><p>PV\uFF1A\u6301\u4E45\u5377\uFF08Persistent Volume\uFF09\uFF0C\u5C06\u5E94\u7528\u9700\u8981\u6301\u4E45\u5316\u7684\u6570\u636E\u4FDD\u5B58\u5230\u6307\u5B9A\u4F4D\u7F6E</p><p>PVC\uFF1A\u6301\u4E45\u5377\u7533\u660E\uFF08<strong>Persistent Volume Claim</strong>\uFF09\uFF0C\u7533\u660E\u9700\u8981\u4F7F\u7528\u7684\u6301\u4E45\u5377\u89C4\u683C</p></blockquote><h3 id="_1\u3001\u521B\u5EFApv\u6C60-pv-yaml" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u521B\u5EFApv\u6C60-pv-yaml" aria-hidden="true">#</a> 1\u3001\u521B\u5EFApv\u6C60 pv.yaml</h3><p>\u9759\u6001\u4F9B\u5E94</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#nfs\u4E3B\u8282\u70B9</span>
mkdir <span class="token punctuation">-</span>p /nfs/data/01 <span class="token important">&amp;&amp;</span> \\
mkdir <span class="token punctuation">-</span>p /nfs/data/02 <span class="token important">&amp;&amp;</span> \\
mkdir <span class="token punctuation">-</span>p /nfs/data/03
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFAPV</p><p>pv.yaml</p><p>kaf pv.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pv01<span class="token punctuation">-</span>10m
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 10M
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
  <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data/01
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 192.168.101.120
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pv02<span class="token punctuation">-</span>1gi
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 1Gi
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
  <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data/02
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 192.168.101.120
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pv03<span class="token punctuation">-</span>3gi
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 3Gi
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
  <span class="token key atrule">nfs</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /nfs/data/03
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 192.168.101.120
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001pvc\u521B\u5EFA\u4E0E\u7ED1\u5B9A-pvc-yaml" tabindex="-1"><a class="header-anchor" href="#_2\u3001pvc\u521B\u5EFA\u4E0E\u7ED1\u5B9A-pvc-yaml" aria-hidden="true">#</a> 2\u3001PVC\u521B\u5EFA\u4E0E\u7ED1\u5B9A pvc.yaml</h3><p>\u521B\u5EFAPVC</p><p>pvc.yaml</p><p>kaf pvc.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteMany
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">requests</span><span class="token punctuation">:</span>
      <span class="token key atrule">storage</span><span class="token punctuation">:</span> 200Mi
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> nfs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3\u3001\u521B\u5EFApod\u7ED1\u5B9Apvc-pvc-deploy-yaml" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u521B\u5EFApod\u7ED1\u5B9Apvc-pvc-deploy-yaml" aria-hidden="true">#</a> 3\u3001\u521B\u5EFAPod\u7ED1\u5B9APVC pvc-deploy.yaml</h3><p>pvc-deploy.yaml</p><p>kaf pvc-deploy.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>pvc
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/nginx<span class="token punctuation">:</span>1.21.6<span class="token punctuation">-</span>alpine
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> html
          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /usr/share/nginx/html
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> html
          <span class="token key atrule">persistentVolumeClaim</span><span class="token punctuation">:</span>
            <span class="token key atrule">claimName</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3\u3001configmap" tabindex="-1"><a class="header-anchor" href="#_3\u3001configmap" aria-hidden="true">#</a> 3\u3001ConfigMap</h2><blockquote><p>\u62BD\u53D6\u5E94\u7528\u914D\u7F6E\uFF0C\u5E76\u4E14\u53EF\u4EE5\u81EA\u52A8\u66F4\u65B0</p></blockquote><h3 id="_1\u3001redis\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_1\u3001redis\u793A\u4F8B" aria-hidden="true">#</a> 1\u3001redis\u793A\u4F8B</h3><h4 id="_1\u3001\u628A\u4E4B\u524D\u7684\u914D\u7F6E\u6587\u4EF6\u521B\u5EFA\u4E3A\u914D\u7F6E\u96C6" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u628A\u4E4B\u524D\u7684\u914D\u7F6E\u6587\u4EF6\u521B\u5EFA\u4E3A\u914D\u7F6E\u96C6" aria-hidden="true">#</a> 1\u3001\u628A\u4E4B\u524D\u7684\u914D\u7F6E\u6587\u4EF6\u521B\u5EFA\u4E3A\u914D\u7F6E\u96C6</h4><p>\u521B\u5EFA\u914D\u7F6E\uFF0Credis\u4FDD\u5B58\u5230k8s\u7684etcd\uFF1B</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>kubectl create cm redis<span class="token punctuation">-</span>conf <span class="token punctuation">-</span><span class="token punctuation">-</span>from<span class="token punctuation">-</span>file=redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>redis.yaml</p><p>kaf redis.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>conf
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">data</span><span class="token punctuation">:</span>    <span class="token comment">#data\u662F\u6240\u6709\u771F\u6B63\u7684\u6570\u636E\uFF0Ckey\uFF1A\u9ED8\u8BA4\u662F\u6587\u4EF6\u540D   value\uFF1A\u914D\u7F6E\u6587\u4EF6\u7684\u5185\u5BB9</span>
  <span class="token key atrule">redis.conf</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    appendonly yes</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001\u521B\u5EFApod" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u521B\u5EFApod" aria-hidden="true">#</a> 2\u3001\u521B\u5EFAPod</h4><p>redis-pod.yaml</p><p>kaf redis-pod.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/redis<span class="token punctuation">:</span>6.2.6.1
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> redis<span class="token punctuation">-</span>server
      <span class="token punctuation">-</span> <span class="token string">&quot;/redis-master/redis.conf&quot;</span>  <span class="token comment">#\u6307\u7684\u662Fredis\u5BB9\u5668\u5185\u90E8\u7684\u4F4D\u7F6E</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data
      <span class="token key atrule">name</span><span class="token punctuation">:</span> data
    <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /redis<span class="token punctuation">-</span>master
      <span class="token key atrule">name</span><span class="token punctuation">:</span> config
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> data
      <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> config
      <span class="token key atrule">configMap</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>conf
        <span class="token key atrule">items</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> redis.conf
          <span class="token key atrule">path</span><span class="token punctuation">:</span> redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u68C0\u67E5\u9ED8\u8BA4\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u68C0\u67E5\u9ED8\u8BA4\u914D\u7F6E" aria-hidden="true">#</a> 3\u3001\u68C0\u67E5\u9ED8\u8BA4\u914D\u7F6E</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>kubectl exec <span class="token punctuation">-</span>it redis <span class="token punctuation">-</span><span class="token punctuation">-</span> redis<span class="token punctuation">-</span>cli

127.0.0.1<span class="token punctuation">:</span>6379<span class="token punctuation">&gt;</span> CONFIG GET appendonly
127.0.0.1<span class="token punctuation">:</span>6379<span class="token punctuation">&gt;</span> CONFIG GET requirepass
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4\u3001\u4FEE\u6539configmap" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u4FEE\u6539configmap" aria-hidden="true">#</a> 4\u3001\u4FEE\u6539ConfigMap</h4><p>redis.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>redis<span class="token punctuation">-</span>config
<span class="token key atrule">data</span><span class="token punctuation">:</span>		<span class="token comment">#data\u662F\u6240\u6709\u771F\u6B63\u7684\u6570\u636E\uFF0Ckey\uFF1A\u9ED8\u8BA4\u662F\u6587\u4EF6\u540D   value\uFF1A\u914D\u7F6E\u6587\u4EF6\u7684\u5185\u5BB9</span>
  <span class="token key atrule">redis-config</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    maxmemory 2mb
    maxmemory-policy allkeys-lru </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5\u3001\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u66F4\u65B0" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u66F4\u65B0" aria-hidden="true">#</a> 5\u3001\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u66F4\u65B0</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>kubectl exec <span class="token punctuation">-</span>it redis <span class="token punctuation">-</span><span class="token punctuation">-</span> redis<span class="token punctuation">-</span>cli

127.0.0.1<span class="token punctuation">:</span>6379<span class="token punctuation">&gt;</span> CONFIG GET maxmemory
127.0.0.1<span class="token punctuation">:</span>6379<span class="token punctuation">&gt;</span> CONFIG GET maxmemory<span class="token punctuation">-</span>policy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u68C0\u67E5\u6307\u5B9A\u6587\u4EF6\u5185\u5BB9\u662F\u5426\u5DF2\u7ECF\u66F4\u65B0</p><p>\u4FEE\u6539\u4E86CM\u3002Pod\u91CC\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u4F1A\u8DDF\u7740\u53D8</p></blockquote><blockquote><p>\u914D\u7F6E\u503C\u672A\u66F4\u6539\uFF0C\u56E0\u4E3A\u9700\u8981\u91CD\u65B0\u542F\u52A8 Pod \u624D\u80FD\u4ECE\u5173\u8054\u7684 ConfigMap \u4E2D\u83B7\u53D6\u66F4\u65B0\u7684\u503C\u3002</p><p>\u539F\u56E0\uFF1A\u6211\u4EEC\u7684Pod\u90E8\u7F72\u7684\u4E2D\u95F4\u4EF6\u81EA\u5DF1\u672C\u8EAB\u6CA1\u6709\u70ED\u66F4\u65B0\u80FD\u529B</p></blockquote><h2 id="_4\u3001secret" tabindex="-1"><a class="header-anchor" href="#_4\u3001secret" aria-hidden="true">#</a> 4\u3001secret</h2>`,123),la=s("Secret \u5BF9\u8C61\u7C7B\u578B\u7528\u6765\u4FDD\u5B58\u654F\u611F\u4FE1\u606F\uFF0C\u4F8B\u5982\u5BC6\u7801\u3001OAuth \u4EE4\u724C\u548C SSH \u5BC6\u94A5\u3002 \u5C06\u8FD9\u4E9B\u4FE1\u606F\u653E\u5728 secret \u4E2D\u6BD4\u653E\u5728 "),ca={href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/",target:"_blank",rel:"noopener noreferrer"},oa=s("Pod"),ua=s(" \u7684\u5B9A\u4E49\u6216\u8005 "),ra={href:"https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-image",target:"_blank",rel:"noopener noreferrer"},da=s("\u5BB9\u5668\u955C\u50CF"),ka=s(" \u4E2D\u6765\u8BF4\u66F4\u52A0\u5B89\u5168\u548C\u7075\u6D3B\u3002"),ma=t(`<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">##\u547D\u4EE4\u683C\u5F0F</span>
kubectl create secret docker<span class="token punctuation">-</span>registry jinfang<span class="token punctuation">-</span>docker \\
  <span class="token punctuation">-</span><span class="token punctuation">-</span>docker<span class="token punctuation">-</span>server=registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang \\
  <span class="token punctuation">-</span><span class="token punctuation">-</span>docker<span class="token punctuation">-</span>username=\u5C0F\u725B\u7A0B\u5E8Fapp \\
  <span class="token punctuation">-</span><span class="token punctuation">-</span>docker<span class="token punctuation">-</span>password=yujinhua66 \\
  <span class="token punctuation">-</span><span class="token punctuation">-</span>docker<span class="token punctuation">-</span>email=iskong9@163.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>secret-pod.yaml</p><p>kaf secret-pod.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> private<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> private<span class="token punctuation">-</span>nginx
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/jinfang/redis<span class="token punctuation">:</span>6.2.6.1
  <span class="token key atrule">imagePullSecrets</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> jinfang<span class="token punctuation">-</span>docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u9700\u8981\u7684\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u9700\u8981\u7684\u955C\u50CF" aria-hidden="true">#</a> \u9700\u8981\u7684\u955C\u50CF\uFF1A</h2><blockquote><p>kubesphere/pause:3.4.1</p><p>kubesphere/kube-apiserver:v1.22.9</p><p>kubesphere/kube-proxy:v1.22.9</p><p>kubesphere/kube-controller-manager:v1.22.9</p><p>kubesphere/kube-proxy:v1.22.9</p><p>kubesphere/kube-scheduler:v1.22.9</p><p>kubesphere/k8s-dns-node-cache:1.15.12</p><p>kubesphere/k8s-dns-node-cache:1.15.12</p><p>coredns/coredns:v1.8.4</p><p>calico/kube-controllers:v3.20.0</p><p>calico/cni:v3.20.0</p><p>calico/kube-controllers:v3.20.0</p><p>calico/node:v3.20.0</p><p>calico/cni:v3.20.0</p><p>calico/pod2daemon-flexvol:v3.20.0</p></blockquote><p>dkpush registry.cn-chengdu.aliyuncs.com/jinfang/ks-apiserver:v3.2.1 &amp;&amp; \\</p><p>dkpush registry.cn-chengdu.aliyuncs.com/jinfang/ks-console:v3.2.1 &amp;&amp; \\</p><p>dkpush registry.cn-chengdu.aliyuncs.com/jinfang/fluent-bit:v1.8.3 &amp;&amp; \\</p><p>dkpush registry.cn-chengdu.aliyuncs.com/jinfang/kube-rbac-proxy:v0.8.0 &amp;&amp; \\</p><p>dkpush registry.cn-chengdu.aliyuncs.com/jinfang/openldap:1.3.0 &amp;&amp; \\</p><p>dkpush registry.cn-chengdu.aliyuncs.com/jinfang/node-exporter:v0.18.1</p><h2 id="_1-\u3001\u73AF\u5883\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_1-\u3001\u73AF\u5883\u5B89\u88C5" aria-hidden="true">#</a> 1\uFF09\u3001\u73AF\u5883\u5B89\u88C5</h2><h3 id="a\u3001helm" tabindex="-1"><a class="header-anchor" href="#a\u3001helm" aria-hidden="true">#</a> A\u3001Helm</h3><p><strong>Helm \u662F Kubernetes \u7684\u5305\u7BA1\u7406\u5668\uFF0C\u9002\u7528\u4E8E kubeSphere2.x \u7248\u672C\uFF0CkubeSphere3.x \u4F7F\u7528</strong> <a href="#KubeKey"># KubeKey</a></p><h4 id="helm-\u7248\u672C\u9009\u62E9" tabindex="-1"><a class="header-anchor" href="#helm-\u7248\u672C\u9009\u62E9" aria-hidden="true">#</a> Helm \u7248\u672C\u9009\u62E9</h4><table><thead><tr><th style="text-align:center;">Helm \u7248\u672C</th><th style="text-align:center;">\u652F\u6301\u7684 Kubernetes \u7248\u672C</th></tr></thead><tbody><tr><td style="text-align:center;">3.8.x</td><td style="text-align:center;">1.23.x - 1.20.x</td></tr><tr><td style="text-align:center;">3.7.x</td><td style="text-align:center;">1.22.x - 1.19.x</td></tr><tr><td style="text-align:center;">3.6.x</td><td style="text-align:center;">1.21.x - 1.18.x</td></tr><tr><td style="text-align:center;">3.5.x</td><td style="text-align:center;">1.20.x - 1.17.x</td></tr><tr><td style="text-align:center;">3.4.x</td><td style="text-align:center;">1.19.x - 1.16.x</td></tr></tbody></table>`,17),va={id:"\u5B89\u88C5-helm3-6-3",tabindex:"-1"},ba=n("a",{class:"header-anchor",href:"#\u5B89\u88C5-helm3-6-3","aria-hidden":"true"},"#",-1),ga=s(),ha={href:"https://devopscube.com/install-configure-helm-kubernetes/",target:"_blank",rel:"noopener noreferrer"},ya=s("\u5B89\u88C5 Helm3.6.3"),fa=t(`<p>\u8BF4\u660E\u6587\u6863\uFF1Ahttps://docs.helm.sh/zh/ https://v3.helm.sh/zh/docs/</p><p>\u4E0B\u8F7D\uFF1Ahttps://github.com/helm/helm\u3001https://gitee.com/k8s_s/helm</p><blockquote><p>tar: https://github.com/helm/helm/releases/v3.6.3</p></blockquote><h5 id="a\u3001\u4ECEsh\u6587\u4EF6\u5B89\u88C5-helm-3" tabindex="-1"><a class="header-anchor" href="#a\u3001\u4ECEsh\u6587\u4EF6\u5B89\u88C5-helm-3" aria-hidden="true">#</a> a\u3001\u4ECEsh\u6587\u4EF6\u5B89\u88C5 helm 3</h5><p><strong>\u7B2C\u4E00\u6B65\uFF1A</strong> \u4E0B\u8F7D\u6700\u65B0\u7684 helm \u5B89\u88C5\u811A\u672C\u3002 get_helm.sh\u53EF\u4EE5\u4FEE\u6539\uFF1AdownloadFile()\u65B9\u6CD5\u7684 <mark>DOWNLOAD_URL</mark> \uFF1A\u6307\u5B9A\u53EF\u4EE5\u4E0B\u8F7D\u7684helm\u6587\u4EF6\u5730\u5740</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -fsSL -o get_helm3.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>checkDesiredVersion\u65B9\u6CD5\u8FD4\u56DE\uFF1ATAG<span class="token operator">=</span><span class="token string">&quot;v3.6.3&quot;</span>
helm-<span class="token variable">\${TAG}</span>-<span class="token variable">\${OS}</span>-<span class="token variable">\${ARCH}</span>.\u6362\u6210 helm-v3.6.3-linux-amd64.
<span class="token assign-left variable">HELM_TMP_ROOT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>mktemp -dt helm-installer-XXXXXX<span class="token variable">)</span></span>&quot;</span> \u6362\u6210 <span class="token assign-left variable">HELM_TMP_ROOT</span><span class="token operator">=</span><span class="token string">&quot;helm-installer-T53LxQ&quot;</span>
<span class="token builtin class-name">local</span> <span class="token assign-left variable">github_release_url</span><span class="token operator">=</span><span class="token string">&quot;https://github.com/helm/helm/releases/download/<span class="token variable">\${TAG}</span>&quot;</span> \u6362\u6210 https://github.com/helm/
\u624B\u52A8\u4E0B\u8F7D\uFF1A
<span class="token function">curl</span> -SsL https://github.com/helm/helm-v3.6.3-linux-amd64.tar.gz.sha256 -o /tmp/helm-installer-T53LxQ/helm-v3.6.3-linux-amd64.tar.gz.sha256
<span class="token function">curl</span> -SsL https://github.com/helm/helm-v3.6.3-linux-amd64.tar.gz -o /tmp/helm-installer-T53LxQ/helm-v3.6.3-linux-amd64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>chmod 777 get_helm3.sh	&amp;&amp; chmod +x get_helm3.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>./get_helm3.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm |  helm version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="b\u3001\u4ECE\u4E8C\u8FDB\u5236\u5B89\u88C5-helm3" tabindex="-1"><a class="header-anchor" href="#b\u3001\u4ECE\u4E8C\u8FDB\u5236\u5B89\u88C5-helm3" aria-hidden="true">#</a> b\u3001\u4ECE\u4E8C\u8FDB\u5236\u5B89\u88C5 Helm3<a name="\u4ECE\u4E8C\u8FDB\u5236\u5B89\u88C5 Helm3"></a></h5><p><strong>\u7B2C 1 \u6B65\uFF1A</strong> \u524D\u5F80\uFF1Ahttps://github.com/helm/helm/releases/v3.6.3 \u6216\u8005\u4E0A\u9762\u7684\u5730\u5740</p><p><strong>\u7B2C 2 \u6B65\uFF1A</strong> \u4F7F\u7528 wget \u4E0B\u8F7D\u4E8C\u8FDB\u5236\u6587\u4EF6\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>wget -O helm.tar.gz https://get.helm.sh/helm-v3.6.3-linux-amd64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u7B2C 3 \u6B65\uFF1A</strong> \u89E3\u538B\u4E0B\u8F7D\u7684\u6587\u4EF6\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  <span class="token function">chmod</span> -R <span class="token number">777</span> helm-v3.6.3-linux-amd64.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> -zxvf helm-v3.6.3-linux-amd64.tar.gz <span class="token operator">&amp;&amp;</span>   <span class="token function">chmod</span> +x /home/a/linux-amd64/helm <span class="token operator">&amp;&amp;</span>   <span class="token function">cp</span> /home/a/linux-amd64/helm /usr/local/bin/ <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> -rf /home/a/linux-amd64 <span class="token operator">&amp;&amp;</span> <span class="token function">ls</span> /usr/local/bin/ <span class="token operator">&amp;&amp;</span> helm version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u7B2C 6 \u6B65\uFF1A</strong> \u6DFB\u52A0repo</p><p><a href="#Repo">\u6DFB\u52A0\u7A33\u5B9A\u7684 repo</a></p><p><strong>\u7B2C 7 \u6B65\uFF1A</strong> \u67E5\u770B\u5B58\u50A8\u7C7B\u578B</p><blockquote><p>kg sc --all-namespaces</p></blockquote><p>helm3 \u53D8\u5316:</p><ol><li><p>\u53BB\u9664Tiller \u548C helm serve</p></li><li><p>\u9884\u5B9A\u4E49\u4ED3\u5E93\u88AB\u79FB\u9664\uFF0C\u6DFB\u52A0helm hub</p></li></ol><p>helm search \u73B0\u5728\u533A\u5206 repo \u548Chub repo \u662F\u81EA\u5DF1\u624B\u52A8\u6DFB\u52A0\u7684\u6E90 \u6BD4\u5982\u5B98\u65B9\u7684\u6709\u7A33\u5B9A\u7248\u548C\u5728\u5EFA\u8BBE\u7684</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm repo <span class="token function">add</span> stable https://kubernetes-charts.storage.googleapis.com
helm repo <span class="token function">add</span> incubator https://kubernetes-charts-incubator.storage.googleapis.com/
helm repo <span class="token function">add</span> ibmstable https://raw.githubusercontent.com/IBM/charts/master/repo/stable
<span class="token comment"># \u6B64\u5904 repo add \u7684\u65F6\u5019\uFF0C\u5982\u679C\u540D\u79F0\u5DF2\u5B58\u5728\u4E86\u4E5F\u4E0D\u63D0\u9192\uFF0C\u5C45\u7136\u76F4\u63A5\u8986\u76D6\u4E86\uFF0C\u662Fbug\u5427</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u628A hub \u548C google repo \u914D\u5408\u8D77\u6765\u98DF\u7528\uFF0C\u6548\u679C\u66F4\u4F73</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm search hub mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li><p>Values \u652F\u6301 JSON Schema \u6821\u9A8C\u5668</p></li><li><p>\u4EE3\u7801\u590D\u7528 - Library Chart \u652F\u6301</p></li></ol><p>\u5F53\u4E00\u4E2A Chart \u60F3\u8981\u4F7F\u7528\u8BE5 Library Chart\u5185\u7684\u4E00\u4E9B\u6A21\u677F\u65F6\uFF0C\u53EF\u4EE5\u5728 Chart.yaml \u7684 dependencies \u4F9D\u8D56\u9879\u4E2D\u6307\u5B9A</p><ol start="5"><li>requirements.yaml \u88AB\u6574\u5408\u5230\u4E86 Chart.yaml \u4E2D\uFF0C\u4F46\u683C\u5F0F\u4FDD\u6301\u4E0D\u53D8</li></ol><p>helm2/3 \u547D\u4EE4\u5DEE\u5F02</p><h6 id="\u5E38\u7528\u547D\u4EE4\u4E00\u89C8" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u547D\u4EE4\u4E00\u89C8" aria-hidden="true">#</a> \u5E38\u7528\u547D\u4EE4\u4E00\u89C8</h6><table><thead><tr><th>\u547D\u4EE4</th><th>Helm2</th><th>Helm3</th><th>\u5BF9\u5E94h3\u589E\u5F3A\u3001\u533A\u522B</th><th>\u547D\u4EE4\u8BF4\u660E</th></tr></thead><tbody><tr><td>create</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u521B\u5EFA\u5177\u6709\u7ED9\u5B9A\u540D\u79F0\u7684\u65B0\u56FE\u8868</td></tr><tr><td>delete</td><td>\u6709</td><td>\u65E0</td><td>-</td><td>\u7ED9\u5B9A\u53D1\u5E03\u540D\u79F0\uFF0C\u4ECEKubernetes\u4E2D\u5220\u9664\u8BE5\u53D1\u5E03</td></tr><tr><td>dependency</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u7BA1\u7406\u56FE\u8868\u7684\u4F9D\u8D56\u9879</td></tr><tr><td>fetch</td><td>\u6709</td><td>\u65E0</td><td>- <strong>pull</strong></td><td>\u4ECE\u5B58\u50A8\u5E93\u4E0B\u8F7D\u56FE\u8868\uFF0C\u5E76\uFF08\u53EF\u9009\uFF09\u5C06\u5176\u89E3\u538B\u7F29\u5230\u672C\u5730\u76EE\u5F55\u4E2D</td></tr><tr><td>get</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u4E0B\u8F7D\u547D\u540D\u7248\u672C</td></tr><tr><td>history</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u83B7\u53D6\u53D1\u5E03\u5386\u53F2\u8BB0\u5F55</td></tr><tr><td>home</td><td>\u6709</td><td>\u65E0</td><td>- <strong>env</strong></td><td>\u663E\u793AHELM_HOME\u7684\u4F4D\u7F6E</td></tr><tr><td>init</td><td>\u6709</td><td>\u65E0</td><td>-</td><td>\u5728\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u4E0A\u521D\u59CB\u5316Helm</td></tr><tr><td>inspect</td><td>\u6709</td><td>\u65E0</td><td>- <strong>show</strong></td><td>\u67E5\u9605\u56FE\u8868</td></tr><tr><td>install</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u5B89\u88C5\u56FE\u8868\u5B58\u6863</td></tr><tr><td>lint</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u68C0\u67E5\u56FE\u8868\u4E2D\u53EF\u80FD\u51FA\u73B0\u7684\u95EE\u9898</td></tr><tr><td>list</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u5217\u8868\u53D1\u5E03</td></tr><tr><td>package</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u5C06\u56FE\u8868\u76EE\u5F55\u6253\u5305\u5230\u56FE\u8868\u5B58\u6863\u4E2D</td></tr><tr><td>plugin</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u6DFB\u52A0\u3001\u5217\u51FA\u6216\u5220\u9664\u5934\u76D4\u63D2\u4EF6</td></tr><tr><td>repo</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u6DFB\u52A0\u3001\u5217\u51FA\u3001\u5220\u9664\u3001\u66F4\u65B0\u548C\u7D22\u5F15\u56FE\u8868\u5B58\u50A8\u5E93</td></tr><tr><td>reset</td><td>\u6709</td><td>\u65E0</td><td>-</td><td>\u4ECE\u96C6\u7FA4\u5378\u8F7DTiller</td></tr><tr><td>rollback</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u5C06\u53D1\u5E03\u56DE\u6EDA\u5230\u4EE5\u524D\u7684\u7248\u672C</td></tr><tr><td>search</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u5728\u56FE\u8868\u4E2D\u641C\u7D22\u5173\u952E\u5B57</td></tr><tr><td>serve</td><td>\u6709</td><td>\u65E0</td><td>-</td><td>\u542F\u52A8\u672C\u5730http web\u670D\u52A1\u5668</td></tr><tr><td>status</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u663E\u793A\u547D\u540D\u7248\u672C\u7684\u72B6\u6001</td></tr><tr><td>template</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u672C\u5730\u6E32\u67D3\u6A21\u677F</td></tr><tr><td>test</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u6D4B\u8BD5\u53D1\u5E03</td></tr><tr><td>upgrade</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u5347\u7EA7\u53D1\u884C\u7248</td></tr><tr><td>verify</td><td>\u6709</td><td>\u6709</td><td>\u65E0</td><td>\u9A8C\u8BC1\u7ED9\u5B9A\u8DEF\u5F84\u4E0A\u7684\u56FE\u8868\u662F\u5426\u5DF2\u7B7E\u540D\u4E14\u6709\u6548</td></tr><tr><td>version</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u6253\u5370\u5BA2\u6237\u7AEF/\u670D\u52A1\u5668\u7248\u672C\u4FE1\u606F</td></tr><tr><td><strong>env</strong></td><td>\u65E0</td><td>\u6709</td><td>-</td><td>Helm\u5BA2\u6237\u7AEF\u73AF\u5883\u4FE1\u606F</td></tr><tr><td><strong>help</strong></td><td>\u65E0</td><td>\u6709</td><td>-</td><td>\u5173\u4E8E\u4EFB\u4F55\u547D\u4EE4\u7684\u5E2E\u52A9</td></tr><tr><td><strong>pull</strong></td><td>\u65E0</td><td>\u6709</td><td>-</td><td>\u4ECE\u5B58\u50A8\u5E93\u4E0B\u8F7D\u56FE\u8868\uFF0C\u5E76\uFF08\u53EF\u9009\uFF09\u5C06\u5176\u89E3\u538B\u7F29\u5230\u672C\u5730\u76EE\u5F55\u4E2D</td></tr><tr><td><strong>show</strong></td><td>\u65E0</td><td>\u6709</td><td>-</td><td>\u663E\u793A\u56FE\u8868\u7684\u4FE1\u606F</td></tr><tr><td><strong>uninstall</strong></td><td>\u65E0</td><td>\u6709</td><td>-</td><td>\u5378\u8F7D\u53D1\u884C\u7248</td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><ul><li>env\u662F\u5BF9\u88AB\u5220\u9664\u7684\u547D\u4EE4home\u7684\u5F3A\u5316</li><li>pull\u662F\u5BF9\u88AB\u5220\u9664\u7684\u547D\u4EE4fetch\u7684\u66FF\u6362</li><li>show\u662F\u5BF9\u88AB\u5220\u9664\u7684\u547D\u4EE4inspect\u7684\u66FF\u6362</li><li>help\u547D\u4EE4\u672C\u8EAB\u5728Helm 2\u65F6\u4EE3\u5C31\u53EF\u4EE5\u4F7F\u7528\uFF0C\u53EA\u662Fhelm --help\u91CC\u9762\u6CA1\u6709\u663E\u793A\uFF0C\u7B97\u662F\u6587\u6863\u81EA\u5305\u542B\u7684\u5F3A\u5316</li><li>uninstall\u662F\u529F\u80FD\u7279\u6027\u7684\u589E\u5F3A</li></ul><p>Helm 3: \u547D\u4EE4\u53D1\u751F\u7684\u53D8\u5316</p><table><thead><tr><th>\u547D\u4EE4</th><th>Helm 2</th><th>Helm 3</th><th>\u547D\u4EE4\u8BF4\u660E\u533A\u522B</th><th>Helm 2 \u547D\u4EE4\u8BF4\u660E</th><th>Helm 3\u547D\u4EE4\u8BF4\u660E</th></tr></thead><tbody><tr><td>get</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u4E0B\u8F7D\u547D\u540D\u7248\u672C</td><td>\u4E0B\u8F7D\u547D\u540D\u7248\u672C\u7684\u6269\u5C55\u4FE1\u606F</td></tr><tr><td>install</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u5B89\u88C5\u56FE\u8868\u5B58\u6863</td><td>\u5B89\u88C5\u56FE\u8868</td></tr><tr><td>plugin</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u6DFB\u52A0\u3001\u5217\u51FA\u6216\u5220\u9664\u5934\u76D4\u63D2\u4EF6</td><td>\u5B89\u88C5\u3001\u5217\u51FA\u6216\u5378\u8F7DHelm\u63D2\u4EF6</td></tr><tr><td>test</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u6D4B\u8BD5\u53D1\u5E03</td><td>\u4E3A\u53D1\u5E03\u8FD0\u884C\u6D4B\u8BD5</td></tr><tr><td>version</td><td>\u6709</td><td>\u6709</td><td>\u6709</td><td>\u6253\u5370\u5BA2\u6237\u7AEF/\u670D\u52A1\u5668\u7248\u672C\u4FE1\u606F</td><td>\u6253\u5370\u5BA2\u6237\u7AEF\u7248\u672C\u4FE1\u606F</td></tr></tbody></table><p>\u5B89\u88C5 helm2</p><p>a\u3001\u5B89\u88C5\u65B9\u6CD5\u4E0E [helm3](#\u4ECE\u4E8C\u8FDB\u5236\u5B89\u88C5 Helm3) \u76F8\u540C</p><p>b\u3001helm2 \u521D\u59CB\u5316\u5B89\u88C5(tiller\u670D\u52A1) helm_rbac.yaml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tiller
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tiller
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cluster<span class="token punctuation">-</span>admin
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tiller
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl apply -f helm_rbac.yaml</p><p><img src="`+J+`" alt="image-20211213154707900"></p><p>c\u3001\u521D\u59CB\u5316 Helm2\uFF1A\u90E8\u7F72 Tiller</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm init --service-account<span class="token operator">=</span>tiller --tiller-image<span class="token operator">=</span>registry.aliyuncs.com/google_containers/tiller:v2.16.12 --history-max <span class="token number">300</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm init -i registry.aliyuncs.com/google_containers/tiller:v2.16.12 --stable-repo-url http://mirror.azure.cn/kubernetes/charts/ --service-account tiller --override spec.selector.matchLabels.<span class="token string">&#39;name&#39;</span><span class="token operator">=</span><span class="token string">&#39;tiller&#39;</span>,spec.selector.matchLabels.<span class="token string">&#39;app&#39;</span><span class="token operator">=</span><span class="token string">&#39;helm&#39;</span> --output yaml <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s@apiVersion: extensions/v1beta1@apiVersion: apps/v1@&#39;</span> <span class="token operator">|</span> kubectl apply -f -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u6DFB\u52A0\u7A33\u5B9A\u7684-helm-repo" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u7A33\u5B9A\u7684-helm-repo" aria-hidden="true">#</a> \u6DFB\u52A0\u7A33\u5B9A\u7684 Helm Repo <a name="Repo"></a></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6DFB\u52A0\u963F\u91CC\u4E91\u7684 chart \u4ED3\u5E93</span>
helm repo <span class="token function">add</span> aliyun https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts
helm repo <span class="token function">add</span> stable http://mirror.azure.cn/kubernetes/charts/ \u63A8\u8350
helm repo <span class="token function">add</span> bitnami https://charts.bitnami.com/bitnami
\u5220\u9664\uFF1Ahelm repo remove aliyun
<span class="token comment"># \u66F4\u65B0chart\u4ED3\u5E93</span>
a@node1:~$ helm repo update

<span class="token comment"># \u67E5\u770B\u914D\u7F6E\u7684 chart \u4ED3\u5E93\u6709\u54EA\u4E9B</span>
a@node1:~$ helm repo list
NAME    URL
aliyun  https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts
stable  http://mirror.azure.cn/kubernetes/charts/
bitnami https://charts.bitnami.com/bitnami

<span class="token comment"># \u4ECE\u6307\u5B9A chart \u4ED3\u5E93\u5730\u5740\u641C\u7D22 chart</span>
a@node1:~$ helm search repo aliyun <span class="token operator">|</span> <span class="token function">grep</span> redis
aliyun/redis                    <span class="token number">1.1</span>.15          <span class="token number">4.0</span>.8           Open source, advanced key-value store. It is of<span class="token punctuation">..</span>.
aliyun/redis-ha                 <span class="token number">2.0</span>.1                           Highly available Redis cluster with multiple se<span class="token punctuation">..</span>.

a@node1:~$ helm search repo stable <span class="token operator">|</span> <span class="token function">grep</span> redis
stable/prometheus-redis-exporter        <span class="token number">3.5</span>.1           <span class="token number">1.3</span>.4                   DEPRECATED Prometheus exporter <span class="token keyword">for</span> Redis metrics
stable/redis                            <span class="token number">10.5</span>.7          <span class="token number">5.0</span>.7                   DEPRECATED Open source, advanced key-value stor<span class="token punctuation">..</span>.
stable/redis-ha                         <span class="token number">4.4</span>.6           <span class="token number">5.0</span>.6                   DEPRECATED - Highly available Kubernetes implem<span class="token punctuation">..</span>.

a@node1:~$ helm search repo bitnami <span class="token operator">|</span> <span class="token function">grep</span> redis
bitnami/redis                                   <span class="token number">15.6</span>.4          <span class="token number">6.2</span>.6           Open source, advanced key-value store. It is of<span class="token punctuation">..</span>.
bitnami/redis-cluster                           <span class="token number">7.0</span>.13          <span class="token number">6.2</span>.6           Open source, advanced key-value store. It is of<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="b\u3001\u5B89\u88C5\u5B58\u50A8\u7C7B-openebs-\u4EC5\u9002\u7528\u4E8E\u5F00\u53D1\u6D4B\u8BD5\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#b\u3001\u5B89\u88C5\u5B58\u50A8\u7C7B-openebs-\u4EC5\u9002\u7528\u4E8E\u5F00\u53D1\u6D4B\u8BD5\u73AF\u5883" aria-hidden="true">#</a> B\u3001\u5B89\u88C5\u5B58\u50A8\u7C7B OpenEBS \uFF08\u4EC5\u9002\u7528\u4E8E\u5F00\u53D1\u6D4B\u8BD5\u73AF\u5883\uFF09<a name="OpenEBS"></a></h3><p>https://v2-1.docs.kubesphere.io/docs/zh-CN/appendix/install-openebs/</p>`,48),xa=s("\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CKubeKey \u5C06\u5B89\u88C5 "),_a={href:"https://openebs.io/",target:"_blank",rel:"noopener noreferrer"},qa=s("OpenEBS"),Pa=s(" \u6765\u4E3A\u5F00\u53D1\u548C\u6D4B\u8BD5\u73AF\u5883\u914D\u7F6E LocalPV"),wa=t(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm search repo stable | grep openebs
helm install --namespace openebs -n --generate-name openebs stable/openebs --version 1.11.1
kubectl apply -f https://github.com/openebs/charts/blob/openebs-3.0.6/archive/1.9.x/openebs-operator-1.9.0.yaml
https://github.com/openebs/charts/blob/openebs-3.0.6/charts/openebs/Chart.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="c\u3001kubekey-2-0-0-\u63A8\u8350" tabindex="-1"><a class="header-anchor" href="#c\u3001kubekey-2-0-0-\u63A8\u8350" aria-hidden="true">#</a> C\u3001KubeKey-2.0.0\uFF08\u63A8\u8350\uFF09<a name="KubeKey"></a></h3><table><thead><tr><th style="text-align:center;">\u9009\u9879</th><th>Kubernetes \u7248\u672C \u2265 1.18</th><th>Kubernetes \u7248\u672C &lt; 1.18</th></tr></thead><tbody><tr><td style="text-align:center;">socat</td><td>\u5FC5\u987B\u5B89\u88C5</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td></tr><tr><td style="text-align:center;">conntrack</td><td>\u5FC5\u987B\u5B89\u88C5</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td></tr><tr><td style="text-align:center;">ebtables</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td></tr><tr><td style="text-align:center;">ipset</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td></tr><tr><td style="text-align:center;">ipvsadm</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td><td>\u53EF\u9009\uFF0C\u4F46\u63A8\u8350\u5B89\u88C5</td></tr></tbody></table><blockquote><p>yum install -y socat conntrack ebtables ipset ipvsadm</p></blockquote><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CKubeKey \u5C06\u5B89\u88C5 <a href="#OpenEBS">OpenEBS</a> \u6765\u4E3A\u5F00\u53D1\u548C\u6D4B\u8BD5\u73AF\u5883\u914D\u7F6E LocalPV</p><p>https://kubesphere.io/zh/</p><p>\u4E0B\u8F7D\uFF1Ahttps://github.com/kubesphere/kubekey/releases\u3001https://gitee.com/k8s_s/kubekey/tags</p><p>https://github.com/kubesphere/kubekey/releases/download/v2.0.0/kubekey-v2.0.0-linux-amd64.tar.gz</p><p>\u6216\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">KKZONE</span><span class="token operator">=</span>cn

<span class="token function">curl</span> -sfL https://get-kk.kubesphere.io <span class="token operator">|</span> <span class="token assign-left variable">VERSION</span><span class="token operator">=</span>v1.2.0 <span class="token function">sh</span> -
<span class="token function">curl</span> -sfL https://get-kk.kubesphere.io <span class="token operator">|</span> <span class="token assign-left variable">VERSION</span><span class="token operator">=</span>v2.0.0 <span class="token function">sh</span> -
\u6216
<span class="token builtin class-name">cd</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> https://github.com/kubesphere/kubekey/releases/download/v2.0.0/kubekey-v2.0.0-linux-amd64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B89\u88C5 kk \u5B89\u88C5docker+k8s\u73AF\u5883\u3001\u5B89\u88C5k8s\u3001\u7F51\u5173\u3001\u5B89\u88C5kk\u3001\u5B89\u88C5ks</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">chmod</span> -R <span class="token number">777</span> kubekey-v2.1.0-linux-amd64.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
<span class="token function">mkdir</span> ./kubekey-v2.1.0 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
<span class="token function">tar</span> -zxvf kubekey-v2.1.0-linux-amd64.tar.gz -C ./kubekey-v2.1.0 <span class="token punctuation">\\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> -rf ./kubekey-v2.1.0/README.md <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
  <span class="token function">chmod</span> +x ./kubekey-v2.1.0/kk <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
  <span class="token function">cp</span> ./kubekey-v2.1.0/kk /usr/local/bin/ <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
<span class="token function">cp</span> ./kubekey-v2.1.0/kk ./ <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
<span class="token function">rm</span> -rf ./kubekey-v2.1.0 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
<span class="token function">ls</span> /usr/local/bin/ <span class="token operator">&amp;&amp;</span> kk version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u3001\u4F7F\u7528-kubekey-\u624B\u52A8\u914D\u7F6E\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2-\u3001\u4F7F\u7528-kubekey-\u624B\u52A8\u914D\u7F6E\u5B89\u88C5" aria-hidden="true">#</a> 2\uFF09\u3001\u4F7F\u7528 KubeKey \u624B\u52A8\u914D\u7F6E\u5B89\u88C5<a name="\u4F7F\u7528 KubeKey \u5B89\u88C5"></a></h2><h3 id="\u67E5\u770B\u652F\u6301\u7684k8s\u7248\u672C-kk-version-show-supported-k8s" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u652F\u6301\u7684k8s\u7248\u672C-kk-version-show-supported-k8s" aria-hidden="true">#</a> \u67E5\u770B\u652F\u6301\u7684k8s\u7248\u672C\uFF1Akk version --show-supported-k8s</h3><p>2.0.0\uFF1Ahttps://gitee.com/k8s_s/kubekey/blob/v2.0.0/docs/kubernetes-versions.md</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>v1.19.0 v1.19.8 v1.19.9
v1.20.4 v1.20.6 v1.20.10
v1.21.4 v1.21.5
v1.22.1
v1.23.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.1.0\uFF1Ahttps://gitee.com/k8s_s/kubekey/blob/v2.1.0/docs/kubernetes-versions.md</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>v1.19.0 v1.19.8	v1.19.9
v1.20.4	v1.20.6	v1.20.10
v1.21.4	v1.21.5
v1.22.1	v1.22.9
v1.23.0	v1.23.6
v1.24.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5185\u7F6E\u4E0B\u8F7D\u7248\u672C\uFF1A\u3010kubeadm v1.22.9\u3001kubelet v1.22.9\u3001kubectl v1.22.9\u3001helm v3.6.3\u3001kubecni v0.9.1\u3001crictl v1.22.0\u3001etcd v3.4.13\u3001docker 20.10.8\u3001\u3001\u3011</p><p><strong>init config \u6587\u4EF6</strong></p><blockquote><p>./kk create config --with-kubernetes v1.22.9 --with-kubesphere v3.2.1</p></blockquote><p>config-sample.yaml \u6587\u4EF6</p><blockquote><p>kk create config \u4F1A\u81EA\u52A8\u521B\u5EFA config-sample.yaml</p></blockquote><p>\u6216\u8005\uFF1Ahttps://gitee.com/k8s_s/kubekey/blob/v2.0.0/docs/config-example.md</p><p>\u4E3B\u8981\u5185\u5BB9\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  - <span class="token punctuation">{</span>name<span class="token operator">:</span> master<span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.120</span><span class="token punctuation">,</span> internalAddress<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.120</span><span class="token punctuation">,</span> user<span class="token operator">:</span> root<span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token string">&quot;123456a&quot;</span><span class="token punctuation">}</span>
  - <span class="token punctuation">{</span>name<span class="token operator">:</span> node1<span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.121</span><span class="token punctuation">,</span> internalAddress<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.121</span><span class="token punctuation">,</span> user<span class="token operator">:</span> root<span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token string">&quot;123456a&quot;</span><span class="token punctuation">}</span>
  - <span class="token punctuation">{</span>name<span class="token operator">:</span> node2<span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.122</span><span class="token punctuation">,</span> internalAddress<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.122</span><span class="token punctuation">,</span> user<span class="token operator">:</span> root<span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token string">&quot;123456a&quot;</span><span class="token punctuation">}</span>

  - <span class="token punctuation">{</span>name<span class="token operator">:</span> master<span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.120</span><span class="token punctuation">,</span> internalAddress<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.120</span><span class="token punctuation">,</span> privateKeyPath<span class="token operator">:</span> <span class="token string">&quot;~/.ssh/id_rsa&quot;</span><span class="token punctuation">}</span>
  - <span class="token punctuation">{</span>name<span class="token operator">:</span> node1<span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.121</span><span class="token punctuation">,</span> internalAddress<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.121</span><span class="token punctuation">,</span> privateKeyPath<span class="token operator">:</span> <span class="token string">&quot;~/.ssh/id_rsa&quot;</span><span class="token punctuation">}</span>
  - <span class="token punctuation">{</span>name<span class="token operator">:</span> node2<span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.122</span><span class="token punctuation">,</span> internalAddress<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">101.122</span><span class="token punctuation">,</span> privateKeyPath<span class="token operator">:</span> <span class="token string">&quot;~/.ssh/id_rsa&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> kubekey.kubesphere.io/v1alpha2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Cluster
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> master<span class="token punctuation">,</span> <span class="token key atrule">address</span><span class="token punctuation">:</span> 192.168.101.120<span class="token punctuation">,</span> <span class="token key atrule">internalAddress</span><span class="token punctuation">:</span> 192.168.101.120<span class="token punctuation">,</span> <span class="token key atrule">user</span><span class="token punctuation">:</span> root<span class="token punctuation">,</span> <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;123456a&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> node1<span class="token punctuation">,</span> <span class="token key atrule">address</span><span class="token punctuation">:</span> 192.168.101.121<span class="token punctuation">,</span> <span class="token key atrule">internalAddress</span><span class="token punctuation">:</span> 192.168.101.121<span class="token punctuation">,</span> <span class="token key atrule">user</span><span class="token punctuation">:</span> root<span class="token punctuation">,</span> <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;123456a&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> node2<span class="token punctuation">,</span> <span class="token key atrule">address</span><span class="token punctuation">:</span> 192.168.101.122<span class="token punctuation">,</span> <span class="token key atrule">internalAddress</span><span class="token punctuation">:</span> 192.168.101.122<span class="token punctuation">,</span> <span class="token key atrule">user</span><span class="token punctuation">:</span> root<span class="token punctuation">,</span> <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;123456a&quot;</span><span class="token punctuation">}</span>

  <span class="token key atrule">roleGroups</span><span class="token punctuation">:</span>
    <span class="token key atrule">etcd</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
    <span class="token key atrule">control-plane</span><span class="token punctuation">:</span> 
    <span class="token punctuation">-</span> master
    <span class="token key atrule">worker</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> node1
    <span class="token punctuation">-</span> node2
  <span class="token key atrule">controlPlaneEndpoint</span><span class="token punctuation">:</span>
    <span class="token comment">## Internal loadbalancer for apiservers </span>
    <span class="token comment">##\u5F00\u542F\u5185\u7F6E\u9AD8\u53EF\u7528\u6A21\u5F0F</span>
    <span class="token comment"># internalLoadbalancer: haproxy</span>
    
<span class="token key atrule">clusterRole</span><span class="token punctuation">:</span> host <span class="token comment"># host | member | none</span>
<span class="token key atrule">privateRegistry</span><span class="token punctuation">:</span> <span class="token string">&quot;registry.cn-beijing.aliyuncs.com/kubesphereio&quot;</span>
<span class="token key atrule">network.plugin</span><span class="token punctuation">:</span> flannel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u521D\u59CB\u5316yaml</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./kk init os -f config-sample.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>[kubeadm init](#kubeadm init)</p><p><strong>\u5F00\u59CB\u5B89\u88C5\uFF1A\u4F7F\u7528\u914D\u7F6E\u6587\u4EF6\u521B\u5EFA\u96C6\u7FA4</strong></p><p>https://kubesphere.com.cn/docs/multicluster-management/enable-multicluster/direct-connection/</p><blockquote><p>export KKZONE=cn</p><p>./kk create cluster -f config-sample.yaml</p><p>./kk delete cluster -f config-sample.yaml</p></blockquote><p>\u4F1A\u81EA\u52A8\u521B\u5EFA\uFF1A/home/a/kubekey/</p><p>\u767B\u5F55\uFF1Ahttp://nginx.k8s.com:30880/ admin/P@88w0rd</p><p>http://ks.k8s.com:30880/</p><h2 id="_3-\u3001-\u4EE5-ks-installer-\u5B89\u88C5-kubesphere-\u63A8\u8350" tabindex="-1"><a class="header-anchor" href="#_3-\u3001-\u4EE5-ks-installer-\u5B89\u88C5-kubesphere-\u63A8\u8350" aria-hidden="true">#</a> 3\uFF09\u3001 \u4EE5 ks-installer \u5B89\u88C5 kubesphere\uFF08\u63A8\u8350\uFF09</h2><p>https://github.com/kubesphere/ks-installer/</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>wget https://github.com/kubesphere/ks-installer/releases/download/v3.2.1/kubesphere-installer.yaml &amp;&amp; wget https://github.com/kubesphere/ks-installer/releases/download/v3.2.1/cluster-configuration.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>https://gitee.com/k8s_s/ks-installer/blob/v3.2.1/deploy/kubesphere-installer.yaml
https://gitee.com/k8s_s/ks-installer/blob/v3.2.1/deploy/cluster-configuration.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u597D\u5148\u53C2\u7167\u79BB\u7EBF\u5B89\u88C5\u91CC\u7684\u955C\u50CF\u4E0B\u8F7D\u4E0B\u6765.</p><p>kubectl apply -f ks-installer.yaml</p><p>kubectl apply -f ks-cluster.yaml</p><p>\u67E5\u770B\u5B89\u88C5\u8FDB\u5EA6:</p><blockquote><p>kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath=&#39;{.items[0].metadata.name}&#39;) -f</p></blockquote><p>kubectl get svc/ks-console -n kubesphere-system</p><p>\u89E3\u51B3etcd\u76D1\u63A7\u8BC1\u4E66\u627E\u4E0D\u5230\u95EE\u9898:</p><blockquote><p>kubectl -n kubesphere-monitoring-system create secret generic kube-etcd-client-certs --from-file=etcd-client-ca.crt=/etc/kubernetes/pki/etcd/ca.crt --from-file=etcd-client.crt=/etc/kubernetes/pki/apiserver-etcd-client.crt --from-file=etcd-client.key=/etc/kubernetes/pki/apiserver-etcd-client.key</p></blockquote><h3 id="ks-installer-yaml" tabindex="-1"><a class="header-anchor" href="#ks-installer-yaml" aria-hidden="true">#</a> ks-installer.yaml</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apiextensions.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> CustomResourceDefinition
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> clusterconfigurations.installer.kubesphere.io
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">group</span><span class="token punctuation">:</span> installer.kubesphere.io
  <span class="token key atrule">versions</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> v1alpha1
      <span class="token key atrule">served</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">storage</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">openAPIV3Schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> object
          <span class="token key atrule">properties</span><span class="token punctuation">:</span>
            <span class="token key atrule">spec</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">x-kubernetes-preserve-unknown-fields</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">status</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">x-kubernetes-preserve-unknown-fields</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">scope</span><span class="token punctuation">:</span> Namespaced
  <span class="token key atrule">names</span><span class="token punctuation">:</span>
    <span class="token key atrule">plural</span><span class="token punctuation">:</span> clusterconfigurations
    <span class="token key atrule">singular</span><span class="token punctuation">:</span> clusterconfiguration
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterConfiguration
    <span class="token key atrule">shortNames</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> cc

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Namespace
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kubesphere<span class="token punctuation">-</span>system

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kubesphere<span class="token punctuation">-</span>system

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;&quot;</span>
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> apps
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> extensions
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> batch
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> rbac.authorization.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> apiregistration.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> apiextensions.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> tenant.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> certificates.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> devops.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> monitoring.coreos.com
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> logging.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> jaegertracing.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> storage.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> admissionregistration.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> policy
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> autoscaling
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> networking.istio.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> config.istio.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> iam.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> notification.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> auditing.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> events.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> core.kubefed.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> installer.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> storage.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> security.istio.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> monitoring.kiali.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> kiali.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> networking.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> kubeedge.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> types.kubefed.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> monitoring.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> application.kubesphere.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;*&#39;</span>


<span class="token punctuation">---</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kubesphere<span class="token punctuation">-</span>system
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kubesphere<span class="token punctuation">-</span>system
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>install
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>install
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>install
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> installer
        <span class="token key atrule">image</span><span class="token punctuation">:</span> kubesphere/ks<span class="token punctuation">-</span>installer<span class="token punctuation">:</span>v3.2.1
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> <span class="token string">&quot;Always&quot;</span>
        <span class="token key atrule">resources</span><span class="token punctuation">:</span>
          <span class="token key atrule">limits</span><span class="token punctuation">:</span>
            <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
            <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1Gi
          <span class="token key atrule">requests</span><span class="token punctuation">:</span>
            <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 20m
            <span class="token key atrule">memory</span><span class="token punctuation">:</span> 100Mi
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /etc/localtime
          <span class="token key atrule">name</span><span class="token punctuation">:</span> host<span class="token punctuation">-</span>time
          <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> /etc/localtime
          <span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> host<span class="token punctuation">-</span>time

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ks-cluster-yaml" tabindex="-1"><a class="header-anchor" href="#ks-cluster-yaml" aria-hidden="true">#</a> ks-cluster.yaml</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> installer.kubesphere.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterConfiguration
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ks<span class="token punctuation">-</span>installer
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kubesphere<span class="token punctuation">-</span>system
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> v3.2.1
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">persistence</span><span class="token punctuation">:</span>
    <span class="token key atrule">storageClass</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span> <span class="token comment">#\u5982\u679C\u60A8\u7684\u96C6\u7FA4\u4E2D\u6CA1\u6709\u9ED8\u8BA4\u7684 StorageClass\uFF0C\u5219\u9700\u8981\u5728\u6B64\u5904\u6307\u5B9A\u73B0\u6709\u7684 StorageClass\u3002</span>
  <span class="token key atrule">authentication</span><span class="token punctuation">:</span>
    <span class="token key atrule">jwtSecret</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>           <span class="token comment"># \u4FDD\u6301 jwtSecret \u4E0E\u4E3B\u673A\u96C6\u7FA4\u4E00\u81F4\u3002\u901A\u8FC7\u5728\u4E3B\u673A\u96C6\u7FA4\u4E0A\u6267\u884C\u201Ckubectl -n kubesphere-system get cm kubesphere-config -o yaml | grep -v &quot;apiVersion&quot; | grep jwtSecret&quot; \u6765\u68C0\u7D22 jwtSecret.</span>
  <span class="token key atrule">local_registry</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>        <span class="token comment"># \u5982\u679C\u9700\u8981\uFF0C\u8BF7\u6DFB\u52A0\u60A8\u7684\u79C1\u4EBA\u6CE8\u518C\u5730\u5740\u3002</span>
  <span class="token comment"># dev_tag: &quot;&quot;               # \u6DFB\u52A0\u60A8\u8981\u5B89\u88C5\u7684 kubesphere \u955C\u50CF\u6807\u7B7E\uFF0C\u9ED8\u8BA4\u4E0E ks-install \u53D1\u884C\u7248\u76F8\u540C\u3002</span>
  <span class="token key atrule">etcd</span><span class="token punctuation">:</span>
    <span class="token key atrule">monitoring</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>       <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 etcd \u76D1\u63A7\u4EEA\u8868\u677F\u5B89\u88C5\u3002\u5728\u542F\u7528\u4E4B\u524D\uFF0C\u60A8\u5FC5\u987B\u4E3A etcd \u521B\u5EFA\u4E00\u4E2A Secret\u3002</span>
    <span class="token key atrule">endpointIps</span><span class="token punctuation">:</span> 192.168.101.120  <span class="token comment"># etcd \u96C6\u7FA4 EndpointIps\u3002\u8FD9\u91CC\u53EF\u4EE5\u662F\u4E00\u5806IP\u3002</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">2379</span>              <span class="token comment"># etcd \u7AEF\u53E3\u3002</span>
    <span class="token key atrule">tlsEnable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">common</span><span class="token punctuation">:</span>
    <span class="token key atrule">core</span><span class="token punctuation">:</span>
      <span class="token key atrule">console</span><span class="token punctuation">:</span>
        <span class="token key atrule">enableMultiLogin</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># \u542F\u7528\u6216\u7981\u7528\u540C\u65F6\u767B\u5F55\u3002\u5B83\u5141\u8BB8\u4E0D\u540C\u7684\u7528\u6237\u540C\u65F6\u4F7F\u7528\u540C\u4E00\u4E2A\u5E10\u6237\u767B\u5F55\u3002</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">30880</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
    <span class="token comment"># apiserver:            # \u653E\u5927apiserver\u548Ccontroller manager\u5BF9\u5927\u96C6\u7FA4\u7684\u8D44\u6E90\u8BF7\u6C42\u548C\u9650\u5236</span>
    <span class="token comment">#  resources: {}</span>
    <span class="token comment"># controllerManager:</span>
    <span class="token comment">#  resources: {}</span>
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">volumeSize</span><span class="token punctuation">:</span> 2Gi <span class="token comment"># Redis PVC size.</span>
    <span class="token key atrule">openldap</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">volumeSize</span><span class="token punctuation">:</span> 2Gi   <span class="token comment"># openldap PVC size.</span>
    <span class="token key atrule">minio</span><span class="token punctuation">:</span>
      <span class="token key atrule">volumeSize</span><span class="token punctuation">:</span> 20Gi <span class="token comment"># Minio PVC size.</span>
    <span class="token key atrule">monitoring</span><span class="token punctuation">:</span>
      <span class="token comment"># type: external   # \u662F\u5426\u6307\u5B9A\u5916\u90E8prometheus\u6808\uFF0C\u9700\u8981\u5728\u4E0B\u4E00\u884C\u4FEE\u6539endpoint\u3002</span>
      <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//prometheus<span class="token punctuation">-</span>operated.kubesphere<span class="token punctuation">-</span>monitoring<span class="token punctuation">-</span>system.svc<span class="token punctuation">:</span><span class="token number">9090</span> <span class="token comment"># Prometheus \u7AEF\u70B9\u83B7\u53D6\u6307\u6807\u6570\u636E\u3002</span>
      <span class="token key atrule">GPUMonitoring</span><span class="token punctuation">:</span>     <span class="token comment"># \u542F\u7528\u6216\u7981\u7528\u4E0E GPU \u76F8\u5173\u7684\u6307\u6807\u3002\u5982\u679C\u542F\u7528\u6B64\u5F00\u5173\u4F46\u6CA1\u6709 GPU \u8D44\u6E90\uFF0CKubesphere \u4F1A\u5C06\u5176\u8BBE\u7F6E\u4E3A\u96F6\u3002</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">gpu</span><span class="token punctuation">:</span>                 <span class="token comment"># \u5B89\u88C5 GPUKinds\u3002\u9ED8\u8BA4 GPU \u7C7B\u578B\u662F nvidia.comgpu\u3002\u53EF\u4EE5\u6839\u636E\u9700\u8981\u5728\u6B64\u5904\u6DFB\u52A0\u5176\u4ED6 GPU \u7C7B\u578B\u3002</span>
      <span class="token key atrule">kinds</span><span class="token punctuation">:</span>         
      <span class="token punctuation">-</span> <span class="token key atrule">resourceName</span><span class="token punctuation">:</span> <span class="token string">&quot;nvidia.com/gpu&quot;</span>
        <span class="token key atrule">resourceType</span><span class="token punctuation">:</span> <span class="token string">&quot;GPU&quot;</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">es</span><span class="token punctuation">:</span>   <span class="token comment"># \u7528\u4E8E\u65E5\u5FD7\u8BB0\u5F55\u3001\u4E8B\u4EF6\u548C\u5BA1\u8BA1\u7684\u5B58\u50A8\u540E\u7AEF\u3002</span>
      <span class="token comment"># master:</span>
      <span class="token comment">#   volumeSize: 4Gi  # Elasticsearch \u4E3B\u8282\u70B9\u7684\u5377\u5927\u5C0F\u3002</span>
      <span class="token comment">#   replicas: 1      # \u4E3B\u8282\u70B9\u7684\u603B\u6570\u3002\u4E0D\u5141\u8BB8\u4F7F\u7528\u5076\u6570</span>
      <span class="token comment">#   resources: {}</span>
      <span class="token comment"># data:</span>
      <span class="token comment">#   volumeSize: 20Gi  # Elasticsearch \u6570\u636E\u8282\u70B9\u7684\u5377\u5927\u5C0F\u3002</span>
      <span class="token comment">#   replicas: 1       #\u6570\u636E\u8282\u70B9\u7684\u603B\u6570\u3002</span>
      <span class="token comment">#   resources: {}</span>
      <span class="token key atrule">logMaxAge</span><span class="token punctuation">:</span> <span class="token number">7</span>             <span class="token comment"># \u5185\u7F6E Elasticsearch \u4E2D\u7684\u65E5\u5FD7\u4FDD\u7559\u65F6\u95F4\u3002\u9ED8\u8BA4\u4E3A 7 \u5929\u3002</span>
      <span class="token key atrule">elkPrefix</span><span class="token punctuation">:</span> logstash      <span class="token comment"># \u7EC4\u6210\u7D22\u5F15\u540D\u79F0\u7684\u5B57\u7B26\u4E32\u3002\u7D22\u5F15\u540D\u79F0\u5C06\u88AB\u683C\u5F0F\u5316\u4E3A ks-&lt;elk_prefix&gt;-log\u3002</span>
      <span class="token key atrule">basicAuth</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
        <span class="token key atrule">username</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
      <span class="token key atrule">externalElasticsearchUrl</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
      <span class="token key atrule">externalElasticsearchPort</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
  <span class="token key atrule">alerting</span><span class="token punctuation">:</span>                <span class="token comment"># \u5B83\u4F7F\u7528\u6237\u80FD\u591F\u81EA\u5B9A\u4E49\u8B66\u62A5\u7B56\u7565\uFF0C\u4EE5\u4E0D\u540C\u7684\u65F6\u95F4\u95F4\u9694\u548C\u8B66\u62A5\u7EA7\u522B\u53CA\u65F6\u5411\u63A5\u6536\u8005\u53D1\u9001\u6D88\u606F\u4EE5\u4F9B\u9009\u62E9\u3002</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>         <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 KubeSphere \u8B66\u62A5\u7CFB\u7EDF\u3002</span>
    <span class="token comment"># thanosruler:</span>
    <span class="token comment">#   replicas: 1</span>
    <span class="token comment">#   resources: {}</span>
  <span class="token key atrule">auditing</span><span class="token punctuation">:</span>                <span class="token comment"># \u63D0\u4F9B\u4E0E\u5B89\u5168\u76F8\u5173\u7684\u6309\u65F6\u95F4\u987A\u5E8F\u6392\u5217\u7684\u8BB0\u5F55\u96C6\uFF0C\u8BB0\u5F55\u5E73\u53F0\u4E0A\u53D1\u751F\u7684\u7531\u4E0D\u540C\u79DF\u6237\u53D1\u8D77\u7684\u6D3B\u52A8\u7684\u987A\u5E8F</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>         <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 KubeSphere \u5BA1\u8BA1\u65E5\u5FD7\u7CFB\u7EDF\u3002</span>
    <span class="token comment"># operator:</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment"># webhook:</span>
    <span class="token comment">#   resources: {}</span>
  <span class="token key atrule">devops</span><span class="token punctuation">:</span>                  <span class="token comment"># \u63D0\u4F9B\u57FA\u4E8E Jenkins \u7684\u5F00\u7BB1\u5373\u7528 CICD \u7CFB\u7EDF\uFF0C\u4EE5\u53CA Source-to-Image &amp; Binary-to-Image \u7B49\u81EA\u52A8\u5316\u5DE5\u4F5C\u6D41\u5DE5\u5177\u3002</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>             <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 KubeSphere DevOps \u7CFB\u7EDF\u3002</span>
    <span class="token comment"># resources: {}</span>
    <span class="token key atrule">jenkinsMemoryLim</span><span class="token punctuation">:</span> 2Gi      <span class="token comment"># Jenkins memory \u9650\u5236.</span>
    <span class="token key atrule">jenkinsMemoryReq</span><span class="token punctuation">:</span> 1500Mi   <span class="token comment"># Jenkins memory \u8BF7\u6C42.</span>
    <span class="token key atrule">jenkinsVolumeSize</span><span class="token punctuation">:</span> 8Gi     <span class="token comment"># Jenkins volume size.</span>
    <span class="token key atrule">jenkinsJavaOpts_Xms</span><span class="token punctuation">:</span> 512m  <span class="token comment"># \u4EE5\u4E0B\u4E09\u4E2A\u5B57\u6BB5\u662FJVM\u53C2\u6570</span>
    <span class="token key atrule">jenkinsJavaOpts_Xmx</span><span class="token punctuation">:</span> 512m
    <span class="token key atrule">jenkinsJavaOpts_MaxRAM</span><span class="token punctuation">:</span> 2g
  <span class="token key atrule">events</span><span class="token punctuation">:</span>                  <span class="token comment"># \u4E3A\u591A\u79DF\u6237 Kubernetes \u96C6\u7FA4\u4E2D\u7684 Kubernetes \u4E8B\u4EF6\u5BFC\u51FA\u3001\u8FC7\u6EE4\u548C\u8B66\u62A5\u63D0\u4F9B\u56FE\u5F62 Web \u63A7\u5236\u53F0\u3002</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>         <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 KubeSphere \u4E8B\u4EF6\u7CFB\u7EDF\u3002</span>
    <span class="token comment"># operator:</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment"># exporter:</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment"># ruler:</span>
    <span class="token comment">#   enabled: true</span>
    <span class="token comment">#   replicas: 2</span>
    <span class="token comment">#   resources: {}</span>
  <span class="token key atrule">logging</span><span class="token punctuation">:</span>
    <span class="token comment">#\u63D0\u4F9B\u7075\u6D3B\u7684\u65E5\u5FD7\u529F\u80FD\uFF0C\u5728\u7EDF\u4E00\u63A7\u5236\u53F0\u4E2D\u8FDB\u884C\u65E5\u5FD7\u67E5\u8BE2\u3001\u6536\u96C6\u548C\u7BA1\u7406\u3002</span>
    <span class="token comment">#\u53EF\u4EE5\u6DFB\u52A0\u989D\u5916\u7684\u65E5\u5FD7\u6536\u96C6\u5668\uFF0C\u4F8B\u5982 Elasticsearch\u3001Kafka \u548C Fluentd\u3002</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>         <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 KubeSphere \u65E5\u5FD7\u7CFB\u7EDF\u3002</span>
    <span class="token key atrule">containerruntime</span><span class="token punctuation">:</span> docker
    <span class="token key atrule">logsidecar</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
      <span class="token comment"># resources: {}</span>
  <span class="token key atrule">metrics_server</span><span class="token punctuation">:</span>         <span class="token comment"># \u5B83\u542F\u7528 HPA\uFF08Horizontal Pod Autoscaler\uFF09\u3002</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>         <span class="token comment"># Enable or disable metrics-server.</span>
  <span class="token key atrule">monitoring</span><span class="token punctuation">:</span>
    <span class="token key atrule">storageClass</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>       <span class="token comment"># \u5982\u679C\u666E\u7F57\u7C73\u4FEE\u65AF\u9700\u8981\u4E00\u4E2A\u72EC\u7ACB\u7684StorageClass\uFF0C\u53EF\u4EE5\u5728\u8FD9\u91CC\u6307\u5B9A\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4F7F\u7528\u9ED8\u8BA4\u7684StorageClass\u3002</span>
    <span class="token comment"># kube_rbac_proxy:</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment"># kube_state_metrics:</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment"># prometheus:</span>
    <span class="token comment">#   replicas: 1  # \u666E\u7F57\u7C73\u4FEE\u65AF\u526F\u672C\u8D1F\u8D23\u76D1\u63A7\u6570\u636E\u6E90\u7684\u4E0D\u540C\u90E8\u5206\uFF0C\u5E76\u63D0\u4F9B\u9AD8\u53EF\u7528\u6027\u3002</span>
    <span class="token comment">#   volumeSize: 20Gi  # Prometheus PVC size.</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment">#   operator:</span>
    <span class="token comment">#     resources: {}</span>
    <span class="token comment">#   adapter:</span>
    <span class="token comment">#     resources: {}</span>
    <span class="token comment"># node_exporter:</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment"># alertmanager:</span>
    <span class="token comment">#   replicas: 1          # AlertManager Replicas.</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment"># notification_manager:</span>
    <span class="token comment">#   resources: {}</span>
    <span class="token comment">#   operator:</span>
    <span class="token comment">#     resources: {}</span>
    <span class="token comment">#   proxy:</span>
    <span class="token comment">#     resources: {}</span>
    <span class="token key atrule">gpu</span><span class="token punctuation">:</span>                           <span class="token comment"># GPU\u76D1\u63A7\u76F8\u5173\u63D2\u4EF6\u5B89\u88C5.</span>
      <span class="token key atrule">nvidia_dcgm_exporter</span><span class="token punctuation">:</span>        <span class="token comment"># \u786E\u4FDD\u4F60\u7684\u4E3B\u673A\u4E0A\u7684gpu\u8D44\u6E90\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u5426\u5219\u8FD9\u4E2A\u63D2\u4EF6\u5C06\u65E0\u6CD5\u6B63\u5E38\u5DE5\u4F5C.</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>             <span class="token comment"># \u68C0\u67E5 GPU \u4E3B\u673A\u4E0A\u7684\u6807\u7B7E\u662F\u5426\u5305\u542B\u201Cnvidia.comgpu.present=true\u201D\uFF0C\u4EE5\u786E\u4FDD DCGM pod \u8C03\u5EA6\u5230\u8FD9\u4E9B\u8282\u70B9\u3002</span>
        <span class="token comment"># resources: {}</span>
  <span class="token key atrule">multicluster</span><span class="token punctuation">:</span>
    <span class="token key atrule">clusterRole</span><span class="token punctuation">:</span> none  <span class="token comment"># host | member | none  # \u60A8\u53EF\u4EE5\u5B89\u88C5\u4E00\u4E2A\u5355\u72EC\u7684\u96C6\u7FA4\uFF0C\u6216\u8005\u5C06\u5176\u6307\u5B9A\u4E3A\u4E3B\u673A\u6216\u6210\u5458\u96C6\u7FA4\u3002</span>
  <span class="token key atrule">network</span><span class="token punctuation">:</span>
    <span class="token key atrule">networkpolicy</span><span class="token punctuation">:</span>    <span class="token comment"># \u7F51\u7EDC\u7B56\u7565\u5141\u8BB8\u5728\u540C\u4E00\u96C6\u7FA4\u5185\u8FDB\u884C\u7F51\u7EDC\u9694\u79BB\uFF0C\u8FD9\u610F\u5473\u7740\u53EF\u4EE5\u5728\u67D0\u4E9B\u5B9E\u4F8B\uFF08Pod\uFF09\u4E4B\u95F4\u8BBE\u7F6E\u9632\u706B\u5899\u3002</span>
        <span class="token comment"># \u786E\u4FDD\u96C6\u7FA4\u4F7F\u7528\u7684 CNI \u7F51\u7EDC\u63D2\u4EF6\u652F\u6301 NetworkPolicy\u3002\u6709\u8BB8\u591A\u652F\u6301 NetworkPolicy \u7684 CNI \u7F51\u7EDC\u63D2\u4EF6\uFF0C</span>
      <span class="token comment">#\u5305\u62EC Calico\u3001Cilium\u3001Kube-router\u3001Romana \u548C Weave Net\u3002</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#\u542F\u7528\u6216\u7981\u7528\u7F51\u7EDC\u7B56\u7565\u3002</span>
    <span class="token key atrule">ippool</span><span class="token punctuation">:</span> <span class="token comment"># \u4F7F\u7528 Pod IP Pools \u6765\u7BA1\u7406 Pod \u7F51\u7EDC\u5730\u5740\u7A7A\u95F4\u3002\u53EF\u4EE5\u4ECE Pod IP \u6C60\u4E2D\u4E3A\u8981\u521B\u5EFA\u7684 Pod \u5206\u914D IP \u5730\u5740\u3002</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> flannel <span class="token comment"># \u5982\u679C Calico \u7528\u4F5C\u60A8\u7684 CNI \u63D2\u4EF6\uFF0C\u8BF7\u4E3A\u6B64\u5B57\u6BB5\u6307\u5B9A\u201Ccalico\u201D\u3002 \u201Cnone\u201D\u8868\u793A Pod IP \u6C60\u5DF2\u7981\u7528\u3002</span>
    <span class="token key atrule">topology</span><span class="token punctuation">:</span> <span class="token comment"># \u4F7F\u7528\u670D\u52A1\u62D3\u6251\u67E5\u770B\u57FA\u4E8E Weave Scope \u7684\u670D\u52A1\u5230\u670D\u52A1\u901A\u4FE1\u3002</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> none <span class="token comment"># \u4E3A\u6B64\u5B57\u6BB5\u6307\u5B9A\u201Cweave-scope\u201D\u4EE5\u542F\u7528\u670D\u52A1\u62D3\u6251\u3002 \u201C\u65E0\u201D\u8868\u793A\u670D\u52A1\u62D3\u6251\u5DF2\u7981\u7528.</span>
  <span class="token key atrule">openpitrix</span><span class="token punctuation">:</span> <span class="token comment"># \u5E94\u7528\u5546\u5E97.</span>
    <span class="token key atrule">store</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 KubeSphere \u5E94\u7528\u5546\u5E97\u3002</span>
  <span class="token key atrule">servicemesh</span><span class="token punctuation">:</span>         <span class="token comment"># \u63D0\u4F9B\u7EC6\u7C92\u5EA6\u7684\u6D41\u91CF\u7BA1\u7406\u3001\u53EF\u89C2\u5BDF\u6027\u548C\u53EF\u8FFD\u8E2A\u6027\u4EE5\u53CA\u53EF\u89C6\u5316\u7684\u6D41\u91CF\u62D3\u6251\u3002</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment"># \u57FA\u7840\u7EC4\u4EF6\uFF08\u8BD5\u70B9\uFF09\u3002\u542F\u7528\u6216\u7981\u7528 KubeSphere \u670D\u52A1\u7F51\u683C\uFF08\u57FA\u4E8E Istio\uFF09\u3002</span>
  <span class="token key atrule">kubeedge</span><span class="token punctuation">:</span>          <span class="token comment"># \u5C06\u8FB9\u7F18\u8282\u70B9\u6DFB\u52A0\u5230\u96C6\u7FA4\u5E76\u5728\u8FB9\u7F18\u8282\u70B9\u4E0A\u90E8\u7F72\u5DE5\u4F5C\u8D1F\u8F7D\u3002</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>   <span class="token comment"># \u542F\u7528\u6216\u7981\u7528 KubeEdge\u3002</span>
    <span class="token key atrule">cloudCore</span><span class="token punctuation">:</span>
      <span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">&quot;node-role.kubernetes.io/worker&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
      <span class="token key atrule">tolerations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token key atrule">cloudhubPort</span><span class="token punctuation">:</span> <span class="token string">&quot;10000&quot;</span>
      <span class="token key atrule">cloudhubQuicPort</span><span class="token punctuation">:</span> <span class="token string">&quot;10001&quot;</span>
      <span class="token key atrule">cloudhubHttpsPort</span><span class="token punctuation">:</span> <span class="token string">&quot;10002&quot;</span>
      <span class="token key atrule">cloudstreamPort</span><span class="token punctuation">:</span> <span class="token string">&quot;10003&quot;</span>
      <span class="token key atrule">tunnelPort</span><span class="token punctuation">:</span> <span class="token string">&quot;10004&quot;</span>
      <span class="token key atrule">cloudHub</span><span class="token punctuation">:</span>
        <span class="token key atrule">advertiseAddress</span><span class="token punctuation">:</span> <span class="token comment"># \u5FC5\u987B\u81F3\u5C11\u63D0\u4F9B\u516C\u5171IP\u5730\u5740\u6216\u8FB9\u7F18\u8282\u70B9\u53EF\u4EE5\u8BBF\u95EE\u7684IP\u5730\u5740\u3002</span>
          <span class="token punctuation">-</span> <span class="token string">&quot;&quot;</span>            <span class="token comment"># \u8BF7\u6CE8\u610F\uFF0C\u4E00\u65E6\u542F\u7528KubeEdge\uFF0C\u5982\u679C\u4E0D\u63D0\u4F9B\u5730\u5740\uFF0CCloudCore\u5C06\u51FA\u73B0\u6545\u969C\u3002</span>
        <span class="token key atrule">nodeLimit</span><span class="token punctuation">:</span> <span class="token string">&quot;100&quot;</span>
      <span class="token key atrule">service</span><span class="token punctuation">:</span>
        <span class="token key atrule">cloudhubNodePort</span><span class="token punctuation">:</span> <span class="token string">&quot;30000&quot;</span>
        <span class="token key atrule">cloudhubQuicNodePort</span><span class="token punctuation">:</span> <span class="token string">&quot;30001&quot;</span>
        <span class="token key atrule">cloudhubHttpsNodePort</span><span class="token punctuation">:</span> <span class="token string">&quot;30002&quot;</span>
        <span class="token key atrule">cloudstreamNodePort</span><span class="token punctuation">:</span> <span class="token string">&quot;30003&quot;</span>
        <span class="token key atrule">tunnelNodePort</span><span class="token punctuation">:</span> <span class="token string">&quot;30004&quot;</span>
    <span class="token key atrule">edgeWatcher</span><span class="token punctuation">:</span>
      <span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">&quot;node-role.kubernetes.io/worker&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
      <span class="token key atrule">tolerations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token key atrule">edgeWatcherAgent</span><span class="token punctuation">:</span>
        <span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">&quot;node-role.kubernetes.io/worker&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
        <span class="token key atrule">tolerations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u3001\u79BB\u7EBF\u5B89\u88C5-kk" tabindex="-1"><a class="header-anchor" href="#_4-\u3001\u79BB\u7EBF\u5B89\u88C5-kk" aria-hidden="true">#</a> 4\uFF09\u3001\u79BB\u7EBF\u5B89\u88C5+kk</h2><p>https://kubesphere.com.cn/docs/installing-on-linux/introduction/air-gapped-installation/</p><p>https://zhuanlan.zhihu.com/p/432040404</p><p>\uFF08\u63A8\u8350\uFF09\u5728\u5DF2\u521B\u5EFA\u7684\u96C6\u7FA4\u4E2D\u6267\u884C KubeKey \u547D\u4EE4\u751F\u6210\u8BE5\u6587\u4EF6\u3002</p><blockquote><p>./kk create manifest</p><p>vim manifest.yaml</p></blockquote><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> kubekey.kubesphere.io/v1alpha2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Manifest
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">arches</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> amd64
  <span class="token key atrule">operatingSystems</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">arch</span><span class="token punctuation">:</span> amd64
    <span class="token key atrule">type</span><span class="token punctuation">:</span> linux
    <span class="token key atrule">id</span><span class="token punctuation">:</span> centos
    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;7&quot;</span>
    <span class="token key atrule">repository</span><span class="token punctuation">:</span>
      <span class="token key atrule">iso</span><span class="token punctuation">:</span>
        <span class="token key atrule">localPath</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">&quot;https://github.com/kubesphere/kubekey/releases/download/v2.1.0/centos-7-amd64-rpms.iso&quot;</span>
  <span class="token key atrule">kubernetesDistributions</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> kubernetes
    <span class="token key atrule">version</span><span class="token punctuation">:</span> v1.22.9
  <span class="token key atrule">components</span><span class="token punctuation">:</span>
    <span class="token key atrule">helm</span><span class="token punctuation">:</span>
      <span class="token key atrule">version</span><span class="token punctuation">:</span> v3.6.3
    <span class="token key atrule">cni</span><span class="token punctuation">:</span>
      <span class="token key atrule">version</span><span class="token punctuation">:</span> v0.9.1
    <span class="token key atrule">etcd</span><span class="token punctuation">:</span>
      <span class="token key atrule">version</span><span class="token punctuation">:</span> v3.4.13
    <span class="token comment">## For now, if your cluster container runtime is containerd, KubeKey will add a docker 20.10.8 container runtime in the below list.</span>
    <span class="token comment">## The reason is KubeKey creates a cluster with containerd by installing a docker first and making kubelet connect the socket file of containerd which docker contained.</span>
    <span class="token key atrule">containerRuntimes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> docker
      <span class="token key atrule">version</span><span class="token punctuation">:</span> 20.10.8
    <span class="token key atrule">crictl</span><span class="token punctuation">:</span>
      <span class="token key atrule">version</span><span class="token punctuation">:</span> v1.22.0
    <span class="token comment">##</span>
    <span class="token comment"># docker-registry:</span>
    <span class="token comment">#   version: &quot;2&quot;</span>
    <span class="token key atrule">harbor</span><span class="token punctuation">:</span>
      <span class="token key atrule">version</span><span class="token punctuation">:</span> v2.4.1
    <span class="token key atrule">docker-compose</span><span class="token punctuation">:</span>
      <span class="token key atrule">version</span><span class="token punctuation">:</span> v2.2.2
  <span class="token key atrule">images</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>apiserver<span class="token punctuation">:</span>v1.22.9
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>manager<span class="token punctuation">:</span>v1.22.9
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>proxy<span class="token punctuation">:</span>v1.22.9
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>scheduler<span class="token punctuation">:</span>v1.22.9
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/pause<span class="token punctuation">:</span><span class="token number">3.5</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/pause<span class="token punctuation">:</span>3.4.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/coredns<span class="token punctuation">:</span>1.8.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/cni<span class="token punctuation">:</span>v3.20.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>controllers<span class="token punctuation">:</span>v3.20.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/node<span class="token punctuation">:</span>v3.20.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/pod2daemon<span class="token punctuation">-</span>flexvol<span class="token punctuation">:</span>v3.20.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/typha<span class="token punctuation">:</span>v3.20.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/flannel<span class="token punctuation">:</span>v0.12.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/provisioner<span class="token punctuation">-</span>localpv<span class="token punctuation">:</span>2.10.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/linux<span class="token punctuation">-</span>utils<span class="token punctuation">:</span>2.10.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/haproxy<span class="token punctuation">:</span><span class="token number">2.3</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/nfs<span class="token punctuation">-</span>subdir<span class="token punctuation">-</span>external<span class="token punctuation">-</span>provisioner<span class="token punctuation">:</span>v4.0.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/k8s<span class="token punctuation">-</span>dns<span class="token punctuation">-</span>node<span class="token punctuation">-</span>cache<span class="token punctuation">:</span>1.15.12
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/ks<span class="token punctuation">-</span>installer<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/ks<span class="token punctuation">-</span>apiserver<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/ks<span class="token punctuation">-</span>console<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/ks<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>manager<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kubectl<span class="token punctuation">:</span>v1.21.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kubectl<span class="token punctuation">:</span>v1.20.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kubefed<span class="token punctuation">:</span>v0.8.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/tower<span class="token punctuation">:</span>v0.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/minio<span class="token punctuation">:</span>RELEASE.2019<span class="token punctuation">-</span>08<span class="token punctuation">-</span>07T01<span class="token punctuation">-</span>59<span class="token punctuation">-</span>21Z
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/mc<span class="token punctuation">:</span>RELEASE.2019<span class="token punctuation">-</span>08<span class="token punctuation">-</span>07T23<span class="token punctuation">-</span>14<span class="token punctuation">-</span>43Z
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/snapshot<span class="token punctuation">-</span>controller<span class="token punctuation">:</span>v4.0.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/nginx<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller<span class="token punctuation">:</span>v0.48.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/defaultbackend<span class="token punctuation">-</span>amd64<span class="token punctuation">:</span><span class="token number">1.4</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/metrics<span class="token punctuation">-</span>server<span class="token punctuation">:</span>v0.4.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/redis<span class="token punctuation">:</span>5.0.14<span class="token punctuation">-</span>alpine
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/haproxy<span class="token punctuation">:</span>2.0.25<span class="token punctuation">-</span>alpine
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/alpine<span class="token punctuation">:</span><span class="token number">3.14</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/openldap<span class="token punctuation">:</span>1.3.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/netshoot<span class="token punctuation">:</span>v1.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/cloudcore<span class="token punctuation">:</span>v1.7.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/edge<span class="token punctuation">-</span>watcher<span class="token punctuation">:</span>v0.1.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/edge<span class="token punctuation">-</span>watcher<span class="token punctuation">-</span>agent<span class="token punctuation">:</span>v0.1.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/gatekeeper<span class="token punctuation">:</span>v3.5.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/openpitrix<span class="token punctuation">-</span>jobs<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/devops<span class="token punctuation">-</span>apiserver<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/devops<span class="token punctuation">-</span>controller<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/devops<span class="token punctuation">-</span>tools<span class="token punctuation">:</span>v3.2.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/ks<span class="token punctuation">-</span>jenkins<span class="token punctuation">:</span>v3.2.0<span class="token punctuation">-</span>2.249.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/jnlp<span class="token punctuation">-</span>slave<span class="token punctuation">:</span>3.27<span class="token punctuation">-</span><span class="token number">1</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>base<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>nodejs<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>maven<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>python<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>go<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>go<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>base<span class="token punctuation">:</span>v3.2.0<span class="token punctuation">-</span>podman
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>nodejs<span class="token punctuation">:</span>v3.2.0<span class="token punctuation">-</span>podman
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>maven<span class="token punctuation">:</span>v3.2.0<span class="token punctuation">-</span>podman
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>python<span class="token punctuation">:</span>v3.2.0<span class="token punctuation">-</span>podman
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>go<span class="token punctuation">:</span>v3.2.0<span class="token punctuation">-</span>podman
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/builder<span class="token punctuation">-</span>go<span class="token punctuation">:</span>v3.2.0<span class="token punctuation">-</span>podman
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/s2ioperator<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/s2irun<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/s2i<span class="token punctuation">-</span>binary<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/tomcat85<span class="token punctuation">-</span>java11<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/tomcat85<span class="token punctuation">-</span>java11<span class="token punctuation">-</span>runtime<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/tomcat85<span class="token punctuation">-</span>java8<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/tomcat85<span class="token punctuation">-</span>java8<span class="token punctuation">-</span>runtime<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/java<span class="token punctuation">-</span>11<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/java<span class="token punctuation">-</span>8<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/java<span class="token punctuation">-</span>8<span class="token punctuation">-</span>runtime<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/java<span class="token punctuation">-</span>11<span class="token punctuation">-</span>runtime<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/nodejs<span class="token punctuation">-</span>8<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/nodejs<span class="token punctuation">-</span>6<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/nodejs<span class="token punctuation">-</span>4<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/python<span class="token punctuation">-</span>36<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/python<span class="token punctuation">-</span>35<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/python<span class="token punctuation">-</span>34<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/python<span class="token punctuation">-</span>27<span class="token punctuation">-</span>centos7<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/configmap<span class="token punctuation">-</span>reload<span class="token punctuation">:</span>v0.3.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/prometheus<span class="token punctuation">:</span>v2.26.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/prometheus<span class="token punctuation">-</span>config<span class="token punctuation">-</span>reloader<span class="token punctuation">:</span>v0.43.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/prometheus<span class="token punctuation">-</span>operator<span class="token punctuation">:</span>v0.43.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>rbac<span class="token punctuation">-</span>proxy<span class="token punctuation">:</span>v0.8.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics<span class="token punctuation">:</span>v1.9.7
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/node<span class="token punctuation">-</span>exporter<span class="token punctuation">:</span>v0.18.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/k8s<span class="token punctuation">-</span>prometheus<span class="token punctuation">-</span>adapter<span class="token punctuation">-</span>amd64<span class="token punctuation">:</span>v0.6.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/alertmanager<span class="token punctuation">:</span>v0.21.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/thanos<span class="token punctuation">:</span>v0.18.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/grafana<span class="token punctuation">:</span>7.4.3
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>rbac<span class="token punctuation">-</span>proxy<span class="token punctuation">:</span>v0.8.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/notification<span class="token punctuation">-</span>manager<span class="token punctuation">-</span>operator<span class="token punctuation">:</span>v1.4.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/notification<span class="token punctuation">-</span>manager<span class="token punctuation">:</span>v1.4.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/notification<span class="token punctuation">-</span>tenant<span class="token punctuation">-</span>sidecar<span class="token punctuation">:</span>v3.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/elasticsearch<span class="token punctuation">-</span>curator<span class="token punctuation">:</span>v5.7.6
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/elasticsearch<span class="token punctuation">-</span>oss<span class="token punctuation">:</span>6.7.0<span class="token punctuation">-</span><span class="token number">1</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/fluentbit<span class="token punctuation">-</span>operator<span class="token punctuation">:</span>v0.11.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/docker<span class="token punctuation">:</span><span class="token number">19.03</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/fluent<span class="token punctuation">-</span>bit<span class="token punctuation">:</span>v1.8.3
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/log<span class="token punctuation">-</span>sidecar<span class="token punctuation">-</span>injector<span class="token punctuation">:</span><span class="token number">1.1</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/filebeat<span class="token punctuation">:</span>6.7.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>events<span class="token punctuation">-</span>operator<span class="token punctuation">:</span>v0.3.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>events<span class="token punctuation">-</span>exporter<span class="token punctuation">:</span>v0.3.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>events<span class="token punctuation">-</span>ruler<span class="token punctuation">:</span>v0.3.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>auditing<span class="token punctuation">-</span>operator<span class="token punctuation">:</span>v0.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kube<span class="token punctuation">-</span>auditing<span class="token punctuation">-</span>webhook<span class="token punctuation">:</span>v0.2.0
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/pilot<span class="token punctuation">:</span>1.11.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/proxyv2<span class="token punctuation">:</span>1.11.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/jaeger<span class="token punctuation">-</span>operator<span class="token punctuation">:</span><span class="token number">1.27</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/jaeger<span class="token punctuation">-</span>agent<span class="token punctuation">:</span><span class="token number">1.27</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/jaeger<span class="token punctuation">-</span>collector<span class="token punctuation">:</span><span class="token number">1.27</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/jaeger<span class="token punctuation">-</span>query<span class="token punctuation">:</span><span class="token number">1.27</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/jaeger<span class="token punctuation">-</span>es<span class="token punctuation">-</span>index<span class="token punctuation">-</span>cleaner<span class="token punctuation">:</span><span class="token number">1.27</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kiali<span class="token punctuation">-</span>operator<span class="token punctuation">:</span>v1.38.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/kiali<span class="token punctuation">:</span>v1.38
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/busybox<span class="token punctuation">:</span>1.31.1
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/nginx<span class="token punctuation">:</span>1.14<span class="token punctuation">-</span>alpine
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/wget<span class="token punctuation">:</span><span class="token number">1.0</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/hello<span class="token punctuation">:</span>plain<span class="token punctuation">-</span>text
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/wordpress<span class="token punctuation">:</span>4.8<span class="token punctuation">-</span>apache
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/hpa<span class="token punctuation">-</span>example<span class="token punctuation">:</span>latest
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/java<span class="token punctuation">:</span>openjdk<span class="token punctuation">-</span>8<span class="token punctuation">-</span>jre<span class="token punctuation">-</span>alpine
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/fluentd<span class="token punctuation">:</span>v1.4.2<span class="token punctuation">-</span><span class="token number">2.0</span>
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/perl<span class="token punctuation">:</span>latest
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>productpage<span class="token punctuation">-</span>v1<span class="token punctuation">:</span>1.16.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>reviews<span class="token punctuation">-</span>v1<span class="token punctuation">:</span>1.16.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>reviews<span class="token punctuation">-</span>v2<span class="token punctuation">:</span>1.16.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>details<span class="token punctuation">-</span>v1<span class="token punctuation">:</span>1.16.2
  <span class="token punctuation">-</span> registry.cn<span class="token punctuation">-</span>beijing.aliyuncs.com/kubesphereio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>ratings<span class="token punctuation">-</span>v1<span class="token punctuation">:</span>1.16.3
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>
    <span class="token key atrule">auths</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-\u3001\u8BBF\u95EE\u3001\u5378\u8F7D-kubesphere" tabindex="-1"><a class="header-anchor" href="#_5-\u3001\u8BBF\u95EE\u3001\u5378\u8F7D-kubesphere" aria-hidden="true">#</a> 5\uFF09\u3001\u8BBF\u95EE\u3001\u5378\u8F7D kubesphere</h2><p>\u8BBF\u95EE\uFF1Ahttp://192.168.101.120:30880 admin</p><p>https://kubesphere.com.cn/docs/installing-on-linux/uninstall-kubesphere-and-kubernetes/</p>`,61),ja=s("\u5982\u679C\u662F\u6309\u7167\u5FEB\u901F\u5165\u95E8 ("),Ea={href:"https://kubesphere.com.cn/docs/quick-start/all-in-one-on-linux/",target:"_blank",rel:"noopener noreferrer"},Ra=s("All-in-One"),Sa=s(") \u5B89\u88C5\u7684 KubeSphere\uFF1A"),Aa=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,`./kk delete cluster
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),Na=s("\u5982\u679C\u662F\u4F7F\u7528\u9AD8\u7EA7\u6A21\u5F0F\u5B89\u88C5\u7684 KubeSphere\uFF08"),Ca={href:"https://kubesphere.com.cn/docs/installing-on-linux/introduction/multioverview/",target:"_blank",rel:"noopener noreferrer"},Da=s("\u4F7F\u7528\u914D\u7F6E\u6587\u4EF6\u521B\u5EFA"),Ta=s("\uFF09\uFF1A"),Ia=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,`./kk delete cluster -f config-sample.yaml
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),Oa=t('<p><img src="'+Y+'" alt="image-20220515182956539"></p><p><img src="'+Z+'" alt="image-20220515183019002"></p><h2 id="_6-\u3001\u8FDB\u9636" tabindex="-1"><a class="header-anchor" href="#_6-\u3001\u8FDB\u9636" aria-hidden="true">#</a> 6\uFF09\u3001\u8FDB\u9636</h2><h3 id="a\u3001\u591A\u79DF\u6237\u7CFB\u7EDF" tabindex="-1"><a class="header-anchor" href="#a\u3001\u591A\u79DF\u6237\u7CFB\u7EDF" aria-hidden="true">#</a> A\u3001\u591A\u79DF\u6237\u7CFB\u7EDF</h3><p><img src="'+$+'" alt="image.png"></p><hr><h4 id="\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#\u67B6\u6784" aria-hidden="true">#</a> \u67B6\u6784</h4><p>KubeSphere \u7684\u591A\u79DF\u6237\u7CFB\u7EDF\u5206<strong>\u4E09\u4E2A</strong>\u5C42\u7EA7\uFF0C\u5373\u96C6\u7FA4\u3001\u4F01\u4E1A\u7A7A\u95F4\u548C\u9879\u76EE\u3002KubeSphere \u4E2D\u7684\u9879\u76EE\u7B49\u540C\u4E8E Kubernetes \u7684\u547D\u540D\u7A7A\u95F4\u3002</p><p>\u53EF\u4EE5\u5728\u4E00\u4E2A KubeSphere \u96C6\u7FA4\u4E2D\u521B\u5EFA\u591A\u4E2A\u4F01\u4E1A\u7A7A\u95F4\uFF0C\u6BCF\u4E2A\u4F01\u4E1A\u7A7A\u95F4\u4E0B\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u9879\u76EE\u3002</p><p>\u5728\u672C\u6B65\u9AA4\u4E2D\uFF0C\u60A8\u5C06\u521B\u5EFA\u4E00\u4E2A\u7528\u6237 <code>user-manager</code>\uFF0C\u5E76\u8D4B\u4E88users-manager\u89D2\u8272\uFF0C\u7136\u540E\u4F7F\u7528 <code>user-manager</code> \u521B\u5EFA\u65B0\u7528\u6237\u3002</p><hr><p><img src="'+nn+'" alt="img"></p><p>https://kubesphere.com.cn/docs/quick-start/create-workspace-and-project/</p><table><thead><tr><th>\u5185\u7F6E\u89D2\u8272</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td><code>workspaces-manager</code></td><td>\u4F01\u4E1A\u7A7A\u95F4\u7BA1\u7406\u5458\uFF0C\u7BA1\u7406\u5E73\u53F0\u6240\u6709\u4F01\u4E1A\u7A7A\u95F4\u3002</td></tr><tr><td><code>users-manager</code></td><td>\u7528\u6237\u7BA1\u7406\u5458\uFF0C\u7BA1\u7406\u5E73\u53F0\u6240\u6709\u7528\u6237\u3002</td></tr><tr><td><code>platform-regular</code></td><td>\u5E73\u53F0\u666E\u901A\u7528\u6237\uFF0C\u5728\u88AB\u9080\u8BF7\u52A0\u5165\u4F01\u4E1A\u7A7A\u95F4\u6216\u96C6\u7FA4\u4E4B\u524D\u6CA1\u6709\u4EFB\u4F55\u8D44\u6E90\u64CD\u4F5C\u6743\u9650\u3002</td></tr><tr><td><code>platform-admin</code></td><td>\u5E73\u53F0\u7BA1\u7406\u5458\uFF0C\u53EF\u4EE5\u7BA1\u7406\u5E73\u53F0\u5185\u7684\u6240\u6709\u8D44\u6E90\u3002</td></tr></tbody></table><h4 id="_1\u3001\u4F7F\u7528-admin-\u521B\u5EFA\u5E73\u53F0\u7BA1\u7406\u7528\u6237-user-manager" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u4F7F\u7528-admin-\u521B\u5EFA\u5E73\u53F0\u7BA1\u7406\u7528\u6237-user-manager" aria-hidden="true">#</a> 1\u3001\u4F7F\u7528 admin \u521B\u5EFA\u5E73\u53F0\u7BA1\u7406\u7528\u6237 <code>user-manager</code></h4><p>\u4F7F\u7528 admin \u521B\u5EFA\u4E00\u4E2A\u7528\u6237 <code>user-manager</code>\uFF0C\u5E76\u8D4B\u4E88users-manager\u89D2\u8272\uFF0C</p><h4 id="_2\u3001\u767B\u5F55-user-manager-\u521B\u5EFA\u65B0\u7528\u6237\u3002" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u767B\u5F55-user-manager-\u521B\u5EFA\u65B0\u7528\u6237\u3002" aria-hidden="true">#</a> 2\u3001\u767B\u5F55 <code>user-manager</code> \u521B\u5EFA\u65B0\u7528\u6237\u3002</h4><table><thead><tr><th>\u5E10\u6237</th><th>\u89D2\u8272</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>ws-manager</td><td>workspaces-manager</td><td>\u521B\u5EFA\u548C\u7BA1\u7406\u6240\u6709\u4F01\u4E1A\u7A7A\u95F4\u3002</td></tr><tr><td>ws-admin</td><td>platform-regular</td><td>\u7BA1\u7406\u6307\u5B9A\u4F01\u4E1A\u7A7A\u95F4\u4E2D\u7684\u6240\u6709\u8D44\u6E90\uFF08\u7528\u4E8E\u9080\u8BF7\u65B0\u6210\u5458\u52A0\u5165\u8BE5\u4F01\u4E1A\u7A7A\u95F4\uFF09</td></tr><tr><td>project-admin</td><td>platform-regular</td><td>\u521B\u5EFA\u548C\u7BA1\u7406\u9879\u76EE\u4EE5\u53CA DevOps \u9879\u76EE\uFF0C\u5E76\u9080\u8BF7\u65B0\u6210\u5458\u52A0\u5165\u9879\u76EE</td></tr><tr><td>project-regular</td><td>platform-regular</td><td>project-regular \u5C06\u7531 project-admin \u9080\u8BF7\u81F3\u9879\u76EE\u6216 DevOps \u9879\u76EE\u3002\u8BE5\u5E10\u6237\u5C06\u7528\u4E8E\u5728\u6307\u5B9A\u9879\u76EE\u4E2D\u521B\u5EFA\u5DE5\u4F5C\u8D1F\u8F7D\u3001\u6D41\u6C34\u7EBF\u548C\u5176\u4ED6\u8D44\u6E90</td></tr></tbody></table><p><img src="'+sn+'" alt="image-20220516131100542"></p><h4 id="_3\u3001\u4F7F\u7528-ws-manager-\u521B\u5EFA\u4F01\u4E1A\u7A7A\u95F4-cps007" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u4F7F\u7528-ws-manager-\u521B\u5EFA\u4F01\u4E1A\u7A7A\u95F4-cps007" aria-hidden="true">#</a> 3\u3001\u4F7F\u7528 ws-manager \u521B\u5EFA\u4F01\u4E1A\u7A7A\u95F4 <code>cps007</code></h4><p>\u4F7F\u7528 ws-manager \u521B\u5EFA\u4E00\u4E2A\u4F01\u4E1A\u7A7A\u95F4(cps007)\uFF0C\u6307\u5B9Aws-admin\u4E3A\u7BA1\u7406\u5458\uFF1B</p><p>\u4EE5 ws-admin \u8EAB\u4EFD\u91CD\u65B0\u767B\u5F55\u3002\u5728<strong>\u4F01\u4E1A\u7A7A\u95F4\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u9009\u62E9<strong>\u4F01\u4E1A\u7A7A\u95F4\u6210\u5458</strong>\uFF0C\u7136\u540E\u70B9\u51FB<strong>\u9080\u8BF7</strong>\u3002\u9080\u8BF7 <code>project-admin</code> \u548C <code>project-regular</code> \u8FDB\u5165\u4F01\u4E1A\u7A7A\u95F4\uFF0C\u5206\u522B\u6388\u4E88 <code>workspace-self-provisioner</code> \u548C <code>workspace-viewer</code> \u89D2\u8272</p><p><img src="'+an+'" alt="image-20220516132218174"></p><table><thead><tr><th>\u5E10\u6237</th><th>\u89D2\u8272</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td><code>ws-admin</code></td><td><code>workspace-admin</code></td><td>\u7BA1\u7406\u6307\u5B9A\u4F01\u4E1A\u7A7A\u95F4\u4E2D\u7684\u6240\u6709\u8D44\u6E90\uFF08\u5728\u6B64\u793A\u4F8B\u4E2D\uFF0C\u6B64\u5E10\u6237\u7528\u4E8E\u9080\u8BF7\u65B0\u6210\u5458\u52A0\u5165\u4F01\u4E1A\u7A7A\u95F4\uFF09\u3002</td></tr><tr><td><code>project-admin</code></td><td><code>workspace-self-provisioner</code></td><td>\u521B\u5EFA\u548C\u7BA1\u7406\u9879\u76EE\u4EE5\u53CA DevOps \u9879\u76EE\uFF0C\u5E76\u9080\u8BF7\u65B0\u6210\u5458\u52A0\u5165\u9879\u76EE\u3002</td></tr><tr><td><code>project-regular</code></td><td><code>workspace-viewer</code></td><td><code>project-regular</code> \u5C06\u7531 <code>project-admin</code> \u9080\u8BF7\u81F3\u9879\u76EE\u6216 DevOps \u9879\u76EE\u3002\u8BE5\u5E10\u6237\u5C06\u7528\u4E8E\u5728\u6307\u5B9A\u9879\u76EE\u4E2D\u521B\u5EFA\u5DE5\u4F5C\u8D1F\u8F7D\u3001\u6D41\u6C34\u7EBF\u548C\u5176\u4ED6\u8D44\u6E90\u3002</td></tr></tbody></table><h4 id="_4\u3001\u4F7F\u7528-project-admin-\u521B\u5EFA\u9879\u76EE-\u7F51\u5173" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u4F7F\u7528-project-admin-\u521B\u5EFA\u9879\u76EE-\u7F51\u5173" aria-hidden="true">#</a> 4\u3001\u4F7F\u7528 project-admin \u521B\u5EFA\u9879\u76EE&amp;\u7F51\u5173</h4><p>\u4F7F\u7528 project-admin \u521B\u5EFA\u9879\u76EE\uFF08demo-project\uFF09\uFF1B\u5728<strong>\u9879\u76EE\u8BBE\u7F6E</strong> &gt; <strong>\u9879\u76EE\u6210\u5458</strong>\u4E2D\uFF0C\u9080\u8BF7 <code>project-regular</code> \u81F3\u8BE5\u9879\u76EE\uFF0C\u5E76\u6388\u4E88\u8BE5\u7528\u6237 <code>operator</code> \u89D2\u8272\u3002</p><p><img src="'+en+'" alt="image-20220516132700995"></p><p>\u4F7F\u7528 project-admin \u521B\u5EFA\u7F51\u5173</p><p><img src="'+tn+'" alt="image-20220516132947864"></p><h4 id="_5\u3001\u4F7F\u7528-project-admin-\u521B\u5EFA-devops-\u5DE5\u7A0B" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u4F7F\u7528-project-admin-\u521B\u5EFA-devops-\u5DE5\u7A0B" aria-hidden="true">#</a> 5\u3001\u4F7F\u7528 project-admin \u521B\u5EFA DevOps \u5DE5\u7A0B</h4><p>\u4F7F\u7528 project-admin \u521B\u5EFA DevOps \u5DE5\u7A0B\uFF08demo-devops\uFF09</p><p><img src="'+pn+'" alt="image-20220516133434615"></p><p>\u70B9\u51FB<strong>\u9080\u8BF7</strong>\u6388\u4E88 <code>project-regular</code> \u7528\u6237 <code>operator</code> \u7684\u89D2\u8272\uFF0C\u5141\u8BB8\u5176\u521B\u5EFA\u6D41\u6C34\u7EBF\u548C\u51ED\u8BC1\u3002</p><p><img src="'+ln+'" alt="image-20220516133452504"></p><p><code>project-regular</code> \u5E10\u6237\u8FD8\u5C06\u7528\u4E8E\u6F14\u793A\u5982\u4F55\u5728\u9879\u76EE\u6216 DevOps \u9879\u76EE\u4E2D\u521B\u5EFA\u5E94\u7528\u7A0B\u5E8F\u548C\u8D44\u6E90\u3002</p><h3 id="b\u3001\u4F7F\u7528-project-regular-\u5E10\u6237\u767B\u5F55-workspaces-\u521B\u5EFA\u5BC6\u94A5\u3001\u521B\u5EFA\u5BB9\u5668\u3001\u5916\u7F51\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#b\u3001\u4F7F\u7528-project-regular-\u5E10\u6237\u767B\u5F55-workspaces-\u521B\u5EFA\u5BC6\u94A5\u3001\u521B\u5EFA\u5BB9\u5668\u3001\u5916\u7F51\u8BBF\u95EE" aria-hidden="true">#</a> B\u3001\u4F7F\u7528 project-regular \u5E10\u6237\u767B\u5F55 workspaces \u521B\u5EFA\u5BC6\u94A5\u3001\u521B\u5EFA\u5BB9\u5668\u3001\u5916\u7F51\u8BBF\u95EE</h3><p>https://kubesphere.com.cn/docs/quick-start/wordpress-deployment/</p><p><img src="'+cn+'" alt="WordPress"></p><hr><p>\u60A8\u9700\u8981\u51C6\u5907\u4E00\u4E2A <code>project regular</code> \u5E10\u6237\uFF0C\u5E76\u5728\u4E00\u4E2A\u9879\u76EE\u4E2D\u8D4B\u4E88\u8BE5\u5E10\u6237 <code>operator</code> \u89D2\u8272\uFF08\u8BE5\u7528\u6237\u5DF2\u88AB\u9080\u8BF7\u53C2\u52A0\u8BE5\u9879\u76EE\uFF09\u3002</p><h4 id="\u6B65\u9AA4-1-\u521B\u5EFA\u5BC6\u94A5" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4-1-\u521B\u5EFA\u5BC6\u94A5" aria-hidden="true">#</a> \u6B65\u9AA4 1\uFF1A\u521B\u5EFA\u5BC6\u94A5</h4><h5 id="\u521B\u5EFA-mysql-\u5BC6\u94A5" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-mysql-\u5BC6\u94A5" aria-hidden="true">#</a> \u521B\u5EFA MySQL \u5BC6\u94A5</h5><p>\u73AF\u5883\u53D8\u91CF <code>WORDPRESS_DB_PASSWORD</code> \u662F\u8FDE\u63A5\u5230 WordPress \u6570\u636E\u5E93\u7684\u5BC6\u7801\u3002\u5728\u6B64\u6B65\u9AA4\u4E2D\uFF0C\u60A8\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u5BC6\u94A5\u6765\u4FDD\u5B58\u5C06\u5728 MySQL Pod \u6A21\u677F\u4E2D\u4F7F\u7528\u7684\u73AF\u5883\u53D8\u91CF\u3002</p><p>1\u3001\u8BBF\u95EE <code>demo-project</code> \u7684\u8BE6\u60C5\u9875\u5E76\u5BFC\u822A\u5230<strong>\u914D\u7F6E</strong>\u3002\u5728<strong>\u4FDD\u5BC6\u5B57\u5178</strong>\u4E2D\uFF0C\u70B9\u51FB\u53F3\u4FA7\u7684<strong>\u521B\u5EFA</strong>\u3002</p><p>2\u3001\u8F93\u5165\u57FA\u672C\u4FE1\u606F\uFF08mysql-secret\uFF09\u9009\u62E9<strong>\u7C7B\u578B</strong>\u4E3A <strong>Opaque\uFF08\u9ED8\u8BA4\uFF09</strong>\uFF0C\u7136\u540E\u70B9\u51FB<strong>\u6DFB\u52A0\u6570\u636E</strong>\u6765\u6DFB\u52A0\u952E\u503C\u5BF9\u3002</p><blockquote><p>Key\uFF1AMYSQL_ROOT_PASSWORD \u548C Value\uFF1A123456\uFF0C\u70B9\u51FB\u53F3\u4E0B\u89D2 \u221A \u8FDB\u884C\u786E\u8BA4\u3002</p></blockquote><h5 id="\u521B\u5EFA-wordpress-\u5BC6\u94A5" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-wordpress-\u5BC6\u94A5" aria-hidden="true">#</a> \u521B\u5EFA WordPress \u5BC6\u94A5</h5><p>\u6309\u7167\u4EE5\u4E0A\u76F8\u540C\u7684\u6B65\u9AA4\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A wordpress-secret \u7684 WordPress \u5BC6\u94A5\uFF0CKey\uFF1AWORDPRESS_DB_PASSWORD \u548C Value\uFF1A123456</p><p><img src="'+on+'" alt="image-20220516141949481"></p><h4 id="\u6B65\u9AA4-2-\u521B\u5EFA\u5B58\u50A8\u5377" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4-2-\u521B\u5EFA\u5B58\u50A8\u5377" aria-hidden="true">#</a> \u6B65\u9AA4 2\uFF1A\u521B\u5EFA\u5B58\u50A8\u5377</h4><p>1\u3001\u8BBF\u95EE<strong>\u5B58\u50A8</strong>\u4E0B\u7684<strong>\u5B58\u50A8\u5377</strong>\uFF0C\u70B9\u51FB<strong>\u521B\u5EFA</strong>\u3002</p><p>2\u3001\u8F93\u5165\u5377\u7684\u57FA\u672C\u4FE1\u606F wordpress-pvc</p><p><img src="'+un+'" alt="image-20220516142218882"></p><p>3\u3001\u5728<strong>\u5B58\u50A8\u5377\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u9700\u8981\u9009\u62E9\u4E00\u4E2A\u53EF\u7528\u7684<strong>\u5B58\u50A8\u7C7B\u578B</strong>\uFF0C\u5E76\u8BBE\u7F6E<strong>\u8BBF\u95EE\u6A21\u5F0F</strong>\u548C<strong>\u5B58\u50A8\u5377\u5BB9\u91CF</strong>\u3002\u60A8\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u9ED8\u8BA4\u503C\uFF0C\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u7EE7\u7EED\u3002</p><h5 id="\u8BBF\u95EE\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u8BBF\u95EE\u6A21\u5F0F" aria-hidden="true">#</a> \u8BBF\u95EE\u6A21\u5F0F:</h5><p>RWO (ReadWriteOnce)\uFF1A\u5355\u4E2A\u8282\u70B9\u8BFB\u5199</p><p>ROX (ReadOnlyMany)\uFF1A\u591A\u8282\u70B9\u53EA\u8BFB</p><p>RWX (ReadWriteMany)\uFF1A\u591A\u8282\u70B9\u8BFB\u5199</p><p><img src="'+rn+'" alt="image-20220516142317994"></p><p>4\u3001\u5728<strong>\u9AD8\u7EA7\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u60A8\u65E0\u9700\u6DFB\u52A0\u989D\u5916\u7684\u914D\u7F6E\uFF0C\u70B9\u51FB<strong>\u521B\u5EFA</strong>\u5B8C\u6210\u5373\u53EF\u3002</p><p><img src="'+dn+'" alt="image-20220516142337866"></p><h4 id="\u6B65\u9AA43-\u521B\u5EFAdocker\u79C1\u6709\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA43-\u521B\u5EFAdocker\u79C1\u6709\u4ED3\u5E93" aria-hidden="true">#</a> \u6B65\u9AA43\uFF1A\u521B\u5EFAdocker\u79C1\u6709\u4ED3\u5E93</h4><p>1\u3001\u8FDB\u5165\u4FDD\u5BC6\u5B57\u5178\u9875\u9762\uFF0C\u8BBE\u7F6E\u4FDD\u5BC6\u5B57\u5178\u7684\u540D\u79F0\uFF08\u4F8B\u5982 <code>ali-registry-secret</code>\uFF09\uFF0C\u7136\u540E\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u3002</p><p>2\u3001\u914D\u7F6E\u955C\u50CF\u4ED3\u5E93\u4FE1\u606F</p><p>\u5C06<strong>\u7C7B\u578B</strong>\u8BBE\u7F6E\u4E3A <strong>\u955C\u50CF\u4ED3\u5E93\u4FE1\u606F</strong>\u3002\u8981\u5728\u521B\u5EFA\u5E94\u7528\u8D1F\u8F7D\u65F6\u4F7F\u7528\u79C1\u6709\u4ED3\u5E93\u4E2D\u7684\u955C\u50CF\uFF0C\u60A8\u9700\u8981\u914D\u7F6E\u4EE5\u4E0B\u5B57\u6BB5\uFF1A</p><ul><li><strong>\u4ED3\u5E93\u5730\u5740</strong>\uFF1A\u955C\u50CF\u4ED3\u5E93\u7684\u5730\u5740\uFF0C\u5176\u4E2D\u5305\u542B\u521B\u5EFA\u5E94\u7528\u8D1F\u8F7D\u65F6\u9700\u8981\u4F7F\u7528\u7684\u955C\u50CF\u3002</li><li><strong>\u7528\u6237\u540D</strong>\uFF1A\u767B\u5F55\u955C\u50CF\u4ED3\u5E93\u6240\u9700\u7684\u7528\u6237\u540D\u3002</li><li><strong>\u5BC6\u7801</strong>\uFF1A\u767B\u5F55\u955C\u50CF\u4ED3\u5E93\u6240\u9700\u7684\u5BC6\u7801\u3002</li><li><strong>\u90AE\u7BB1</strong>\uFF08\u53EF\u9009\uFF09\uFF1A\u60A8\u7684\u90AE\u7BB1\u5730\u5740\u3002</li></ul><p><img src="'+kn+'" alt="image-20220516153908487"></p><h4 id="\u6B65\u9AA44-\u521B\u5EFA\u5E94\u7528\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA44-\u521B\u5EFA\u5E94\u7528\u7A0B\u5E8F" aria-hidden="true">#</a> \u6B65\u9AA44\uFF1A\u521B\u5EFA\u5E94\u7528\u7A0B\u5E8F</h4><h5 id="\u6DFB\u52A0-mysql-\u540E\u7AEF\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0-mysql-\u540E\u7AEF\u7EC4\u4EF6" aria-hidden="true">#</a> \u6DFB\u52A0 MySQL \u540E\u7AEF\u7EC4\u4EF6</h5><p>1\u3001\u5BFC\u822A\u5230<strong>\u5E94\u7528\u8D1F\u8F7D</strong>\u4E0B\u7684<strong>\u5E94\u7528</strong>\uFF0C\u9009\u62E9<strong>\u81EA\u5236\u5E94\u7528</strong> &gt; <strong>\u521B\u5EFA</strong>\u3002</p><p>2\u3001\u8F93\u5165\u57FA\u672C\u4FE1\u606F\uFF08\u4F8B\u5982\uFF0C\u5728\u5E94\u7528\u540D\u79F0\u4E00\u680F\u8F93\u5165 <code>wordpress</code>\uFF09\uFF0C\u7136\u540E\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u3002</p><p><img src="'+mn+'" alt="image-20220516144552690"></p><p>3\u3001\u5728<strong>\u670D\u52A1\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u70B9\u51FB<strong>\u521B\u5EFA\u670D\u52A1</strong>\u4EE5\u5728\u5E94\u7528\u4E2D\u8BBE\u7F6E\u7EC4\u4EF6\u3002</p><p>4\u3001\u8BBE\u7F6E\u7EC4\u4EF6\u7684\u670D\u52A1\u7C7B\u578B\u4E3A<strong>\u6709\u72B6\u6001\u670D\u52A1</strong>\u3002</p><p>5\u3001\u8F93\u5165\u6709\u72B6\u6001\u670D\u52A1\u7684\u540D\u79F0\uFF08\u4F8B\u5982 <strong>mysql</strong>\uFF09\u5E76\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u3002</p><p><img src="'+vn+'" alt="image-20220516144619786"></p><p>6\u3001\u5728<strong>\u5BB9\u5668\u7EC4\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u70B9\u51FB<strong>\u6DFB\u52A0\u5BB9\u5668</strong>\u3002</p><p>7\u3001\u5728\u641C\u7D22\u6846\u4E2D\u8F93\u5165 mysql:5.7\uFF0C\u6309\u4E0B <strong>\u56DE\u8F66\u952E</strong>\uFF0C\u7136\u540E\u70B9\u51FB <strong>\u4F7F\u7528\u9ED8\u8BA4\u7AEF\u53E3</strong>\u3002</p><p><img src="'+bn+'" alt="image-20220516144738362"></p><p><img src="'+gn+'" alt="image-20220516144800580"></p><p>8\u3001\u5411\u4E0B\u6EDA\u52A8\u5230<strong>\u73AF\u5883\u53D8\u91CF</strong>\uFF0C\u70B9\u51FB<strong>\u5F15\u7528\u914D\u7F6E\u6587\u4EF6\u6216\u5BC6\u94A5</strong>\u3002\u8F93\u5165\u540D\u79F0 MYSQL_ROOT_PASSWORD\uFF0C\u7136\u540E\u9009\u62E9\u8D44\u6E90 mysql-secret \u548C\u524D\u9762\u6B65\u9AA4\u4E2D\u521B\u5EFA\u7684\u5BC6\u94A5 MYSQL_ROOT_PASSWORD\uFF0C\u5B8C\u6210\u540E\u70B9\u51FB <strong>\u221A</strong> \u4FDD\u5B58\u914D\u7F6E\uFF0C\u6700\u540E\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u7EE7\u7EED\u3002</p><p><img src="'+hn+'" alt="image-20220516144955437"></p><p>9\u3001\u9009\u62E9<strong>\u5B58\u50A8\u5377\u8BBE\u7F6E</strong>\u4E2D\u7684<strong>\u6DFB\u52A0\u5B58\u50A8\u5377\u6A21\u677F</strong>\uFF0C\u8F93\u5165<strong>\u5B58\u50A8\u5377\u540D\u79F0</strong> (<code>mysql</code>) \u548C<strong>\u6302\u8F7D\u8DEF\u5F84</strong>\uFF08\u6A21\u5F0F\uFF1A<code>\u8BFB\u5199</code>\uFF0C\u8DEF\u5F84\uFF1A<code>/var/lib/mysql</code>\uFF09\u7684\u503C\u3002</p><p>\u5B8C\u6210\u540E\uFF0C\u70B9\u51FB <strong>\u221A</strong> \u4FDD\u5B58\u8BBE\u7F6E\u5E76\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u7EE7\u7EED\u3002</p><p><img src="'+yn+'" alt="image-20220516154617299"></p><p>10\u3001\u5728<strong>\u9AD8\u7EA7\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u53EF\u4EE5\u76F4\u63A5\u70B9\u51FB<strong>\u6DFB\u52A0</strong>\uFF0C\u4E5F\u53EF\u4EE5\u6309\u9700\u9009\u62E9\u5176\u4ED6\u9009\u9879\u3002</p><p><img src="'+fn+'" alt="image-20220516145535925"></p><p>11\u3001\u73B0\u5728\uFF0CMySQL \u7EC4\u4EF6\u5DF2\u7ECF\u6DFB\u52A0\u5B8C\u6210\u3002</p><p><img src="'+xn+'" alt="image-20220516145602690"></p><h5 id="\u6DFB\u52A0-wordpress-\u524D\u7AEF\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0-wordpress-\u524D\u7AEF\u7EC4\u4EF6" aria-hidden="true">#</a> \u6DFB\u52A0 WordPress \u524D\u7AEF\u7EC4\u4EF6</h5><p>1\u3001\u518D\u6B21\u70B9\u51FB<strong>\u521B\u5EFA\u670D\u52A1</strong>\uFF0C\u9009\u62E9<strong>\u65E0\u72B6\u6001\u670D\u52A1</strong>\u3002\u8F93\u5165\u540D\u79F0 <code>wordpress</code> \u5E76\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u3002</p><p>2\u3001\u4E0E\u4E0A\u8FF0\u6B65\u9AA4\u7C7B\u4F3C\uFF0C\u70B9\u51FB<strong>\u6DFB\u52A0\u5BB9\u5668</strong>\uFF0C\u5728\u641C\u7D22\u680F\u4E2D\u8F93\u5165 <code>wordpress:4.8-apache</code> \u5E76\u6309\u4E0B<strong>\u56DE\u8F66\u952E</strong>\uFF0C\u7136\u540E\u70B9\u51FB<strong>\u4F7F\u7528\u9ED8\u8BA4\u7AEF\u53E3</strong>\u3002</p><p>3\u3001\u5411\u4E0B\u6EDA\u52A8\u5230<strong>\u73AF\u5883\u53D8\u91CF</strong>\uFF0C\u70B9\u51FB<strong>\u5F15\u7528\u914D\u7F6E\u6587\u4EF6\u6216\u5BC6\u94A5</strong>\u3002\u8FD9\u91CC\u9700\u8981\u6DFB\u52A0\u4E24\u4E2A\u73AF\u5883\u53D8\u91CF\uFF0C\u8BF7\u6839\u636E\u4EE5\u4E0B\u622A\u56FE\u8F93\u5165\u503C\uFF1A</p><ul><li>\u5BF9\u4E8E <code>WORDPRESS_DB_PASSWORD</code>\uFF0C\u8BF7\u9009\u62E9\u5728\u6B65\u9AA4 1 \u4E2D\u521B\u5EFA\u7684 <code>wordpress-secret</code> \u548C <code>WORDPRESS_DB_PASSWORD</code>\u3002</li><li>\u70B9\u51FB<strong>\u6DFB\u52A0\u73AF\u5883\u53D8\u91CF</strong>\uFF0C\u5206\u522B\u8F93\u5165 Key\uFF1A<code>WORDPRESS_DB_HOST</code> \u548C Value:<code>mysql</code>\u3002</li></ul><blockquote><p>\u8B66\u544A\uFF1A\u5BF9\u4E8E\u6B64\u5904\u6DFB\u52A0\u7684\u7B2C\u4E8C\u4E2A\u73AF\u5883\u53D8\u91CF\uFF0C\u8BE5\u503C\u5FC5\u987B\u4E0E\u4E0A\u9762\u7684\u7B2C5\u6B65\u4E2D\u521B\u5EFA MySQL \u6709\u72B6\u6001\u670D\u52A1\u8BBE\u7F6E\u7684\u540D\u79F0\u5B8C\u5168\u76F8\u540C\u3002\u5426\u5219\uFF0CWordPress \u5C06\u65E0\u6CD5\u8FDE\u63A5\u5230 MySQL \u5BF9\u5E94\u7684\u6570\u636E\u5E93\u3002</p></blockquote><p>\u70B9\u51FB <strong>\u221A</strong> \u4FDD\u5B58\u914D\u7F6E\uFF0C\u518D\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u7EE7\u7EED\u3002</p><p><img src="'+_n+'" alt="image-20220516150150694"></p><p>3\u3001\u5728<strong>\u5B58\u50A8\u5377\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u70B9\u51FB<strong>\u6302\u8F7D\u5B58\u50A8\u5377</strong>\uFF0C\u5E76 <strong>\u9009\u62E9\u5B58\u50A8\u5377</strong>\u3002</p><p>4\u3001\u9009\u62E9\u4E0A\u4E00\u6B65\u521B\u5EFA\u7684 <code>wordpress-pvc</code>\uFF0C\u5C06\u6A21\u5F0F\u8BBE\u7F6E\u4E3A<code>\u8BFB\u5199</code>\uFF0C\u5E76\u8F93\u5165\u6302\u8F7D\u8DEF\u5F84 <code>/var/www/html</code>\u3002\u70B9\u51FB <strong>\u221A</strong> \u4FDD\u5B58\uFF0C\u518D\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u7EE7\u7EED\u3002</p><p><img src="'+qn+'" alt="image-20220516150245715"></p><p>5\u3001\u5728<strong>\u9AD8\u7EA7\u8BBE\u7F6E</strong>\u4E2D\uFF0C\u53EF\u4EE5\u76F4\u63A5\u70B9\u51FB<strong>\u6DFB\u52A0</strong>\u521B\u5EFA\u670D\u52A1\uFF0C\u4E5F\u53EF\u4EE5\u6309\u9700\u9009\u62E9\u5176\u4ED6\u9009\u9879\u3002</p><p>6\u3001\u73B0\u5728\uFF0C\u524D\u7AEF\u7EC4\u4EF6\u4E5F\u5DF2\u8BBE\u7F6E\u5B8C\u6210\u3002\u70B9\u51FB<strong>\u4E0B\u4E00\u6B65</strong>\u7EE7\u7EED\u3002</p><p>7\u3001\u60A8\u53EF\u4EE5<strong>\u8DEF\u7531\u8BBE\u7F6E</strong>\u4E2D\u8BBE\u7F6E\u8DEF\u7531\u89C4\u5219\uFF08\u5E94\u7528\u8DEF\u7531 Ingress\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u76F4\u63A5\u70B9\u51FB<strong>\u521B\u5EFA</strong>\u3002</p><p><img src="'+Pn+'" alt="image-20220516150608459"></p><p>8\u3001\u521B\u5EFA\u540E\uFF0C\u5E94\u7528\u5C06\u663E\u793A\u5728\u5E94\u7528\u5217\u8868\u4E2D\u3002</p><h4 id="\u6B65\u9AA4-4-\u9A8C\u8BC1\u8D44\u6E90" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4-4-\u9A8C\u8BC1\u8D44\u6E90" aria-hidden="true">#</a> \u6B65\u9AA4 4\uFF1A\u9A8C\u8BC1\u8D44\u6E90</h4><blockquote><p>\u5728<strong>\u5DE5\u4F5C\u8D1F\u8F7D</strong>\u4E2D\uFF0C\u5206\u522B\u68C0\u67E5<strong>\u90E8\u7F72</strong>\u548C<strong>\u6709\u72B6\u6001\u526F\u672C\u96C6</strong>\u4E2D <code>wordpress-v1</code> \u548C <code>mysql-v1</code> \u7684\u72B6\u6001\u3002\u5982\u679C\u5B83\u4EEC\u7684\u8FD0\u884C\u72B6\u6001\u4E3A<strong>\u8FD0\u884C\u4E2D</strong>\uFF0C\u5C31\u610F\u5473\u7740 WordPress \u5DF2\u7ECF\u6210\u529F\u521B\u5EFA\u3002</p></blockquote><p><img src="'+wn+'" alt="image-20220516151023577"></p><p><img src="'+jn+'" alt="image-20220516151031852"></p><h4 id="\u6B65\u9AA4-5-\u901A\u8FC7-nodeport-\u8BBF\u95EE-wordpress" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4-5-\u901A\u8FC7-nodeport-\u8BBF\u95EE-wordpress" aria-hidden="true">#</a> \u6B65\u9AA4 5\uFF1A\u901A\u8FC7 NodePort \u8BBF\u95EE WordPress</h4><p>1\u3001\u82E5\u8981\u5728\u96C6\u7FA4\u5916\u8BBF\u95EE\u670D\u52A1\uFF0C\u8BF7\u9996\u5148\u5BFC\u822A\u5230<strong>\u670D\u52A1</strong>\u3002\u70B9\u51FB <code>wordpress</code> \u53F3\u4FA7\u7684\u4E09\u4E2A\u70B9\u540E\uFF0C\u9009\u62E9<strong>\u7F16\u8F91\u5916\u90E8\u8BBF\u95EE</strong>\u3002</p><p><img src="'+En+'" alt="image-20220516151356307"></p><p>2\u3001\u5728<strong>\u8BBF\u95EE\u65B9\u5F0F</strong>\u4E2D\u9009\u62E9 <code>NodePort</code>\uFF0C\u7136\u540E\u70B9\u51FB<strong>\u786E\u5B9A</strong>\u3002</p><p><img src="'+Rn+'" alt="image-20220516151419794"></p><p>3\u3001\u70B9\u51FB\u670D\u52A1\u8FDB\u5165\u8BE6\u60C5\u9875\uFF0C\u53EF\u4EE5\u5728<strong>\u7AEF\u53E3</strong>\u5904\u67E5\u770B\u66B4\u9732\u7684\u7AEF\u53E3\u3002</p><p><img src="'+Sn+'" alt="image-20220516151506949"></p><p>4\u3001\u901A\u8FC7 <code>{Node IP}:{NodePort}</code> \u8BBF\u95EE\u6B64\u5E94\u7528\u7A0B\u5E8F\uFF0C\u53EF\u4EE5\u770B\u5230\u4E0B\u56FE\uFF1A</p><p>http://192.168.101.120:32109\u3001http://ks.k8s.com:32109/</p><h3 id="c\u3001devops" tabindex="-1"><a class="header-anchor" href="#c\u3001devops" aria-hidden="true">#</a> C\u3001DevOps</h3><h3 id="d\u3001\u6D41\u6C34\u7EBF" tabindex="-1"><a class="header-anchor" href="#d\u3001\u6D41\u6C34\u7EBF" aria-hidden="true">#</a> D\u3001\u6D41\u6C34\u7EBF</h3><h3 id="e\u3001" tabindex="-1"><a class="header-anchor" href="#e\u3001" aria-hidden="true">#</a> E\u3001</h3><h3 id="f\u3001" tabindex="-1"><a class="header-anchor" href="#f\u3001" aria-hidden="true">#</a> F\u3001</h3><h3 id="g\u3001" tabindex="-1"><a class="header-anchor" href="#g\u3001" aria-hidden="true">#</a> G\u3001</h3><h1 id="\u4E09\u3001k8s\u90E8\u7F72\u8F6F\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001k8s\u90E8\u7F72\u8F6F\u4EF6" aria-hidden="true">#</a> \u4E09\u3001K8S\u90E8\u7F72\u8F6F\u4EF6</h1><p>\u5982\u4F55\u90E8\u7F72</p><p>\u53EF\u4EE5\u4F7F\u7528kubesphere\uFF0C\u5FEB\u901F\u642D\u5EFAMySQL.\u73AF\u5883\u3002</p><ul><li><p>\u6709\u72B6\u6001\u670D\u52A1\u62BD\u53D6\u914D\u7F6E\u4E3AConfigMap</p></li><li><p>\u6709\u72B6\u6001\u670D\u52A1\u5FC5\u987B\u4F7F\u7528pvc \u6301\u4E45\u5316\u6570\u636E</p></li><li><p>\u670D\u52A1\u96C6\u7FA4\u5185\u8BBF\u95EE\u4F7F\u7528DNS \u63D0\u4F9B\u7684\u7A33\u5B9A\u57DF\u540D</p></li></ul><p><img src="'+An+'" alt="image-20220501211906409"></p><h2 id="_1-\u3001\u5B89\u88C5\u8F6F\u4EF6-mysql\u3001redis\u3001mq" tabindex="-1"><a class="header-anchor" href="#_1-\u3001\u5B89\u88C5\u8F6F\u4EF6-mysql\u3001redis\u3001mq" aria-hidden="true">#</a> 1\uFF09\u3001\u5B89\u88C5\u8F6F\u4EF6 MySQL\u3001redis\u3001mq\uFF09</h2><h3 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> MySQL</h3><h3 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> redis</h3><h3 id="mq" tabindex="-1"><a class="header-anchor" href="#mq" aria-hidden="true">#</a> mq</h3><h2 id="_2-\u3001\u90E8\u7F72-mysql\u3001redis\u3001es\u3001mq\u3001nacos\u3001zipkin\u3001sentinel\u3001\u5546\u57CE\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#_2-\u3001\u90E8\u7F72-mysql\u3001redis\u3001es\u3001mq\u3001nacos\u3001zipkin\u3001sentinel\u3001\u5546\u57CE\u5E94\u7528" aria-hidden="true">#</a> 2\uFF09\u3001\u90E8\u7F72\uFF08MySQL\u3001redis\u3001es\u3001mq\u3001nacos\u3001zipkin\u3001sentinel\u3001\u5546\u57CE\u5E94\u7528\uFF09</h2><h2 id="_3-\u3001\u521B\u5EFAdockerfile" tabindex="-1"><a class="header-anchor" href="#_3-\u3001\u521B\u5EFAdockerfile" aria-hidden="true">#</a> 3\uFF09\u3001\u521B\u5EFAdockerfile</h2><h2 id="_4-\u3001" tabindex="-1"><a class="header-anchor" href="#_4-\u3001" aria-hidden="true">#</a> 4\uFF09\u3001</h2><h2 id="_5-\u3001" tabindex="-1"><a class="header-anchor" href="#_5-\u3001" aria-hidden="true">#</a> 5\uFF09\u3001</h2><h1 id="\u56DB\u3001\u6D41\u6C34\u7EBF" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u6D41\u6C34\u7EBF" aria-hidden="true">#</a> \u56DB\u3001\u6D41\u6C34\u7EBF</h1><h2 id="_1-\u3001gitee\u62C9\u53D6\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_1-\u3001gitee\u62C9\u53D6\u4EE3\u7801" aria-hidden="true">#</a> 1\uFF09\u3001gitee\u62C9\u53D6\u4EE3\u7801</h2><h2 id="_2-\u3001" tabindex="-1"><a class="header-anchor" href="#_2-\u3001" aria-hidden="true">#</a> 2\uFF09\u3001</h2><h2 id="_3-\u3001" tabindex="-1"><a class="header-anchor" href="#_3-\u3001" aria-hidden="true">#</a> 3\uFF09\u3001</h2><h2 id="_4-\u3001-1" tabindex="-1"><a class="header-anchor" href="#_4-\u3001-1" aria-hidden="true">#</a> 4\uFF09\u3001</h2>',141);function za(Va,Ma){const a=c("ExternalLinkIcon");return i(),l("div",null,[Cn,Dn,Tn,In,On,n("p",null,[n("a",zn,[Vn,e(a)])]),n("p",null,[n("a",Mn,[Gn,e(a)])]),Ln,n("h3",Kn,[Bn,Hn,n("a",Wn,[Fn,e(a)])]),Un,n("p",null,[Xn,n("a",Qn,[Jn,e(a)]),Yn]),Zn,$n,ns,n("p",null,[ss,n("a",as,[es,e(a)]),ts,n("a",ps,[is,e(a)]),ls]),cs,n("p",null,[os,n("a",us,[rs,e(a)]),ds]),ks,ms,n("p",null,[vs,n("a",bs,[gs,e(a)]),hs]),ys,n("p",null,[n("a",fs,[xs,e(a)]),_s,n("a",qs,[Ps,e(a)]),ws]),js,n("p",null,[n("a",Es,[Rs,e(a)]),Ss]),As,n("p",null,[Ns,n("a",Cs,[Ds,e(a)])]),Ts,n("p",null,[Is,n("a",Os,[zs,e(a)]),Vs]),Ms,n("h4",Gs,[Ls,Ks,n("a",Bs,[Hs,e(a)])]),Ws,n("p",null,[n("a",Fs,[Us,e(a)]),Xs]),Qs,Js,n("p",null,[n("a",Ys,[Zs,e(a)]),$s]),na,n("p",null,[n("a",sa,[aa,e(a)]),ea,n("a",ta,[pa,e(a)])]),ia,n("blockquote",null,[n("p",null,[la,n("a",ca,[oa,e(a)]),ua,n("a",ra,[da,e(a)]),ka])]),ma,n("h4",va,[ba,ga,n("a",ha,[ya,e(a)])]),fa,n("p",null,[xa,n("a",_a,[qa,e(a)]),Pa]),wa,n("ul",null,[n("li",null,[n("p",null,[ja,n("a",Ea,[Ra,e(a)]),Sa]),Aa]),n("li",null,[n("p",null,[Na,n("a",Ca,[Da,e(a)]),Ta]),Ia])]),Oa])}var Ka=p(Nn,[["render",za],["__file","spring-cloud-alibaba-note-cluster.html.vue"]]);export{Ka as default};
