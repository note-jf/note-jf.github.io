import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,a as t}from"./app.c37b87a5.js";var p="/assets/true-image-20210923185039543.d3d108ff.png";const e={},o=t('<h1 id="_1-\u5F02\u6B65-completablefuture" tabindex="-1"><a class="header-anchor" href="#_1-\u5F02\u6B65-completablefuture" aria-hidden="true">#</a> 1 \u5F02\u6B65 CompletableFuture</h1><h2 id="_1-1-\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#_1-1-\u7EBF\u7A0B" aria-hidden="true">#</a> 1.1 \u7EBF\u7A0B</h2><p><img src="'+p+`" alt=""></p><p>\u524D3\u79CD\u4E0D\u7528\u3002</p><h2 id="_1-2-completablefuture" tabindex="-1"><a class="header-anchor" href="#_1-2-completablefuture" aria-hidden="true">#</a> 1.2 CompletableFuture</h2><h3 id="a\u3001-completedfuture-\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684-completablefuture-\u5B83\u5DF2\u7ECF\u7528\u7ED9\u5B9A\u7684\u503C\u5B8C\u6210\u4E86\u3002" tabindex="-1"><a class="header-anchor" href="#a\u3001-completedfuture-\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684-completablefuture-\u5B83\u5DF2\u7ECF\u7528\u7ED9\u5B9A\u7684\u503C\u5B8C\u6210\u4E86\u3002" aria-hidden="true">#</a> A\u3001<strong>.completedFuture</strong> \u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684 CompletableFuture\uFF0C\u5B83\u5DF2\u7ECF\u7528\u7ED9\u5B9A\u7684\u503C\u5B8C\u6210\u4E86\u3002</h3><h3 id="b\u3001-supplyasync-\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684-completablefuture-\u5B83\u7531\u5728\u7ED9\u5B9A\u6267\u884C\u5668\u4E2D\u8FD0\u884C\u7684\u4EFB\u52A1\u5F02\u6B65\u5B8C\u6210-\u5176\u503C\u662F\u901A\u8FC7\u8C03\u7528\u7ED9\u5B9A\u4F9B\u5E94\u5546\u83B7\u5F97\u7684" tabindex="-1"><a class="header-anchor" href="#b\u3001-supplyasync-\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684-completablefuture-\u5B83\u7531\u5728\u7ED9\u5B9A\u6267\u884C\u5668\u4E2D\u8FD0\u884C\u7684\u4EFB\u52A1\u5F02\u6B65\u5B8C\u6210-\u5176\u503C\u662F\u901A\u8FC7\u8C03\u7528\u7ED9\u5B9A\u4F9B\u5E94\u5546\u83B7\u5F97\u7684" aria-hidden="true">#</a> B\u3001<strong>.supplyAsync</strong> \u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684 CompletableFuture\uFF0C\u5B83\u7531\u5728\u7ED9\u5B9A\u6267\u884C\u5668\u4E2D\u8FD0\u884C\u7684\u4EFB\u52A1\u5F02\u6B65\u5B8C\u6210\uFF0C\u5176\u503C\u662F\u901A\u8FC7\u8C03\u7528\u7ED9\u5B9A\u4F9B\u5E94\u5546\u83B7\u5F97\u7684</h3><h3 id="c\u3001-runasync-\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684-completablefuture-\u5B83\u5728\u8FD0\u884C\u7ED9\u5B9A\u64CD\u4F5C\u540E\u7531-link-\u4E2D\u8FD0\u884C\u7684\u4EFB\u52A1\u5F02\u6B65\u5B8C\u6210\u3002" tabindex="-1"><a class="header-anchor" href="#c\u3001-runasync-\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684-completablefuture-\u5B83\u5728\u8FD0\u884C\u7ED9\u5B9A\u64CD\u4F5C\u540E\u7531-link-\u4E2D\u8FD0\u884C\u7684\u4EFB\u52A1\u5F02\u6B65\u5B8C\u6210\u3002" aria-hidden="true">#</a> C\u3001<strong>.runAsync</strong> \u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684 CompletableFuture\uFF0C\u5B83\u5728\u8FD0\u884C\u7ED9\u5B9A\u64CD\u4F5C\u540E\u7531 {@link} \u4E2D\u8FD0\u884C\u7684\u4EFB\u52A1\u5F02\u6B65\u5B8C\u6210\u3002</h3><h3 id="\u7B80\u5355\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u7B80\u5355\u5B9E\u4F8B" aria-hidden="true">#</a> <strong>\u7B80\u5355\u5B9E\u4F8B</strong>\uFF1A</h3><h3 id="_1-2-1-\u65B9\u6CD5\u5B8C\u6210\u540E\u7684\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_1-2-1-\u65B9\u6CD5\u5B8C\u6210\u540E\u7684\u5904\u7406" aria-hidden="true">#</a> 1.2.1 \u65B9\u6CD5\u5B8C\u6210\u540E\u7684\u5904\u7406</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">{</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main......start.....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//    service.execute(new Runable01());</span>
   <span class="token comment">//    Future&lt;Integer&gt; submit = service.submit(new Callable01());</span>
   <span class="token comment">//    submit.get();</span>

   <span class="token comment">//    CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; {</span>
   <span class="token comment">//       System.out.println(&quot;\u5F53\u524D\u7EBF\u7A0B\uFF1A&quot;+Thread.currentThread().getId());</span>
   <span class="token comment">//       int i = 10/2;</span>
   <span class="token comment">//       System.out.println(&quot;\u8FD0\u884C\u7ED3\u679C\uFF1A&quot;+i);</span>
   <span class="token comment">//    }, service);</span>

   <span class="token comment">/*
    * \u65B9\u6CD5\u5B8C\u6210\u540E\u7684\u5904\u7406
    */</span>
   <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\uFF1A&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD0\u884C\u7ED3\xB7\u679C\uFF1A&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> i<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> service<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">whenComplete</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> exception<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//\u867D\u7136\u80FD\u5F97\u5230\u5F02\u5E38\u4FE1\u606F\uFF0C\u4F46\u662F\u6CA1\u6CD5\u4FEE\u6539\u8FD4\u56DE\u6570\u636E</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F02\u6B65\u4EFB\u52A1\u6210\u529F\u5B8C\u6210\u4E86...\u7ED3\u679C\u662F\uFF1A&quot;</span><span class="token operator">+</span>res<span class="token operator">+</span><span class="token string">&quot;\u5F02\u5E38\u662F\uFF1A&quot;</span><span class="token operator">+</span>exception<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exceptionally</span><span class="token punctuation">(</span>throwable <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//\u53EF\u4EE5\u611F\u77E5\u5F02\u5E38\uFF0C\u540C\u65F6\u8FD4\u56DE\u9ED8\u8BA4\u503C</span>
      <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main......end.....&quot;</span><span class="token operator">+</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-2-\u65B9\u6CD5\u6267\u884C\u5B8C-\u540E\u7AEF\u5904\u7406-supplyasync" tabindex="-1"><a class="header-anchor" href="#_1-2-2-\u65B9\u6CD5\u6267\u884C\u5B8C-\u540E\u7AEF\u5904\u7406-supplyasync" aria-hidden="true">#</a> 1.2.2 \u65B9\u6CD5\u6267\u884C\u5B8C\uFF0C\u540E\u7AEF\u5904\u7406 \uFF08supplyAsync\uFF09</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">{</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main......start.....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/*
    * \u65B9\u6CD5\u6267\u884C\u5B8C\u540E\u7AEF\u5904\u7406
    */</span>
   <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\uFF1A&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD0\u884C\u7ED3\u679C\uFF1A&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> i<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> service<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> thr<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F02\u6B65\u4EFB\u52A1\u6210\u529F\u5B8C\u6210\u4E86...\u7ED3\u679C\u662F\uFF1A&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> result<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>thr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F02\u6B65\u4EFB\u52A1\u6210\u529F\u5B8C\u6210\u4E86...\u5F02\u5E38\u662F\uFF1A&quot;</span><span class="token operator">+</span>thr<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main......end.....&quot;</span><span class="token operator">+</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-3-\u7EBF\u7A0B\u4E32\u884C\u5316" tabindex="-1"><a class="header-anchor" href="#_1-2-3-\u7EBF\u7A0B\u4E32\u884C\u5316" aria-hidden="true">#</a> 1.2.3 \u7EBF\u7A0B\u4E32\u884C\u5316</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenApply</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> fn<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenApplyAsync</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> fn<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenApplyAsync</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> fn<span class="token punctuation">,</span><span class="token class-name">Executor</span> executor<span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>        
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenAccept</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenAcceptAsync</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenAcceptAsync</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">,</span><span class="token class-name">Executor</span> executor<span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> 
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenRun</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenRunAsync</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">thenRunAsync</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> action<span class="token punctuation">,</span><span class="token class-name">Executor</span> executor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="thenapply-\u65B9\u6CD5-\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u4F9D\u8D56\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u65F6-\u83B7\u53D6\u4E0A\u4E00\u4E2A\u4EFB\u52A1\u8FD4\u56DE\u7684\u7ED3\u679C-\u5E76\u8FD4\u56DE\u5F53\u524D\u4EFB\u52A1\u7684\u8FD4\u56DE\u503C\u3002" tabindex="-1"><a class="header-anchor" href="#thenapply-\u65B9\u6CD5-\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u4F9D\u8D56\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u65F6-\u83B7\u53D6\u4E0A\u4E00\u4E2A\u4EFB\u52A1\u8FD4\u56DE\u7684\u7ED3\u679C-\u5E76\u8FD4\u56DE\u5F53\u524D\u4EFB\u52A1\u7684\u8FD4\u56DE\u503C\u3002" aria-hidden="true">#</a> <strong>thenApply</strong> \u65B9\u6CD5\uFF1A\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u4F9D\u8D56\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u65F6\uFF0C\u83B7\u53D6\u4E0A\u4E00\u4E2A\u4EFB\u52A1\u8FD4\u56DE\u7684\u7ED3\u679C\uFF0C\u5E76\u8FD4\u56DE\u5F53\u524D\u4EFB\u52A1\u7684\u8FD4\u56DE\u503C\u3002</h4><h4 id="thenaccept-\u65B9\u6CD5-\u6D88\u8D39\u5904\u7406\u7ED3\u679C\u3002\u63A5\u6536\u4EFB\u52A1\u7684\u5904\u7406\u7ED3\u679C-\u5E76\u6D88\u8D39\u5904\u7406-\u65E0\u8FD4\u56DE\u7ED3\u679C\u3002" tabindex="-1"><a class="header-anchor" href="#thenaccept-\u65B9\u6CD5-\u6D88\u8D39\u5904\u7406\u7ED3\u679C\u3002\u63A5\u6536\u4EFB\u52A1\u7684\u5904\u7406\u7ED3\u679C-\u5E76\u6D88\u8D39\u5904\u7406-\u65E0\u8FD4\u56DE\u7ED3\u679C\u3002" aria-hidden="true">#</a> <strong>thenAccept</strong> \u65B9\u6CD5\uFF1A\u6D88\u8D39\u5904\u7406\u7ED3\u679C\u3002\u63A5\u6536\u4EFB\u52A1\u7684\u5904\u7406\u7ED3\u679C\uFF0C\u5E76\u6D88\u8D39\u5904\u7406\uFF0C\u65E0\u8FD4\u56DE\u7ED3\u679C\u3002</h4><h4 id="thenrun-\u65B9\u6CD5-\u53EA\u8981\u4E0A\u9762\u7684\u4EFB\u52A1\u6267\u884C\u5B8C\u6210-\u5C31\u5F00\u59CB\u6267\u884Cthenrun-\u53EA\u662F\u5904\u7406\u5B8C\u4EFB\u52A1\u540E-\u6267\u884Cthenrun\u7684\u540E\u7EED\u64CD\u4F5C\u3002" tabindex="-1"><a class="header-anchor" href="#thenrun-\u65B9\u6CD5-\u53EA\u8981\u4E0A\u9762\u7684\u4EFB\u52A1\u6267\u884C\u5B8C\u6210-\u5C31\u5F00\u59CB\u6267\u884Cthenrun-\u53EA\u662F\u5904\u7406\u5B8C\u4EFB\u52A1\u540E-\u6267\u884Cthenrun\u7684\u540E\u7EED\u64CD\u4F5C\u3002" aria-hidden="true">#</a> <strong>thenRun</strong> \u65B9\u6CD5\uFF1A\u53EA\u8981\u4E0A\u9762\u7684\u4EFB\u52A1\u6267\u884C\u5B8C\u6210\uFF0C\u5C31\u5F00\u59CB\u6267\u884C<em>thenRun</em>,\u53EA\u662F\u5904\u7406\u5B8C\u4EFB\u52A1\u540E\uFF0C\u6267\u884C<em>thenRun</em>\u7684\u540E\u7EED\u64CD\u4F5C\u3002</h4><h4 id="\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u4F8B" aria-hidden="true">#</a> \u5B9E\u4F8B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token doc-comment comment">/**
	 * \u7EBF\u7A0B\u6C60-\u7EBF\u7A0B\u4E32\u884C\u5316
	 * 1\u3001thenRunL\uFF1A\u4E0D\u80FD\u83B7\u53D6\u4E0A\u4E00\u6B65\u7684\u6267\u884C\u7ED3\u679C
	 * 2\u3001thenAcceptAsync\uFF1A\u80FD\u63A5\u53D7\u4E0A\u4E00\u6B65\u7ED3\u679C\uFF0C\u4F46\u662F\u65E0\u8FD4\u56DE\u503C
	 * 3\u3001thenApplyAsync\uFF1A\u80FD\u63A5\u53D7\u4E0A\u4E00\u6B65\u7ED3\u679C\uFF0C\u6709\u8FD4\u56DE\u503C
	 */</span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main......start.....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> future2 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\uFF1A&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD0\u884C\u7ED3\u679C\uFF1A&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> i<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> service<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenAcceptAsync</span><span class="token punctuation">(</span>res <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u80FD\u63A5\u53D7\u4E0A\u4E00\u6B65\u7ED3\u679C\uFF0C\u4F46\u662F\u65E0\u8FD4\u56DE\u503C\uFF0C\u4EFB\u52A12\u542F\u52A8\u4E86...&quot;</span><span class="token operator">+</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> service<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future3 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\uFF1A&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD0\u884C\u7ED3\u679C\uFF1A&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> i<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> service<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenApplyAsync</span><span class="token punctuation">(</span>res <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u80FD\u63A5\u53D7\u4E0A\u4E00\u6B65\u7ED3\u679C\uFF0C\u6709\u8FD4\u56DE\u503C\uFF0C\u4EFB\u52A12\u542F\u52A8\u4E86...&quot;</span><span class="token operator">+</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token string">&quot;Hello+&quot;</span><span class="token operator">+</span>res<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> service<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future2....end...&quot;</span><span class="token operator">+</span>future2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future3....end...&quot;</span><span class="token operator">+</span>future3<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo6_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main......start.....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future1 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">completedFuture</span><span class="token punctuation">(</span><span class="token string">&quot;service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future2 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future2\u5F53\u524D\u7EBF\u7A0B\uFF1A&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future2\u8FD0\u884C\u7ED3\u679C\uFF1A&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> i<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">ThreadTests</span><span class="token punctuation">.</span>service<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> future3 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future3\u5F53\u524D\u7EBF\u7A0B\uFF1A&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future3\u8FD0\u884C\u7ED3\u679C\uFF1A&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">ThreadTests</span><span class="token punctuation">.</span>service<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future1....end...&quot;</span><span class="token operator">+</span>future1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future2....end...&quot;</span><span class="token operator">+</span>future2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;future3....end...&quot;</span><span class="token operator">+</span>future3<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-4-\u4E24\u4EFB\u52A1\u7EC4\u5408" tabindex="-1"><a class="header-anchor" href="#_1-2-4-\u4E24\u4EFB\u52A1\u7EC4\u5408" aria-hidden="true">#</a> 1.2.4 \u4E24\u4EFB\u52A1\u7EC4\u5408</h3><h4 id="a\u3001\u6240\u6709\u7EBF\u7A0B\u6C60\u90FD\u8981\u5B8C\u6210" tabindex="-1"><a class="header-anchor" href="#a\u3001\u6240\u6709\u7EBF\u7A0B\u6C60\u90FD\u8981\u5B8C\u6210" aria-hidden="true">#</a> A\u3001\u6240\u6709\u7EBF\u7A0B\u6C60\u90FD\u8981\u5B8C\u6210</h4><h5 id="runafterbothasync\u3001thenacceptbothasync\u3001thencombineasync" tabindex="-1"><a class="header-anchor" href="#runafterbothasync\u3001thenacceptbothasync\u3001thencombineasync" aria-hidden="true">#</a> runAfterBothAsync\u3001thenAcceptBothAsync\u3001thenCombineAsync</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future01 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A11\u7EBF\u7A0B:&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1014</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A11\u7ED3\u675F:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> i<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future02 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A12\u7EBF\u7A0B:&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">try</span><span class="token punctuation">{</span>
				<span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A12\u7ED3\u675F:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
				e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token string">&quot;Hello-02&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//		future01.runAfterBothAsync(future02, () -&gt; {</span>
<span class="token comment">//			System.out.println(&quot;\u4EFB\u52A13\u5F00\u59CB----&quot;);</span>
<span class="token comment">//		}, executor);</span>
		future01<span class="token punctuation">.</span><span class="token function">thenAcceptBothAsync</span><span class="token punctuation">(</span>future02<span class="token punctuation">,</span> <span class="token punctuation">(</span>f1<span class="token punctuation">,</span> f2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A13\u5F00\u59CB\u4E4B\u524D---f1:&quot;</span><span class="token operator">+</span>f1<span class="token operator">+</span><span class="token string">&quot;--f2&gt;&quot;</span><span class="token operator">+</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future03 <span class="token operator">=</span> future01<span class="token punctuation">.</span><span class="token function">thenCombineAsync</span><span class="token punctuation">(</span>future02<span class="token punctuation">,</span> <span class="token punctuation">(</span>f1<span class="token punctuation">,</span> f2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&quot;\u4EFB\u52A13\u7ED3\u675Ff1:&quot;</span><span class="token operator">+</span>f1<span class="token operator">+</span><span class="token string">&quot;--f2&quot;</span><span class="token operator">+</span>f2<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>future03<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="b\u3001\u7EBF\u7A0B\u6C60\u53EA\u8981\u4E00\u4E2A\u5B8C\u6210" tabindex="-1"><a class="header-anchor" href="#b\u3001\u7EBF\u7A0B\u6C60\u53EA\u8981\u4E00\u4E2A\u5B8C\u6210" aria-hidden="true">#</a> B\u3001\u7EBF\u7A0B\u6C60\u53EA\u8981\u4E00\u4E2A\u5B8C\u6210</h4><h5 id="applytoeither-\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210-\u83B7\u53D6\u5B83\u7684\u8FD4\u56DE\u503C-\u5904\u7406\u4EFB\u52A1\u5E76\u6709\u65B0\u7684\u8FD4\u56DE\u503C\u3002" tabindex="-1"><a class="header-anchor" href="#applytoeither-\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210-\u83B7\u53D6\u5B83\u7684\u8FD4\u56DE\u503C-\u5904\u7406\u4EFB\u52A1\u5E76\u6709\u65B0\u7684\u8FD4\u56DE\u503C\u3002" aria-hidden="true">#</a> <strong>applyToEither</strong>\uFF1A\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210\uFF0C\u83B7\u53D6\u5B83\u7684\u8FD4\u56DE\u503C\uFF0C\u5904\u7406\u4EFB\u52A1\u5E76\u6709\u65B0\u7684\u8FD4\u56DE\u503C\u3002</h5><h5 id="applaccepteither-\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210-\u83B7\u53D6\u5B83\u7684\u8FD4\u56DE\u503C-\u5904\u7406\u4EFB\u52A1-\u6CA1\u6709\u65B0\u7684\u8FD4\u56DE\u503C\u3002" tabindex="-1"><a class="header-anchor" href="#applaccepteither-\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210-\u83B7\u53D6\u5B83\u7684\u8FD4\u56DE\u503C-\u5904\u7406\u4EFB\u52A1-\u6CA1\u6709\u65B0\u7684\u8FD4\u56DE\u503C\u3002" aria-hidden="true">#</a> <strong>appl</strong>acceptEither**\uFF1A\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210\uFF0C\u83B7\u53D6\u5B83\u7684\u8FD4\u56DE\u503C\uFF0C\u5904\u7406\u4EFB\u52A1\uFF0C\u6CA1\u6709\u65B0\u7684\u8FD4\u56DE\u503C\u3002</h5><h5 id="applrunaftereither-\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210-\u4E0D\u9700\u8981\u83B7\u53D6future\u7684\u7ED3\u679C-\u5904\u7406\u4EFB\u52A1-\u6CA1\u6709\u8FD4\u56DE\u503C\u3002" tabindex="-1"><a class="header-anchor" href="#applrunaftereither-\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210-\u4E0D\u9700\u8981\u83B7\u53D6future\u7684\u7ED3\u679C-\u5904\u7406\u4EFB\u52A1-\u6CA1\u6709\u8FD4\u56DE\u503C\u3002" aria-hidden="true">#</a> <strong>appl</strong>runAfterEither**\uFF1A\u4E24\u4E2A\u4EFB\u52A1\u6709\u4E00\u4E2A\u6267\u884C\u5B8C\u6210\uFF0C\u4E0D\u9700\u8981\u83B7\u53D6future\u7684\u7ED3\u679C\uFF0C\u5904\u7406\u4EFB\u52A1\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002</h5><ul><li>applyToEitherAsync: \u611F\u77E5\u7ED3\u679C\uFF0C\u81EA\u5DF1\u6709\u8FD4\u56DE\u503C</li><li>acceptEitherAsync: \u611F\u77E5\u7ED3\u679C\uFF0C\u81EA\u5DF1\u6CA1\u6709\u8FD4\u56DE\u503C</li><li>runAfterEitherAsync: \u4E0D\u611F\u77E5\u7ED3\u679C\uFF0C\u81EA\u5DF1\u6CA1\u6709\u8FD4\u56DE\u503C</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">applyToEither</span><span class="token punctuation">(</span>
        <span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> fn<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">applyToEitherAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> fn<span class="token punctuation">)</span>    
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">applyToEitherAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> fn<span class="token punctuation">,</span>
        <span class="token class-name">Executor</span> executor<span class="token punctuation">)</span> 
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">acceptEither</span><span class="token punctuation">(</span>
        <span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">acceptEitherAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">acceptEitherAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">,</span>
        <span class="token class-name">Executor</span> executor<span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">runAfterEither</span><span class="token punctuation">(</span><span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span>
                                                  <span class="token class-name">Runnable</span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">runAfterEitherAsync</span><span class="token punctuation">(</span><span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span>
                                                  <span class="token class-name">Runnable</span> action<span class="token punctuation">)</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">runAfterEitherAsync</span><span class="token punctuation">(</span><span class="token class-name">CompletionStage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> other<span class="token punctuation">,</span>
                                                  <span class="token class-name">Runnable</span> action<span class="token punctuation">,</span>
                                                  <span class="token class-name">Executor</span> executor<span class="token punctuation">)</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future01 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A11\u7EBF\u7A0B:&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1014</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A11\u7ED3\u675F:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> i<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future02 <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A12\u7EBF\u7A0B:&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">try</span><span class="token punctuation">{</span>
				<span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A12\u7ED3\u675F:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
				e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token string">&quot;Hello-02&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//runAfterEitherAsync: \u4E0D\u611F\u77E5\u7ED3\u679C\uFF0C\u81EA\u5DF1\u6CA1\u6709\u8FD4\u56DE\u503C</span>
future01<span class="token punctuation">.</span><span class="token function">runAfterEitherAsync</span><span class="token punctuation">(</span>future02<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A13\u5F00\u59CB...\u4E4B\u524D\u7684\u7ED3\u679C:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//void accept(T t); .</span>
<span class="token comment">//acceptEitherAsync: \u611F\u77E5\u7ED3\u679C\uFF0C\u81EA\u5DF1\u6CA1\u6709\u8FD4\u56DE\u503C</span>
future01<span class="token punctuation">.</span><span class="token function">acceptEitherAsync</span><span class="token punctuation">(</span>future02<span class="token punctuation">,</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A13\u5F00\u59CB...\u4E4B\u524D\u7684\u7ED3\u679C:&quot;</span><span class="token operator">+</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//applyToEitherAsync: \u611F\u77E5\u7ED3\u679C\uFF0C\u81EA\u5DF1\u6709\u8FD4\u56DE\u503C</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> future01<span class="token punctuation">.</span><span class="token function">applyToEitherAsync</span><span class="token punctuation">(</span>future02<span class="token punctuation">,</span> res <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A13\u5F00\u59CB...\u4E4B\u524D\u7684\u7ED3\u679C:&quot;</span><span class="token operator">+</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;-&gt;\u54C8\u54C8&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main....end....&quot;</span><span class="token operator">+</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E1A\u52A1\u5B9E\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u4E1A\u52A1\u5B9E\u7528\u573A\u666F" aria-hidden="true">#</a> \u4E1A\u52A1\u5B9E\u7528\u573A\u666F</h2><p>\u8BA2\u5355+\u8D2D\u7269\u8F66\u6A21\u5757</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u83B7\u53D6\u5F53\u524D\u7EBF\u7A0B\u8BF7\u6C42\u5934\u4FE1\u606F(\u89E3\u51B3Feign\u5F02\u6B65\u8C03\u7528\u4E22\u5931\u8BF7\u6C42\u5934\u95EE\u9898)</span>
<span class="token class-name">RequestAttributes</span> requestAttributes <span class="token operator">=</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//\u5F00\u542F\u7B2C\u4E00\u4E2A\u5F02\u6B65\u4EFB\u52A1\uFF1A\u8FDC\u7A0B\u67E5\u8BE2\u6240\u6709\u7684\u6536\u83B7\u5730\u5740\u5217\u8868</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> addressFuture <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u90FD\u6765\u5171\u4EAB\u4E4B\u524D\u7684\u8BF7\u6C42\u6570\u636E</span>
    <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">setRequestAttributes</span><span class="token punctuation">(</span>requestAttributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\u4E1A\u52A1\u903B\u8F91<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> threadPoolExecutor<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//\u5F00\u542F\u7B2C\u4E8C\u4E2A\u5F02\u6B65\u4EFB\u52A1\uFF1A\u8FDC\u7A0B\u67E5\u8BE2\u8D2D\u7269\u8F66\u6240\u6709\u9009\u4E2D\u7684\u8D2D\u7269\u9879\uFF1A\u67E5\u8BE2\u5546\u54C1\u5E93\u5B58\u4FE1\u606F</span>
<span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> cartInfoFuture <span class="token operator">=</span> <span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u90FD\u6765\u5171\u4EAB\u4E4B\u524D\u7684\u8BF7\u6C42\u6570\u636E</span>
    <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">setRequestAttributes</span><span class="token punctuation">(</span>requestAttributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\u4E1A\u52A1\u903B\u8F91<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> threadPoolExecutor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenRunAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\u4E1A\u52A1\u903B\u8F91<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> threadPoolExecutor<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//\u6240\u6709\u7EBF\u7A0B\u6C60\u5B8C\u6210</span>
<span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span><span class="token function">allOf</span><span class="token punctuation">(</span>addressFuture<span class="token punctuation">,</span> cartInfoFuture<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> orderConfirmVo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,34),c=[o];function l(u,i){return s(),a("div",null,c)}var d=n(e,[["render",l],["__file","asynchronous.html.vue"]]);export{d as default};
